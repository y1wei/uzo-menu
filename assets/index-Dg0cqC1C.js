(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function hl(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Oe={},kr=[],rn=()=>{},sf=()=>!1,mo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fl=t=>t.startsWith("onUpdate:"),lt=Object.assign,dl=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Mm=Object.prototype.hasOwnProperty,Ce=(t,e)=>Mm.call(t,e),ce=Array.isArray,Mr=t=>ii(t)==="[object Map]",of=t=>ii(t)==="[object Set]",Zc=t=>ii(t)==="[object Date]",fe=t=>typeof t=="function",We=t=>typeof t=="string",ln=t=>typeof t=="symbol",De=t=>t!==null&&typeof t=="object",af=t=>(De(t)||fe(t))&&fe(t.then)&&fe(t.catch),lf=Object.prototype.toString,ii=t=>lf.call(t),Lm=t=>ii(t).slice(8,-1),cf=t=>ii(t)==="[object Object]",pl=t=>We(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ps=hl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),go=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},Fm=/-\w/g,Ut=go(t=>t.replace(Fm,e=>e.slice(1).toUpperCase())),Bm=/\B([A-Z])/g,Zn=go(t=>t.replace(Bm,"-$1").toLowerCase()),_o=go(t=>t.charAt(0).toUpperCase()+t.slice(1)),na=go(t=>t?`on${_o(t)}`:""),Un=(t,e)=>!Object.is(t,e),xi=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},uf=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},ml=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let eu;const yo=()=>eu||(eu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gl(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=We(r)?Hm(r):gl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(We(t)||De(t))return t}const Um=/;(?![^(]*\))/g,jm=/:([^]+)/,$m=/\/\*[^]*?\*\//g;function Hm(t){const e={};return t.replace($m,"").split(Um).forEach(n=>{if(n){const r=n.split(jm);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function oi(t){let e="";if(We(t))e=t;else if(ce(t))for(let n=0;n<t.length;n++){const r=oi(t[n]);r&&(e+=r+" ")}else if(De(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const qm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zm=hl(qm);function hf(t){return!!t||t===""}function Gm(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=_l(t[r],e[r]);return n}function _l(t,e){if(t===e)return!0;let n=Zc(t),r=Zc(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=ln(t),r=ln(e),n||r)return t===e;if(n=ce(t),r=ce(e),n||r)return n&&r?Gm(t,e):!1;if(n=De(t),r=De(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const l=t.hasOwnProperty(a),c=e.hasOwnProperty(a);if(l&&!c||!l&&c||!_l(t[a],e[a]))return!1}}return String(t)===String(e)}const ff=t=>!!(t&&t.__v_isRef===!0),te=t=>We(t)?t:t==null?"":ce(t)||De(t)&&(t.toString===lf||!fe(t.toString))?ff(t)?te(t.value):JSON.stringify(t,df,2):String(t),df=(t,e)=>ff(e)?df(t,e.value):Mr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[ra(r,i)+" =>"]=s,n),{})}:of(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ra(n))}:ln(e)?ra(e):De(e)&&!ce(e)&&!cf(e)?String(e):e,ra=(t,e="")=>{var n;return ln(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let St;class Km{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=St,!e&&St&&(this.index=(St.scopes||(St.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=St;try{return St=this,e()}finally{St=n}}}on(){++this._on===1&&(this.prevScope=St,St=this)}off(){this._on>0&&--this._on===0&&(St=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Wm(){return St}let ke;const sa=new WeakSet;class pf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,St&&St.active&&St.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sa.has(this)&&(sa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||gf(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,tu(this),_f(this);const e=ke,n=Gt;ke=this,Gt=!0;try{return this.fn()}finally{yf(this),ke=e,Gt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)vl(e);this.deps=this.depsTail=void 0,tu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Sa(this)&&this.run()}get dirty(){return Sa(this)}}let mf=0,Vs,Ds;function gf(t,e=!1){if(t.flags|=8,e){t.next=Ds,Ds=t;return}t.next=Vs,Vs=t}function yl(){mf++}function El(){if(--mf>0)return;if(Ds){let e=Ds;for(Ds=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Vs;){let e=Vs;for(Vs=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function _f(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function yf(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),vl(r),Qm(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Sa(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ef(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ef(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===$s)||(t.globalVersion=$s,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Sa(t))))return;t.flags|=2;const e=t.dep,n=ke,r=Gt;ke=t,Gt=!0;try{_f(t);const s=t.fn(t._value);(e.version===0||Un(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{ke=n,Gt=r,yf(t),t.flags&=-3}}function vl(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)vl(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Qm(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Gt=!0;const vf=[];function In(){vf.push(Gt),Gt=!1}function An(){const t=vf.pop();Gt=t===void 0?!0:t}function tu(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ke;ke=void 0;try{e()}finally{ke=n}}}let $s=0;class Jm{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Tl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ke||!Gt||ke===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ke)n=this.activeLink=new Jm(ke,this),ke.deps?(n.prevDep=ke.depsTail,ke.depsTail.nextDep=n,ke.depsTail=n):ke.deps=ke.depsTail=n,Tf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ke.depsTail,n.nextDep=void 0,ke.depsTail.nextDep=n,ke.depsTail=n,ke.deps===n&&(ke.deps=r)}return n}trigger(e){this.version++,$s++,this.notify(e)}notify(e){yl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{El()}}}function Tf(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Tf(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ca=new WeakMap,fr=Symbol(""),Pa=Symbol(""),Hs=Symbol("");function mt(t,e,n){if(Gt&&ke){let r=Ca.get(t);r||Ca.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Tl),s.map=r,s.key=n),s.track()}}function yn(t,e,n,r,s,i){const a=Ca.get(t);if(!a){$s++;return}const l=c=>{c&&c.trigger()};if(yl(),e==="clear")a.forEach(l);else{const c=ce(t),h=c&&pl(n);if(c&&n==="length"){const d=Number(r);a.forEach((p,g)=>{(g==="length"||g===Hs||!ln(g)&&g>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),h&&l(a.get(Hs)),e){case"add":c?h&&l(a.get("length")):(l(a.get(fr)),Mr(t)&&l(a.get(Pa)));break;case"delete":c||(l(a.get(fr)),Mr(t)&&l(a.get(Pa)));break;case"set":Mr(t)&&l(a.get(fr));break}}El()}function Sr(t){const e=Se(t);return e===t?e:(mt(e,"iterate",Hs),Bt(t)?e:e.map(Wt))}function Eo(t){return mt(t=Se(t),"iterate",Hs),t}function Mn(t,e){return wn(t)?Hr(dr(t)?Wt(e):e):Wt(e)}const Ym={__proto__:null,[Symbol.iterator](){return ia(this,Symbol.iterator,t=>Mn(this,t))},concat(...t){return Sr(this).concat(...t.map(e=>ce(e)?Sr(e):e))},entries(){return ia(this,"entries",t=>(t[1]=Mn(this,t[1]),t))},every(t,e){return dn(this,"every",t,e,void 0,arguments)},filter(t,e){return dn(this,"filter",t,e,n=>n.map(r=>Mn(this,r)),arguments)},find(t,e){return dn(this,"find",t,e,n=>Mn(this,n),arguments)},findIndex(t,e){return dn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return dn(this,"findLast",t,e,n=>Mn(this,n),arguments)},findLastIndex(t,e){return dn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return dn(this,"forEach",t,e,void 0,arguments)},includes(...t){return oa(this,"includes",t)},indexOf(...t){return oa(this,"indexOf",t)},join(t){return Sr(this).join(t)},lastIndexOf(...t){return oa(this,"lastIndexOf",t)},map(t,e){return dn(this,"map",t,e,void 0,arguments)},pop(){return ys(this,"pop")},push(...t){return ys(this,"push",t)},reduce(t,...e){return nu(this,"reduce",t,e)},reduceRight(t,...e){return nu(this,"reduceRight",t,e)},shift(){return ys(this,"shift")},some(t,e){return dn(this,"some",t,e,void 0,arguments)},splice(...t){return ys(this,"splice",t)},toReversed(){return Sr(this).toReversed()},toSorted(t){return Sr(this).toSorted(t)},toSpliced(...t){return Sr(this).toSpliced(...t)},unshift(...t){return ys(this,"unshift",t)},values(){return ia(this,"values",t=>Mn(this,t))}};function ia(t,e,n){const r=Eo(t),s=r[e]();return r!==t&&!Bt(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Xm=Array.prototype;function dn(t,e,n,r,s,i){const a=Eo(t),l=a!==t&&!Bt(t),c=a[e];if(c!==Xm[e]){const p=c.apply(t,i);return l?Wt(p):p}let h=n;a!==t&&(l?h=function(p,g){return n.call(this,Mn(t,p),g,t)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,t)}));const d=c.call(a,h,r);return l&&s?s(d):d}function nu(t,e,n,r){const s=Eo(t);let i=n;return s!==t&&(Bt(t)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,t)}):i=function(a,l,c){return n.call(this,a,Mn(t,l),c,t)}),s[e](i,...r)}function oa(t,e,n){const r=Se(t);mt(r,"iterate",Hs);const s=r[e](...n);return(s===-1||s===!1)&&wl(n[0])?(n[0]=Se(n[0]),r[e](...n)):s}function ys(t,e,n=[]){In(),yl();const r=Se(t)[e].apply(t,n);return El(),An(),r}const Zm=hl("__proto__,__v_isRef,__isVue"),If=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ln));function eg(t){ln(t)||(t=String(t));const e=Se(this);return mt(e,"has",t),e.hasOwnProperty(t)}class Af{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?ug:Sf:i?Rf:bf).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=ce(e);if(!s){let c;if(a&&(c=Ym[n]))return c;if(n==="hasOwnProperty")return eg}const l=Reflect.get(e,n,yt(e)?e:r);if((ln(n)?If.has(n):Zm(n))||(s||mt(e,"get",n),i))return l;if(yt(l)){const c=a&&pl(n)?l:l.value;return s&&De(c)?Da(c):c}return De(l)?s?Da(l):vo(l):l}}class wf extends Af{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const a=ce(e)&&pl(n);if(!this._isShallow){const h=wn(i);if(!Bt(r)&&!wn(r)&&(i=Se(i),r=Se(r)),!a&&yt(i)&&!yt(r))return h||(i.value=r),!0}const l=a?Number(n)<e.length:Ce(e,n),c=Reflect.set(e,n,r,yt(e)?e:s);return e===Se(s)&&(l?Un(r,i)&&yn(e,"set",n,r):yn(e,"add",n,r)),c}deleteProperty(e,n){const r=Ce(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&yn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!ln(n)||!If.has(n))&&mt(e,"has",n),r}ownKeys(e){return mt(e,"iterate",ce(e)?"length":fr),Reflect.ownKeys(e)}}class tg extends Af{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const ng=new wf,rg=new tg,sg=new wf(!0);const Va=t=>t,wi=t=>Reflect.getPrototypeOf(t);function ig(t,e,n){return function(...r){const s=this.__v_raw,i=Se(s),a=Mr(i),l=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,h=s[t](...r),d=n?Va:e?Hr:Wt;return!e&&mt(i,"iterate",c?Pa:fr),lt(Object.create(h),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:l?[d(p[0]),d(p[1])]:d(p),done:g}}})}}function bi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function og(t,e){const n={get(s){const i=this.__v_raw,a=Se(i),l=Se(s);t||(Un(s,l)&&mt(a,"get",s),mt(a,"get",l));const{has:c}=wi(a),h=e?Va:t?Hr:Wt;if(c.call(a,s))return h(i.get(s));if(c.call(a,l))return h(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&mt(Se(s),"iterate",fr),s.size},has(s){const i=this.__v_raw,a=Se(i),l=Se(s);return t||(Un(s,l)&&mt(a,"has",s),mt(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=Se(l),h=e?Va:t?Hr:Wt;return!t&&mt(c,"iterate",fr),l.forEach((d,p)=>s.call(i,h(d),h(p),a))}};return lt(n,t?{add:bi("add"),set:bi("set"),delete:bi("delete"),clear:bi("clear")}:{add(s){!e&&!Bt(s)&&!wn(s)&&(s=Se(s));const i=Se(this);return wi(i).has.call(i,s)||(i.add(s),yn(i,"add",s,s)),this},set(s,i){!e&&!Bt(i)&&!wn(i)&&(i=Se(i));const a=Se(this),{has:l,get:c}=wi(a);let h=l.call(a,s);h||(s=Se(s),h=l.call(a,s));const d=c.call(a,s);return a.set(s,i),h?Un(i,d)&&yn(a,"set",s,i):yn(a,"add",s,i),this},delete(s){const i=Se(this),{has:a,get:l}=wi(i);let c=a.call(i,s);c||(s=Se(s),c=a.call(i,s)),l&&l.call(i,s);const h=i.delete(s);return c&&yn(i,"delete",s,void 0),h},clear(){const s=Se(this),i=s.size!==0,a=s.clear();return i&&yn(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ig(s,t,e)}),n}function Il(t,e){const n=og(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ce(n,s)&&s in r?n:r,s,i)}const ag={get:Il(!1,!1)},lg={get:Il(!1,!0)},cg={get:Il(!0,!1)};const bf=new WeakMap,Rf=new WeakMap,Sf=new WeakMap,ug=new WeakMap;function hg(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fg(t){return t.__v_skip||!Object.isExtensible(t)?0:hg(Lm(t))}function vo(t){return wn(t)?t:Al(t,!1,ng,ag,bf)}function Cf(t){return Al(t,!1,sg,lg,Rf)}function Da(t){return Al(t,!0,rg,cg,Sf)}function Al(t,e,n,r,s){if(!De(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=fg(t);if(i===0)return t;const a=s.get(t);if(a)return a;const l=new Proxy(t,i===2?r:n);return s.set(t,l),l}function dr(t){return wn(t)?dr(t.__v_raw):!!(t&&t.__v_isReactive)}function wn(t){return!!(t&&t.__v_isReadonly)}function Bt(t){return!!(t&&t.__v_isShallow)}function wl(t){return t?!!t.__v_raw:!1}function Se(t){const e=t&&t.__v_raw;return e?Se(e):t}function dg(t){return!Ce(t,"__v_skip")&&Object.isExtensible(t)&&uf(t,"__v_skip",!0),t}const Wt=t=>De(t)?vo(t):t,Hr=t=>De(t)?Da(t):t;function yt(t){return t?t.__v_isRef===!0:!1}function qt(t){return Pf(t,!1)}function pg(t){return Pf(t,!0)}function Pf(t,e){return yt(t)?t:new mg(t,e)}class mg{constructor(e,n){this.dep=new Tl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Se(e),this._value=n?e:Wt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Bt(e)||wn(e);e=r?e:Se(e),Un(e,n)&&(this._rawValue=e,this._value=r?e:Wt(e),this.dep.trigger())}}function Nt(t){return yt(t)?t.value:t}const gg={get:(t,e,n)=>e==="__v_raw"?t:Nt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return yt(s)&&!yt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function Vf(t){return dr(t)?t:new Proxy(t,gg)}class _g{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Tl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$s-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return gf(this,!0),!0}get value(){const e=this.dep.track();return Ef(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function yg(t,e,n=!1){let r,s;return fe(t)?r=t:(r=t.get,s=t.set),new _g(r,s,n)}const Ri={},Hi=new WeakMap;let lr;function Eg(t,e=!1,n=lr){if(n){let r=Hi.get(n);r||Hi.set(n,r=[]),r.push(t)}}function vg(t,e,n=Oe){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,h=G=>s?G:Bt(G)||s===!1||s===0?En(G,1):En(G);let d,p,g,v,V=!1,D=!1;if(yt(t)?(p=()=>t.value,V=Bt(t)):dr(t)?(p=()=>h(t),V=!0):ce(t)?(D=!0,V=t.some(G=>dr(G)||Bt(G)),p=()=>t.map(G=>{if(yt(G))return G.value;if(dr(G))return h(G);if(fe(G))return c?c(G,2):G()})):fe(t)?e?p=c?()=>c(t,2):t:p=()=>{if(g){In();try{g()}finally{An()}}const G=lr;lr=d;try{return c?c(t,3,[v]):t(v)}finally{lr=G}}:p=rn,e&&s){const G=p,de=s===!0?1/0:s;p=()=>En(G(),de)}const R=Wm(),N=()=>{d.stop(),R&&R.active&&dl(R.effects,d)};if(i&&e){const G=e;e=(...de)=>{G(...de),N()}}let O=D?new Array(t.length).fill(Ri):Ri;const q=G=>{if(!(!(d.flags&1)||!d.dirty&&!G))if(e){const de=d.run();if(s||V||(D?de.some((Ee,A)=>Un(Ee,O[A])):Un(de,O))){g&&g();const Ee=lr;lr=d;try{const A=[de,O===Ri?void 0:D&&O[0]===Ri?[]:O,v];O=de,c?c(e,3,A):e(...A)}finally{lr=Ee}}}else d.run()};return l&&l(q),d=new pf(p),d.scheduler=a?()=>a(q,!1):q,v=G=>Eg(G,!1,d),g=d.onStop=()=>{const G=Hi.get(d);if(G){if(c)c(G,4);else for(const de of G)de();Hi.delete(d)}},e?r?q(!0):O=d.run():a?a(q.bind(null,!0),!0):d.run(),N.pause=d.pause.bind(d),N.resume=d.resume.bind(d),N.stop=N,N}function En(t,e=1/0,n){if(e<=0||!De(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,yt(t))En(t.value,e,n);else if(ce(t))for(let r=0;r<t.length;r++)En(t[r],e,n);else if(of(t)||Mr(t))t.forEach(r=>{En(r,e,n)});else if(cf(t)){for(const r in t)En(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&En(t[r],e,n)}return t}function ai(t,e,n,r){try{return r?t(...r):t()}catch(s){To(s,e,n)}}function cn(t,e,n,r){if(fe(t)){const s=ai(t,e,n,r);return s&&af(s)&&s.catch(i=>{To(i,e,n)}),s}if(ce(t)){const s=[];for(let i=0;i<t.length;i++)s.push(cn(t[i],e,n,r));return s}}function To(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Oe;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,c,h)===!1)return}l=l.parent}if(i){In(),ai(i,null,10,[t,c,h]),An();return}}Tg(t,n,s,r,a)}function Tg(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const It=[];let en=-1;const Lr=[];let Ln=null,Cr=0;const Df=Promise.resolve();let qi=null;function xf(t){const e=qi||Df;return t?e.then(this?t.bind(this):t):e}function Ig(t){let e=en+1,n=It.length;for(;e<n;){const r=e+n>>>1,s=It[r],i=qs(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function bl(t){if(!(t.flags&1)){const e=qs(t),n=It[It.length-1];!n||!(t.flags&2)&&e>=qs(n)?It.push(t):It.splice(Ig(e),0,t),t.flags|=1,Nf()}}function Nf(){qi||(qi=Df.then(kf))}function Ag(t){ce(t)?Lr.push(...t):Ln&&t.id===-1?Ln.splice(Cr+1,0,t):t.flags&1||(Lr.push(t),t.flags|=1),Nf()}function ru(t,e,n=en+1){for(;n<It.length;n++){const r=It[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;It.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Of(t){if(Lr.length){const e=[...new Set(Lr)].sort((n,r)=>qs(n)-qs(r));if(Lr.length=0,Ln){Ln.push(...e);return}for(Ln=e,Cr=0;Cr<Ln.length;Cr++){const n=Ln[Cr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ln=null,Cr=0}}const qs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function kf(t){try{for(en=0;en<It.length;en++){const e=It[en];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ai(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;en<It.length;en++){const e=It[en];e&&(e.flags&=-2)}en=-1,It.length=0,Of(),qi=null,(It.length||Lr.length)&&kf()}}let Ot=null,Mf=null;function zi(t){const e=Ot;return Ot=t,Mf=t&&t.type.__scopeId||null,e}function wg(t,e=Ot,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Wi(-1);const i=zi(e);let a;try{a=t(...s)}finally{zi(i),r._d&&Wi(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function bg(t,e){if(Ot===null)return t;const n=bo(Ot),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,l,c=Oe]=e[s];i&&(fe(i)&&(i={mounted:i,updated:i}),i.deep&&En(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return t}function or(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(In(),cn(c,n,8,[t.el,l,t,e]),An())}}function Ni(t,e){if(_t){let n=_t.provides;const r=_t.parent&&_t.parent.provides;r===n&&(n=_t.provides=Object.create(r)),n[t]=e}}function vn(t,e,n=!1){const r=R_();if(r||Fr){let s=Fr?Fr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&fe(e)?e.call(r&&r.proxy):e}}const Rg=Symbol.for("v-scx"),Sg=()=>vn(Rg);function Oi(t,e,n){return Lf(t,e,n)}function Lf(t,e,n=Oe){const{immediate:r,deep:s,flush:i,once:a}=n,l=lt({},n),c=e&&r||!e&&i!=="post";let h;if(Gs){if(i==="sync"){const v=Sg();h=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=rn,v.resume=rn,v.pause=rn,v}}const d=_t;l.call=(v,V,D)=>cn(v,d,V,D);let p=!1;i==="post"?l.scheduler=v=>{Rt(v,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(v,V)=>{V?v():bl(v)}),l.augmentJob=v=>{e&&(v.flags|=4),p&&(v.flags|=2,d&&(v.id=d.uid,v.i=d))};const g=vg(t,e,l);return Gs&&(h?h.push(g):c&&g()),g}function Cg(t,e,n){const r=this.proxy,s=We(t)?t.includes(".")?Ff(r,t):()=>r[t]:t.bind(r,r);let i;fe(e)?i=e:(i=e.handler,n=e);const a=li(this),l=Lf(s,i.bind(r),n);return a(),l}function Ff(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Pg=Symbol("_vte"),Vg=t=>t.__isTeleport,Dg=Symbol("_leaveCb");function Rl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Rl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Bf(t,e){return fe(t)?lt({name:t.name},e,{setup:t}):t}function Uf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function su(t,e){let n;return!!((n=Object.getOwnPropertyDescriptor(t,e))&&!n.configurable)}const Gi=new WeakMap;function xs(t,e,n,r,s=!1){if(ce(t)){t.forEach((D,R)=>xs(D,e&&(ce(e)?e[R]:e),n,r,s));return}if(Ns(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xs(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?bo(r.component):r.el,a=s?null:i,{i:l,r:c}=t,h=e&&e.r,d=l.refs===Oe?l.refs={}:l.refs,p=l.setupState,g=Se(p),v=p===Oe?sf:D=>su(d,D)?!1:Ce(g,D),V=(D,R)=>!(R&&su(d,R));if(h!=null&&h!==c){if(iu(e),We(h))d[h]=null,v(h)&&(p[h]=null);else if(yt(h)){const D=e;V(h,D.k)&&(h.value=null),D.k&&(d[D.k]=null)}}if(fe(c))ai(c,l,12,[a,d]);else{const D=We(c),R=yt(c);if(D||R){const N=()=>{if(t.f){const O=D?v(c)?p[c]:d[c]:V()||!t.k?c.value:d[t.k];if(s)ce(O)&&dl(O,i);else if(ce(O))O.includes(i)||O.push(i);else if(D)d[c]=[i],v(c)&&(p[c]=d[c]);else{const q=[i];V(c,t.k)&&(c.value=q),t.k&&(d[t.k]=q)}}else D?(d[c]=a,v(c)&&(p[c]=a)):R&&(V(c,t.k)&&(c.value=a),t.k&&(d[t.k]=a))};if(a){const O=()=>{N(),Gi.delete(t)};O.id=-1,Gi.set(t,O),Rt(O,n)}else iu(t),N()}}}function iu(t){const e=Gi.get(t);e&&(e.flags|=8,Gi.delete(t))}yo().requestIdleCallback;yo().cancelIdleCallback;const Ns=t=>!!t.type.__asyncLoader,jf=t=>t.type.__isKeepAlive;function xg(t,e){$f(t,"a",e)}function Ng(t,e){$f(t,"da",e)}function $f(t,e,n=_t){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Io(e,r,n),n){let s=n.parent;for(;s&&s.parent;)jf(s.parent.vnode)&&Og(r,e,n,s),s=s.parent}}function Og(t,e,n,r){const s=Io(e,t,r,!0);Sl(()=>{dl(r[e],s)},n)}function Io(t,e,n=_t,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...a)=>{In();const l=li(n),c=cn(e,n,t,a);return l(),An(),c});return r?s.unshift(i):s.push(i),i}}const Cn=t=>(e,n=_t)=>{(!Gs||t==="sp")&&Io(t,(...r)=>e(...r),n)},kg=Cn("bm"),Hf=Cn("m"),Mg=Cn("bu"),Lg=Cn("u"),Fg=Cn("bum"),Sl=Cn("um"),Bg=Cn("sp"),Ug=Cn("rtg"),jg=Cn("rtc");function $g(t,e=_t){Io("ec",t,e)}const Hg="components";function qg(t,e){return Gg(Hg,t,!0,e)||t}const zg=Symbol.for("v-ndc");function Gg(t,e,n=!0,r=!1){const s=Ot||_t;if(s){const i=s.type;{const l=D_(i,!1);if(l&&(l===e||l===Ut(e)||l===_o(Ut(e))))return i}const a=ou(s[t]||i[t],e)||ou(s.appContext[t],e);return!a&&r?i:a}}function ou(t,e){return t&&(t[e]||t[Ut(e)]||t[_o(Ut(e))])}function rt(t,e,n,r){let s;const i=n,a=ce(t);if(a||We(t)){const l=a&&dr(t);let c=!1,h=!1;l&&(c=!Bt(t),h=wn(t),t=Eo(t)),s=new Array(t.length);for(let d=0,p=t.length;d<p;d++)s[d]=e(c?h?Hr(Wt(t[d])):Wt(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,i)}else if(De(t))if(t[Symbol.iterator])s=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);s=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];s[c]=e(t[d],d,c,i)}}else s=[];return s}const xa=t=>t?cd(t)?bo(t):xa(t.parent):null,Os=lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>xa(t.parent),$root:t=>xa(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>zf(t),$forceUpdate:t=>t.f||(t.f=()=>{bl(t.update)}),$nextTick:t=>t.n||(t.n=xf.bind(t.proxy)),$watch:t=>Cg.bind(t)}),aa=(t,e)=>t!==Oe&&!t.__isScriptSetup&&Ce(t,e),Kg={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=t;if(e[0]!=="$"){const g=a[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(aa(r,e))return a[e]=1,r[e];if(s!==Oe&&Ce(s,e))return a[e]=2,s[e];if(Ce(i,e))return a[e]=3,i[e];if(n!==Oe&&Ce(n,e))return a[e]=4,n[e];Na&&(a[e]=0)}}const h=Os[e];let d,p;if(h)return e==="$attrs"&&mt(t.attrs,"get",""),h(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==Oe&&Ce(n,e))return a[e]=4,n[e];if(p=c.config.globalProperties,Ce(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return aa(s,e)?(s[e]=n,!0):r!==Oe&&Ce(r,e)?(r[e]=n,!0):Ce(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:a}},l){let c;return!!(n[l]||t!==Oe&&l[0]!=="$"&&Ce(t,l)||aa(e,l)||Ce(i,l)||Ce(r,l)||Ce(Os,l)||Ce(s.config.globalProperties,l)||(c=a.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ce(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function au(t){return ce(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Na=!0;function Wg(t){const e=zf(t),n=t.proxy,r=t.ctx;Na=!1,e.beforeCreate&&lu(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:v,updated:V,activated:D,deactivated:R,beforeDestroy:N,beforeUnmount:O,destroyed:q,unmounted:G,render:de,renderTracked:Ee,renderTriggered:A,errorCaptured:y,serverPrefetch:I,expose:b,inheritAttrs:w,components:C,directives:E,filters:He}=e;if(h&&Qg(h,r,null),a)for(const be in a){const ve=a[be];fe(ve)&&(r[be]=ve.bind(n))}if(s){const be=s.call(n,n);De(be)&&(t.data=vo(be))}if(Na=!0,i)for(const be in i){const ve=i[be],bt=fe(ve)?ve.bind(n,n):fe(ve.get)?ve.get.bind(n,n):rn,Jt=!fe(ve)&&fe(ve.set)?ve.set.bind(n):rn,Pt=Ge({get:bt,set:Jt});Object.defineProperty(r,be,{enumerable:!0,configurable:!0,get:()=>Pt.value,set:st=>Pt.value=st})}if(l)for(const be in l)qf(l[be],r,n,be);if(c){const be=fe(c)?c.call(n):c;Reflect.ownKeys(be).forEach(ve=>{Ni(ve,be[ve])})}d&&lu(d,t,"c");function qe(be,ve){ce(ve)?ve.forEach(bt=>be(bt.bind(n))):ve&&be(ve.bind(n))}if(qe(kg,p),qe(Hf,g),qe(Mg,v),qe(Lg,V),qe(xg,D),qe(Ng,R),qe($g,y),qe(jg,Ee),qe(Ug,A),qe(Fg,O),qe(Sl,G),qe(Bg,I),ce(b))if(b.length){const be=t.exposed||(t.exposed={});b.forEach(ve=>{Object.defineProperty(be,ve,{get:()=>n[ve],set:bt=>n[ve]=bt,enumerable:!0})})}else t.exposed||(t.exposed={});de&&t.render===rn&&(t.render=de),w!=null&&(t.inheritAttrs=w),C&&(t.components=C),E&&(t.directives=E),I&&Uf(t)}function Qg(t,e,n=rn){ce(t)&&(t=Oa(t));for(const r in t){const s=t[r];let i;De(s)?"default"in s?i=vn(s.from||r,s.default,!0):i=vn(s.from||r):i=vn(s),yt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i}}function lu(t,e,n){cn(ce(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function qf(t,e,n,r){let s=r.includes(".")?Ff(n,r):()=>n[r];if(We(t)){const i=e[t];fe(i)&&Oi(s,i)}else if(fe(t))Oi(s,t.bind(n));else if(De(t))if(ce(t))t.forEach(i=>qf(i,e,n,r));else{const i=fe(t.handler)?t.handler.bind(n):e[t.handler];fe(i)&&Oi(s,i,t)}}function zf(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,l=i.get(e);let c;return l?c=l:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(h=>Ki(c,h,a,!0)),Ki(c,e,a)),De(e)&&i.set(e,c),c}function Ki(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Ki(t,i,n,!0),s&&s.forEach(a=>Ki(t,a,n,!0));for(const a in e)if(!(r&&a==="expose")){const l=Jg[a]||n&&n[a];t[a]=l?l(t[a],e[a]):e[a]}return t}const Jg={data:cu,props:uu,emits:uu,methods:Is,computed:Is,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:Is,directives:Is,watch:Xg,provide:cu,inject:Yg};function cu(t,e){return e?t?function(){return lt(fe(t)?t.call(this,this):t,fe(e)?e.call(this,this):e)}:e:t}function Yg(t,e){return Is(Oa(t),Oa(e))}function Oa(t){if(ce(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function vt(t,e){return t?[...new Set([].concat(t,e))]:e}function Is(t,e){return t?lt(Object.create(null),t,e):e}function uu(t,e){return t?ce(t)&&ce(e)?[...new Set([...t,...e])]:lt(Object.create(null),au(t),au(e??{})):e}function Xg(t,e){if(!t)return e;if(!e)return t;const n=lt(Object.create(null),t);for(const r in e)n[r]=vt(t[r],e[r]);return n}function Gf(){return{app:null,config:{isNativeTag:sf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zg=0;function e_(t,e){return function(r,s=null){fe(r)||(r=lt({},r)),s!=null&&!De(s)&&(s=null);const i=Gf(),a=new WeakSet,l=[];let c=!1;const h=i.app={_uid:Zg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:N_,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&fe(d.install)?(a.add(d),d.install(h,...p)):fe(d)&&(a.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,g){if(!c){const v=h._ceVNode||At(r,s);return v.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(v,d,g),c=!0,h._container=d,d.__vue_app__=h,bo(v.component)}},onUnmount(d){l.push(d)},unmount(){c&&(cn(l,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=Fr;Fr=h;try{return d()}finally{Fr=p}}};return h}}let Fr=null;const t_=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ut(e)}Modifiers`]||t[`${Zn(e)}Modifiers`];function n_(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Oe;let s=n;const i=e.startsWith("update:"),a=i&&t_(r,e.slice(7));a&&(a.trim&&(s=n.map(d=>We(d)?d.trim():d)),a.number&&(s=n.map(ml)));let l,c=r[l=na(e)]||r[l=na(Ut(e))];!c&&i&&(c=r[l=na(Zn(e))]),c&&cn(c,t,6,s);const h=r[l+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,cn(h,t,6,s)}}const r_=new WeakMap;function Kf(t,e,n=!1){const r=n?r_:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let a={},l=!1;if(!fe(t)){const c=h=>{const d=Kf(h,e,!0);d&&(l=!0,lt(a,d))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(De(t)&&r.set(t,null),null):(ce(i)?i.forEach(c=>a[c]=null):lt(a,i),De(t)&&r.set(t,a),a)}function Ao(t,e){return!t||!mo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ce(t,e[0].toLowerCase()+e.slice(1))||Ce(t,Zn(e))||Ce(t,e))}function hu(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:h,renderCache:d,props:p,data:g,setupState:v,ctx:V,inheritAttrs:D}=t,R=zi(t);let N,O;try{if(n.shapeFlag&4){const G=s||r,de=G;N=nn(h.call(de,G,d,p,v,g,V)),O=l}else{const G=e;N=nn(G.length>1?G(p,{attrs:l,slots:a,emit:c}):G(p,null)),O=e.props?l:s_(l)}}catch(G){ks.length=0,To(G,t,1),N=At(Gn)}let q=N;if(O&&D!==!1){const G=Object.keys(O),{shapeFlag:de}=q;G.length&&de&7&&(i&&G.some(fl)&&(O=i_(O,i)),q=qr(q,O,!1,!0))}return n.dirs&&(q=qr(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(n.dirs):n.dirs),n.transition&&Rl(q,n.transition),N=q,zi(R),N}const s_=t=>{let e;for(const n in t)(n==="class"||n==="style"||mo(n))&&((e||(e={}))[n]=t[n]);return e},i_=(t,e)=>{const n={};for(const r in t)(!fl(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function o_(t,e,n){const{props:r,children:s,component:i}=t,{props:a,children:l,patchFlag:c}=e,h=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?fu(r,a,h):!!a;if(c&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(Wf(a,r,g)&&!Ao(h,g))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?fu(r,a,h):!0:!!a;return!1}function fu(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(Wf(e,t,i)&&!Ao(n,i))return!0}return!1}function Wf(t,e,n){const r=t[n],s=e[n];return n==="style"&&De(r)&&De(s)?!_l(r,s):r!==s}function a_({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Qf={},Jf=()=>Object.create(Qf),Yf=t=>Object.getPrototypeOf(t)===Qf;function l_(t,e,n,r=!1){const s={},i=Jf();t.propsDefaults=Object.create(null),Xf(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);n?t.props=r?s:Cf(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function c_(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,l=Se(s),[c]=t.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(Ao(t.emitsOptions,g))continue;const v=e[g];if(c)if(Ce(i,g))v!==i[g]&&(i[g]=v,h=!0);else{const V=Ut(g);s[V]=ka(c,l,V,v,t,!1)}else v!==i[g]&&(i[g]=v,h=!0)}}}else{Xf(t,e,s,i)&&(h=!0);let d;for(const p in l)(!e||!Ce(e,p)&&((d=Zn(p))===p||!Ce(e,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=ka(c,l,p,void 0,t,!0)):delete s[p]);if(i!==l)for(const p in i)(!e||!Ce(e,p))&&(delete i[p],h=!0)}h&&yn(t.attrs,"set","")}function Xf(t,e,n,r){const[s,i]=t.propsOptions;let a=!1,l;if(e)for(let c in e){if(Ps(c))continue;const h=e[c];let d;s&&Ce(s,d=Ut(c))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:Ao(t.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,a=!0)}if(i){const c=Se(n),h=l||Oe;for(let d=0;d<i.length;d++){const p=i[d];n[p]=ka(s,c,p,h[p],t,!Ce(h,p))}}return a}function ka(t,e,n,r,s,i){const a=t[n];if(a!=null){const l=Ce(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&fe(c)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const d=li(s);r=h[n]=c.call(null,e),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Zn(n))&&(r=!0))}return r}const u_=new WeakMap;function Zf(t,e,n=!1){const r=n?u_:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,a={},l=[];let c=!1;if(!fe(t)){const d=p=>{c=!0;const[g,v]=Zf(p,e,!0);lt(a,g),v&&l.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!c)return De(t)&&r.set(t,kr),kr;if(ce(i))for(let d=0;d<i.length;d++){const p=Ut(i[d]);du(p)&&(a[p]=Oe)}else if(i)for(const d in i){const p=Ut(d);if(du(p)){const g=i[d],v=a[p]=ce(g)||fe(g)?{type:g}:lt({},g),V=v.type;let D=!1,R=!0;if(ce(V))for(let N=0;N<V.length;++N){const O=V[N],q=fe(O)&&O.name;if(q==="Boolean"){D=!0;break}else q==="String"&&(R=!1)}else D=fe(V)&&V.name==="Boolean";v[0]=D,v[1]=R,(D||Ce(v,"default"))&&l.push(p)}}const h=[a,l];return De(t)&&r.set(t,h),h}function du(t){return t[0]!=="$"&&!Ps(t)}const Cl=t=>t==="_"||t==="_ctx"||t==="$stable",Pl=t=>ce(t)?t.map(nn):[nn(t)],h_=(t,e,n)=>{if(e._n)return e;const r=wg((...s)=>Pl(e(...s)),n);return r._c=!1,r},ed=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Cl(s))continue;const i=t[s];if(fe(i))e[s]=h_(s,i,r);else if(i!=null){const a=Pl(i);e[s]=()=>a}}},td=(t,e)=>{const n=Pl(e);t.slots.default=()=>n},nd=(t,e,n)=>{for(const r in e)(n||!Cl(r))&&(t[r]=e[r])},f_=(t,e,n)=>{const r=t.slots=Jf();if(t.vnode.shapeFlag&32){const s=e._;s?(nd(r,e,n),n&&uf(r,"_",s,!0)):ed(e,r)}else e&&td(t,e)},d_=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,a=Oe;if(r.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:nd(s,e,n):(i=!e.$stable,ed(e,s)),a=e}else e&&(td(t,e),a={default:1});if(i)for(const l in s)!Cl(l)&&a[l]==null&&delete s[l]},Rt=y_;function p_(t){return m_(t)}function m_(t,e){const n=yo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:v=rn,insertStaticContent:V}=t,D=(_,T,S,k=null,B=null,M=null,Q=void 0,H=null,$=!!T.dynamicChildren)=>{if(_===T)return;_&&!Es(_,T)&&(k=L(_),st(_,B,M,!0),_=null),T.patchFlag===-2&&($=!1,T.dynamicChildren=null);const{type:U,ref:ie,shapeFlag:X}=T;switch(U){case wo:R(_,T,S,k);break;case Gn:N(_,T,S,k);break;case ca:_==null&&O(T,S,k,Q);break;case we:C(_,T,S,k,B,M,Q,H,$);break;default:X&1?de(_,T,S,k,B,M,Q,H,$):X&6?E(_,T,S,k,B,M,Q,H,$):(X&64||X&128)&&U.process(_,T,S,k,B,M,Q,H,$,re)}ie!=null&&B?xs(ie,_&&_.ref,M,T||_,!T):ie==null&&_&&_.ref!=null&&xs(_.ref,null,M,_,!0)},R=(_,T,S,k)=>{if(_==null)r(T.el=l(T.children),S,k);else{const B=T.el=_.el;T.children!==_.children&&h(B,T.children)}},N=(_,T,S,k)=>{_==null?r(T.el=c(T.children||""),S,k):T.el=_.el},O=(_,T,S,k)=>{[_.el,_.anchor]=V(_.children,T,S,k,_.el,_.anchor)},q=({el:_,anchor:T},S,k)=>{let B;for(;_&&_!==T;)B=g(_),r(_,S,k),_=B;r(T,S,k)},G=({el:_,anchor:T})=>{let S;for(;_&&_!==T;)S=g(_),s(_),_=S;s(T)},de=(_,T,S,k,B,M,Q,H,$)=>{if(T.type==="svg"?Q="svg":T.type==="math"&&(Q="mathml"),_==null)Ee(T,S,k,B,M,Q,H,$);else{const U=_.el&&_.el._isVueCE?_.el:null;try{U&&U._beginPatch(),I(_,T,B,M,Q,H,$)}finally{U&&U._endPatch()}}},Ee=(_,T,S,k,B,M,Q,H)=>{let $,U;const{props:ie,shapeFlag:X,transition:se,dirs:ae}=_;if($=_.el=a(_.type,M,ie&&ie.is,ie),X&8?d($,_.children):X&16&&y(_.children,$,null,k,B,la(_,M),Q,H),ae&&or(_,null,k,"created"),A($,_,_.scopeId,Q,k),ie){for(const Ve in ie)Ve!=="value"&&!Ps(Ve)&&i($,Ve,null,ie[Ve],M,k);"value"in ie&&i($,"value",null,ie.value,M),(U=ie.onVnodeBeforeMount)&&Zt(U,k,_)}ae&&or(_,null,k,"beforeMount");const me=g_(B,se);me&&se.beforeEnter($),r($,T,S),((U=ie&&ie.onVnodeMounted)||me||ae)&&Rt(()=>{U&&Zt(U,k,_),me&&se.enter($),ae&&or(_,null,k,"mounted")},B)},A=(_,T,S,k,B)=>{if(S&&v(_,S),k)for(let M=0;M<k.length;M++)v(_,k[M]);if(B){let M=B.subTree;if(T===M||od(M.type)&&(M.ssContent===T||M.ssFallback===T)){const Q=B.vnode;A(_,Q,Q.scopeId,Q.slotScopeIds,B.parent)}}},y=(_,T,S,k,B,M,Q,H,$=0)=>{for(let U=$;U<_.length;U++){const ie=_[U]=H?_n(_[U]):nn(_[U]);D(null,ie,T,S,k,B,M,Q,H)}},I=(_,T,S,k,B,M,Q)=>{const H=T.el=_.el;let{patchFlag:$,dynamicChildren:U,dirs:ie}=T;$|=_.patchFlag&16;const X=_.props||Oe,se=T.props||Oe;let ae;if(S&&ar(S,!1),(ae=se.onVnodeBeforeUpdate)&&Zt(ae,S,T,_),ie&&or(T,_,S,"beforeUpdate"),S&&ar(S,!0),(X.innerHTML&&se.innerHTML==null||X.textContent&&se.textContent==null)&&d(H,""),U?b(_.dynamicChildren,U,H,S,k,la(T,B),M):Q||ve(_,T,H,null,S,k,la(T,B),M,!1),$>0){if($&16)w(H,X,se,S,B);else if($&2&&X.class!==se.class&&i(H,"class",null,se.class,B),$&4&&i(H,"style",X.style,se.style,B),$&8){const me=T.dynamicProps;for(let Ve=0;Ve<me.length;Ve++){const Ae=me[Ve],ht=X[Ae],ft=se[Ae];(ft!==ht||Ae==="value")&&i(H,Ae,ht,ft,B,S)}}$&1&&_.children!==T.children&&d(H,T.children)}else!Q&&U==null&&w(H,X,se,S,B);((ae=se.onVnodeUpdated)||ie)&&Rt(()=>{ae&&Zt(ae,S,T,_),ie&&or(T,_,S,"updated")},k)},b=(_,T,S,k,B,M,Q)=>{for(let H=0;H<T.length;H++){const $=_[H],U=T[H],ie=$.el&&($.type===we||!Es($,U)||$.shapeFlag&198)?p($.el):S;D($,U,ie,null,k,B,M,Q,!0)}},w=(_,T,S,k,B)=>{if(T!==S){if(T!==Oe)for(const M in T)!Ps(M)&&!(M in S)&&i(_,M,T[M],null,B,k);for(const M in S){if(Ps(M))continue;const Q=S[M],H=T[M];Q!==H&&M!=="value"&&i(_,M,H,Q,B,k)}"value"in S&&i(_,"value",T.value,S.value,B)}},C=(_,T,S,k,B,M,Q,H,$)=>{const U=T.el=_?_.el:l(""),ie=T.anchor=_?_.anchor:l("");let{patchFlag:X,dynamicChildren:se,slotScopeIds:ae}=T;ae&&(H=H?H.concat(ae):ae),_==null?(r(U,S,k),r(ie,S,k),y(T.children||[],S,ie,B,M,Q,H,$)):X>0&&X&64&&se&&_.dynamicChildren&&_.dynamicChildren.length===se.length?(b(_.dynamicChildren,se,S,B,M,Q,H),(T.key!=null||B&&T===B.subTree)&&rd(_,T,!0)):ve(_,T,S,ie,B,M,Q,H,$)},E=(_,T,S,k,B,M,Q,H,$)=>{T.slotScopeIds=H,_==null?T.shapeFlag&512?B.ctx.activate(T,S,k,Q,$):He(T,S,k,B,M,Q,$):wt(_,T,$)},He=(_,T,S,k,B,M,Q)=>{const H=_.component=b_(_,k,B);if(jf(_)&&(H.ctx.renderer=re),S_(H,!1,Q),H.asyncDep){if(B&&B.registerDep(H,qe,Q),!_.el){const $=H.subTree=At(Gn);N(null,$,T,S),_.placeholder=$.el}}else qe(H,_,T,S,B,M,Q)},wt=(_,T,S)=>{const k=T.component=_.component;if(o_(_,T,S))if(k.asyncDep&&!k.asyncResolved){be(k,T,S);return}else k.next=T,k.update();else T.el=_.el,k.vnode=T},qe=(_,T,S,k,B,M,Q)=>{const H=()=>{if(_.isMounted){let{next:X,bu:se,u:ae,parent:me,vnode:Ve}=_;{const Dt=sd(_);if(Dt){X&&(X.el=Ve.el,be(_,X,Q)),Dt.asyncDep.then(()=>{Rt(()=>{_.isUnmounted||U()},B)});return}}let Ae=X,ht;ar(_,!1),X?(X.el=Ve.el,be(_,X,Q)):X=Ve,se&&xi(se),(ht=X.props&&X.props.onVnodeBeforeUpdate)&&Zt(ht,me,X,Ve),ar(_,!0);const ft=hu(_),Vt=_.subTree;_.subTree=ft,D(Vt,ft,p(Vt.el),L(Vt),_,B,M),X.el=ft.el,Ae===null&&a_(_,ft.el),ae&&Rt(ae,B),(ht=X.props&&X.props.onVnodeUpdated)&&Rt(()=>Zt(ht,me,X,Ve),B)}else{let X;const{el:se,props:ae}=T,{bm:me,m:Ve,parent:Ae,root:ht,type:ft}=_,Vt=Ns(T);ar(_,!1),me&&xi(me),!Vt&&(X=ae&&ae.onVnodeBeforeMount)&&Zt(X,Ae,T),ar(_,!0);{ht.ce&&ht.ce._hasShadowRoot()&&ht.ce._injectChildStyle(ft);const Dt=_.subTree=hu(_);D(null,Dt,S,k,_,B,M),T.el=Dt.el}if(Ve&&Rt(Ve,B),!Vt&&(X=ae&&ae.onVnodeMounted)){const Dt=T;Rt(()=>Zt(X,Ae,Dt),B)}(T.shapeFlag&256||Ae&&Ns(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&_.a&&Rt(_.a,B),_.isMounted=!0,T=S=k=null}};_.scope.on();const $=_.effect=new pf(H);_.scope.off();const U=_.update=$.run.bind($),ie=_.job=$.runIfDirty.bind($);ie.i=_,ie.id=_.uid,$.scheduler=()=>bl(ie),ar(_,!0),U()},be=(_,T,S)=>{T.component=_;const k=_.vnode.props;_.vnode=T,_.next=null,c_(_,T.props,k,S),d_(_,T.children,S),In(),ru(_),An()},ve=(_,T,S,k,B,M,Q,H,$=!1)=>{const U=_&&_.children,ie=_?_.shapeFlag:0,X=T.children,{patchFlag:se,shapeFlag:ae}=T;if(se>0){if(se&128){Jt(U,X,S,k,B,M,Q,H,$);return}else if(se&256){bt(U,X,S,k,B,M,Q,H,$);return}}ae&8?(ie&16&&ut(U,B,M),X!==U&&d(S,X)):ie&16?ae&16?Jt(U,X,S,k,B,M,Q,H,$):ut(U,B,M,!0):(ie&8&&d(S,""),ae&16&&y(X,S,k,B,M,Q,H,$))},bt=(_,T,S,k,B,M,Q,H,$)=>{_=_||kr,T=T||kr;const U=_.length,ie=T.length,X=Math.min(U,ie);let se;for(se=0;se<X;se++){const ae=T[se]=$?_n(T[se]):nn(T[se]);D(_[se],ae,S,null,B,M,Q,H,$)}U>ie?ut(_,B,M,!0,!1,X):y(T,S,k,B,M,Q,H,$,X)},Jt=(_,T,S,k,B,M,Q,H,$)=>{let U=0;const ie=T.length;let X=_.length-1,se=ie-1;for(;U<=X&&U<=se;){const ae=_[U],me=T[U]=$?_n(T[U]):nn(T[U]);if(Es(ae,me))D(ae,me,S,null,B,M,Q,H,$);else break;U++}for(;U<=X&&U<=se;){const ae=_[X],me=T[se]=$?_n(T[se]):nn(T[se]);if(Es(ae,me))D(ae,me,S,null,B,M,Q,H,$);else break;X--,se--}if(U>X){if(U<=se){const ae=se+1,me=ae<ie?T[ae].el:k;for(;U<=se;)D(null,T[U]=$?_n(T[U]):nn(T[U]),S,me,B,M,Q,H,$),U++}}else if(U>se)for(;U<=X;)st(_[U],B,M,!0),U++;else{const ae=U,me=U,Ve=new Map;for(U=me;U<=se;U++){const it=T[U]=$?_n(T[U]):nn(T[U]);it.key!=null&&Ve.set(it.key,U)}let Ae,ht=0;const ft=se-me+1;let Vt=!1,Dt=0;const Ht=new Array(ft);for(U=0;U<ft;U++)Ht[U]=0;for(U=ae;U<=X;U++){const it=_[U];if(ht>=ft){st(it,B,M,!0);continue}let et;if(it.key!=null)et=Ve.get(it.key);else for(Ae=me;Ae<=se;Ae++)if(Ht[Ae-me]===0&&Es(it,T[Ae])){et=Ae;break}et===void 0?st(it,B,M,!0):(Ht[et-me]=U+1,et>=Dt?Dt=et:Vt=!0,D(it,T[et],S,null,B,M,Q,H,$),ht++)}const Ar=Vt?__(Ht):kr;for(Ae=Ar.length-1,U=ft-1;U>=0;U--){const it=me+U,et=T[it],rs=T[it+1],tr=it+1<ie?rs.el||id(rs):k;Ht[U]===0?D(null,et,S,tr,B,M,Q,H,$):Vt&&(Ae<0||U!==Ar[Ae]?Pt(et,S,tr,2):Ae--)}}},Pt=(_,T,S,k,B=null)=>{const{el:M,type:Q,transition:H,children:$,shapeFlag:U}=_;if(U&6){Pt(_.component.subTree,T,S,k);return}if(U&128){_.suspense.move(T,S,k);return}if(U&64){Q.move(_,T,S,re);return}if(Q===we){r(M,T,S);for(let X=0;X<$.length;X++)Pt($[X],T,S,k);r(_.anchor,T,S);return}if(Q===ca){q(_,T,S);return}if(k!==2&&U&1&&H)if(k===0)H.beforeEnter(M),r(M,T,S),Rt(()=>H.enter(M),B);else{const{leave:X,delayLeave:se,afterLeave:ae}=H,me=()=>{_.ctx.isUnmounted?s(M):r(M,T,S)},Ve=()=>{M._isLeaving&&M[Dg](!0),X(M,()=>{me(),ae&&ae()})};se?se(M,me,Ve):Ve()}else r(M,T,S)},st=(_,T,S,k=!1,B=!1)=>{const{type:M,props:Q,ref:H,children:$,dynamicChildren:U,shapeFlag:ie,patchFlag:X,dirs:se,cacheIndex:ae}=_;if(X===-2&&(B=!1),H!=null&&(In(),xs(H,null,S,_,!0),An()),ae!=null&&(T.renderCache[ae]=void 0),ie&256){T.ctx.deactivate(_);return}const me=ie&1&&se,Ve=!Ns(_);let Ae;if(Ve&&(Ae=Q&&Q.onVnodeBeforeUnmount)&&Zt(Ae,T,_),ie&6)$t(_.component,S,k);else{if(ie&128){_.suspense.unmount(S,k);return}me&&or(_,null,T,"beforeUnmount"),ie&64?_.type.remove(_,T,S,re,k):U&&!U.hasOnce&&(M!==we||X>0&&X&64)?ut(U,T,S,!1,!0):(M===we&&X&384||!B&&ie&16)&&ut($,T,S),k&&fn(_)}(Ve&&(Ae=Q&&Q.onVnodeUnmounted)||me)&&Rt(()=>{Ae&&Zt(Ae,T,_),me&&or(_,null,T,"unmounted")},S)},fn=_=>{const{type:T,el:S,anchor:k,transition:B}=_;if(T===we){jt(S,k);return}if(T===ca){G(_);return}const M=()=>{s(S),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(_.shapeFlag&1&&B&&!B.persisted){const{leave:Q,delayLeave:H}=B,$=()=>Q(S,M);H?H(_.el,M,$):$()}else M()},jt=(_,T)=>{let S;for(;_!==T;)S=g(_),s(_),_=S;s(T)},$t=(_,T,S)=>{const{bum:k,scope:B,job:M,subTree:Q,um:H,m:$,a:U}=_;pu($),pu(U),k&&xi(k),B.stop(),M&&(M.flags|=8,st(Q,_,T,S)),H&&Rt(H,T),Rt(()=>{_.isUnmounted=!0},T)},ut=(_,T,S,k=!1,B=!1,M=0)=>{for(let Q=M;Q<_.length;Q++)st(_[Q],T,S,k,B)},L=_=>{if(_.shapeFlag&6)return L(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const T=g(_.anchor||_.el),S=T&&T[Pg];return S?g(S):T};let Z=!1;const J=(_,T,S)=>{let k;_==null?T._vnode&&(st(T._vnode,null,null,!0),k=T._vnode.component):D(T._vnode||null,_,T,null,null,null,S),T._vnode=_,Z||(Z=!0,ru(k),Of(),Z=!1)},re={p:D,um:st,m:Pt,r:fn,mt:He,mc:y,pc:ve,pbc:b,n:L,o:t};return{render:J,hydrate:void 0,createApp:e_(J)}}function la({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ar({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function g_(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function rd(t,e,n=!1){const r=t.children,s=e.children;if(ce(r)&&ce(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=_n(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&rd(a,l)),l.type===wo&&(l.patchFlag===-1&&(l=s[i]=_n(l)),l.el=a.el),l.type===Gn&&!l.el&&(l.el=a.el)}}function __(t){const e=t.slice(),n=[0];let r,s,i,a,l;const c=t.length;for(r=0;r<c;r++){const h=t[r];if(h!==0){if(s=n[n.length-1],t[s]<h){e[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,t[n[l]]<h?i=l+1:a=l;h<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=e[a];return n}function sd(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:sd(e)}function pu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function id(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?id(e.subTree):null}const od=t=>t.__isSuspense;function y_(t,e){e&&e.pendingBranch?ce(t)?e.effects.push(...t):e.effects.push(t):Ag(t)}const we=Symbol.for("v-fgt"),wo=Symbol.for("v-txt"),Gn=Symbol.for("v-cmt"),ca=Symbol.for("v-stc"),ks=[];let kt=null;function z(t=!1){ks.push(kt=t?null:[])}function E_(){ks.pop(),kt=ks[ks.length-1]||null}let zs=1;function Wi(t,e=!1){zs+=t,t<0&&kt&&e&&(kt.hasOnce=!0)}function ad(t){return t.dynamicChildren=zs>0?kt||kr:null,E_(),zs>0&&kt&&kt.push(t),t}function Y(t,e,n,r,s,i){return ad(W(t,e,n,r,s,i,!0))}function Mt(t,e,n,r,s){return ad(At(t,e,n,r,s,!0))}function Qi(t){return t?t.__v_isVNode===!0:!1}function Es(t,e){return t.type===e.type&&t.key===e.key}const ld=({key:t})=>t??null,ki=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?We(t)||yt(t)||fe(t)?{i:Ot,r:t,k:e,f:!!n}:t:null);function W(t,e=null,n=null,r=0,s=null,i=t===we?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ld(e),ref:e&&ki(e),scopeId:Mf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ot};return l?(Vl(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=We(n)?8:16),zs>0&&!a&&kt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&kt.push(c),c}const At=v_;function v_(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===zg)&&(t=Gn),Qi(t)){const l=qr(t,e,!0);return n&&Vl(l,n),zs>0&&!i&&kt&&(l.shapeFlag&6?kt[kt.indexOf(t)]=l:kt.push(l)),l.patchFlag=-2,l}if(x_(t)&&(t=t.__vccOpts),e){e=T_(e);let{class:l,style:c}=e;l&&!We(l)&&(e.class=oi(l)),De(c)&&(wl(c)&&!ce(c)&&(c=lt({},c)),e.style=gl(c))}const a=We(t)?1:od(t)?128:Vg(t)?64:De(t)?4:fe(t)?2:0;return W(t,e,n,r,s,a,i,!0)}function T_(t){return t?wl(t)||Yf(t)?lt({},t):t:null}function qr(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=t,h=e?I_(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&ld(h),ref:e&&e.ref?n&&i?ce(i)?i.concat(ki(e)):[i,ki(e)]:ki(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==we?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&qr(t.ssContent),ssFallback:t.ssFallback&&qr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Rl(d,c.clone(d)),d}function mr(t=" ",e=0){return At(wo,null,t,e)}function xe(t="",e=!1){return e?(z(),Mt(Gn,null,t)):At(Gn,null,t)}function nn(t){return t==null||typeof t=="boolean"?At(Gn):ce(t)?At(we,null,t.slice()):Qi(t)?_n(t):At(wo,null,String(t))}function _n(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:qr(t)}function Vl(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ce(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Vl(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Yf(e)?e._ctx=Ot:s===3&&Ot&&(Ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else fe(e)?(e={default:e,_ctx:Ot},n=32):(e=String(e),r&64?(n=16,e=[mr(e)]):n=8);t.children=e,t.shapeFlag|=n}function I_(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=oi([e.class,r.class]));else if(s==="style")e.style=gl([e.style,r.style]);else if(mo(s)){const i=e[s],a=r[s];a&&i!==a&&!(ce(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=r[s])}return e}function Zt(t,e,n,r=null){cn(t,e,7,[n,r])}const A_=Gf();let w_=0;function b_(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||A_,i={uid:w_++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Km(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zf(r,s),emitsOptions:Kf(r,s),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:r.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=n_.bind(null,i),t.ce&&t.ce(i),i}let _t=null;const R_=()=>_t||Ot;let Ji,Ma;{const t=yo(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Ji=e("__VUE_INSTANCE_SETTERS__",n=>_t=n),Ma=e("__VUE_SSR_SETTERS__",n=>Gs=n)}const li=t=>{const e=_t;return Ji(t),t.scope.on(),()=>{t.scope.off(),Ji(e)}},mu=()=>{_t&&_t.scope.off(),Ji(null)};function cd(t){return t.vnode.shapeFlag&4}let Gs=!1;function S_(t,e=!1,n=!1){e&&Ma(e);const{props:r,children:s}=t.vnode,i=cd(t);l_(t,r,i,e),f_(t,s,n||e);const a=i?C_(t,e):void 0;return e&&Ma(!1),a}function C_(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Kg);const{setup:r}=n;if(r){In();const s=t.setupContext=r.length>1?V_(t):null,i=li(t),a=ai(r,t,0,[t.props,s]),l=af(a);if(An(),i(),(l||t.sp)&&!Ns(t)&&Uf(t),l){if(a.then(mu,mu),e)return a.then(c=>{gu(t,c)}).catch(c=>{To(c,t,0)});t.asyncDep=a}else gu(t,a)}else ud(t)}function gu(t,e,n){fe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:De(e)&&(t.setupState=Vf(e)),ud(t)}function ud(t,e,n){const r=t.type;t.render||(t.render=r.render||rn);{const s=li(t);In();try{Wg(t)}finally{An(),s()}}}const P_={get(t,e){return mt(t,"get",""),t[e]}};function V_(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,P_),slots:t.slots,emit:t.emit,expose:e}}function bo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Vf(dg(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Os)return Os[n](t)},has(e,n){return n in e||n in Os}})):t.proxy}function D_(t,e=!0){return fe(t)?t.displayName||t.name:t.name||e&&t.__name}function x_(t){return fe(t)&&"__vccOpts"in t}const Ge=(t,e)=>yg(t,e,Gs);function hd(t,e,n){try{Wi(-1);const r=arguments.length;return r===2?De(e)&&!ce(e)?Qi(e)?At(t,null,[e]):At(t,e):At(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Qi(n)&&(n=[n]),At(t,e,n))}finally{Wi(1)}}const N_="3.5.28";let La;const _u=typeof window<"u"&&window.trustedTypes;if(_u)try{La=_u.createPolicy("vue",{createHTML:t=>t})}catch{}const fd=La?t=>La.createHTML(t):t=>t,O_="http://www.w3.org/2000/svg",k_="http://www.w3.org/1998/Math/MathML",gn=typeof document<"u"?document:null,yu=gn&&gn.createElement("template"),M_={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?gn.createElementNS(O_,t):e==="mathml"?gn.createElementNS(k_,t):n?gn.createElement(t,{is:n}):gn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>gn.createTextNode(t),createComment:t=>gn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>gn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const a=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{yu.innerHTML=fd(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=yu.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},L_=Symbol("_vtc");function F_(t,e,n){const r=t[L_];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Eu=Symbol("_vod"),B_=Symbol("_vsh"),U_=Symbol(""),j_=/(?:^|;)\s*display\s*:/;function $_(t,e,n){const r=t.style,s=We(n);let i=!1;if(n&&!s){if(e)if(We(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Mi(r,l,"")}else for(const a in e)n[a]==null&&Mi(r,a,"");for(const a in n)a==="display"&&(i=!0),Mi(r,a,n[a])}else if(s){if(e!==n){const a=r[U_];a&&(n+=";"+a),r.cssText=n,i=j_.test(n)}}else e&&t.removeAttribute("style");Eu in t&&(t[Eu]=i?r.display:"",t[B_]&&(r.display="none"))}const vu=/\s*!important$/;function Mi(t,e,n){if(ce(n))n.forEach(r=>Mi(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=H_(t,e);vu.test(n)?t.setProperty(Zn(r),n.replace(vu,""),"important"):t[r]=n}}const Tu=["Webkit","Moz","ms"],ua={};function H_(t,e){const n=ua[e];if(n)return n;let r=Ut(e);if(r!=="filter"&&r in t)return ua[e]=r;r=_o(r);for(let s=0;s<Tu.length;s++){const i=Tu[s]+r;if(i in t)return ua[e]=i}return e}const Iu="http://www.w3.org/1999/xlink";function Au(t,e,n,r,s,i=zm(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Iu,e.slice(6,e.length)):t.setAttributeNS(Iu,e,n):n==null||i&&!hf(n)?t.removeAttribute(e):t.setAttribute(e,i?"":ln(n)?String(n):n)}function wu(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?fd(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=hf(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(s||e)}function Pr(t,e,n,r){t.addEventListener(e,n,r)}function q_(t,e,n,r){t.removeEventListener(e,n,r)}const bu=Symbol("_vei");function z_(t,e,n,r,s=null){const i=t[bu]||(t[bu]={}),a=i[e];if(r&&a)a.value=r;else{const[l,c]=G_(e);if(r){const h=i[e]=Q_(r,s);Pr(t,l,h,c)}else a&&(q_(t,l,a,c),i[e]=void 0)}}const Ru=/(?:Once|Passive|Capture)$/;function G_(t){let e;if(Ru.test(t)){e={};let r;for(;r=t.match(Ru);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Zn(t.slice(2)),e]}let ha=0;const K_=Promise.resolve(),W_=()=>ha||(K_.then(()=>ha=0),ha=Date.now());function Q_(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;cn(J_(r,n.value),e,5,[r])};return n.value=t,n.attached=W_(),n}function J_(t,e){if(ce(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Su=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Y_=(t,e,n,r,s,i)=>{const a=s==="svg";e==="class"?F_(t,r,a):e==="style"?$_(t,n,r):mo(e)?fl(e)||z_(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):X_(t,e,r,a))?(wu(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Au(t,e,r,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!We(r))?wu(t,Ut(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Au(t,e,r,a))};function X_(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Su(e)&&fe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Su(e)&&We(n)?!1:e in t}const Cu=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ce(e)?n=>xi(e,n):e};function Z_(t){t.target.composing=!0}function Pu(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const fa=Symbol("_assign");function Vu(t,e,n){return e&&(t=t.trim()),n&&(t=ml(t)),t}const ey={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[fa]=Cu(s);const i=r||s.props&&s.props.type==="number";Pr(t,e?"change":"input",a=>{a.target.composing||t[fa](Vu(t.value,n,i))}),(n||i)&&Pr(t,"change",()=>{t.value=Vu(t.value,n,i)}),e||(Pr(t,"compositionstart",Z_),Pr(t,"compositionend",Pu),Pr(t,"change",Pu))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(t[fa]=Cu(a),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?ml(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},ty=["ctrl","shift","alt","meta"],ny={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ty.some(n=>t[`${n}Key`]&&!e.includes(n))},ry=(t,e)=>{if(!t)return t;const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let a=0;a<e.length;a++){const l=ny[e[a]];if(l&&l(s,e))return}return t(s,...i)}))},sy={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},iy=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=Zn(s.key);if(e.some(a=>a===i||sy[a]===i))return t(s)}))},oy=lt({patchProp:Y_},M_);let Du;function ay(){return Du||(Du=p_(oy))}const ly=((...t)=>{const e=ay().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=uy(r);if(!s)return;const i=e._component;!fe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,cy(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e});function cy(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function uy(t){return We(t)?document.querySelector(t):t}const er=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},hy={};function fy(t,e){const n=qg("router-view");return z(),Mt(n)}const dy=er(hy,[["render",fy]]);const Vr=typeof document<"u";function dd(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function py(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&dd(t.default)}const Re=Object.assign;function da(t,e){const n={};for(const r in e){const s=e[r];n[r]=Qt(s)?s.map(t):t(s)}return n}const Ms=()=>{},Qt=Array.isArray;function xu(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const pd=/#/g,my=/&/g,gy=/\//g,_y=/=/g,yy=/\?/g,md=/\+/g,Ey=/%5B/g,vy=/%5D/g,gd=/%5E/g,Ty=/%60/g,_d=/%7B/g,Iy=/%7C/g,yd=/%7D/g,Ay=/%20/g;function Dl(t){return t==null?"":encodeURI(""+t).replace(Iy,"|").replace(Ey,"[").replace(vy,"]")}function wy(t){return Dl(t).replace(_d,"{").replace(yd,"}").replace(gd,"^")}function Fa(t){return Dl(t).replace(md,"%2B").replace(Ay,"+").replace(pd,"%23").replace(my,"%26").replace(Ty,"`").replace(_d,"{").replace(yd,"}").replace(gd,"^")}function by(t){return Fa(t).replace(_y,"%3D")}function Ry(t){return Dl(t).replace(pd,"%23").replace(yy,"%3F")}function Sy(t){return Ry(t).replace(gy,"%2F")}function Ks(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Cy=/\/$/,Py=t=>t.replace(Cy,"");function pa(t,e,n="/"){let r,s={},i="",a="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(r=e.slice(0,c),i=e.slice(c,l>0?l:e.length),s=t(i.slice(1))),l>=0&&(r=r||e.slice(0,l),a=e.slice(l,e.length)),r=Ny(r??e,n),{fullPath:r+i+a,path:r,query:s,hash:Ks(a)}}function Vy(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Nu(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Dy(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&zr(e.matched[r],n.matched[s])&&Ed(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function zr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ed(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!xy(t[n],e[n]))return!1;return!0}function xy(t,e){return Qt(t)?Ou(t,e):Qt(e)?Ou(e,t):t?.valueOf()===e?.valueOf()}function Ou(t,e){return Qt(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Ny(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const kn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ba=(function(t){return t.pop="pop",t.push="push",t})({}),ma=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function Oy(t){if(!t)if(Vr){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Py(t)}const ky=/^[^#]+#/;function My(t,e){return t.replace(ky,"#")+e}function Ly(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Ro=()=>({left:window.scrollX,top:window.scrollY});function Fy(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=Ly(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ku(t,e){return(history.state?history.state.position-e:-1)+t}const Ua=new Map;function By(t,e){Ua.set(t,e)}function Uy(t){const e=Ua.get(t);return Ua.delete(t),e}function jy(t){return typeof t=="string"||t&&typeof t=="object"}function vd(t){return typeof t=="string"||typeof t=="symbol"}let je=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const Td=Symbol("");je.MATCHER_NOT_FOUND+"",je.NAVIGATION_GUARD_REDIRECT+"",je.NAVIGATION_ABORTED+"",je.NAVIGATION_CANCELLED+"",je.NAVIGATION_DUPLICATED+"";function Gr(t,e){return Re(new Error,{type:t,[Td]:!0},e)}function pn(t,e){return t instanceof Error&&Td in t&&(e==null||!!(t.type&e))}const $y=["params","query","hash"];function Hy(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of $y)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function qy(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(md," "),i=s.indexOf("="),a=Ks(i<0?s:s.slice(0,i)),l=i<0?null:Ks(s.slice(i+1));if(a in e){let c=e[a];Qt(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Mu(t){let e="";for(let n in t){const r=t[n];if(n=by(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Qt(r)?r.map(s=>s&&Fa(s)):[r&&Fa(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function zy(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Qt(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const Gy=Symbol(""),Lu=Symbol(""),xl=Symbol(""),Id=Symbol(""),ja=Symbol("");function vs(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Fn(t,e,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const h=g=>{g===!1?c(Gr(je.NAVIGATION_ABORTED,{from:n,to:e})):g instanceof Error?c(g):jy(g)?c(Gr(je.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(a&&r.enterCallbacks[s]===a&&typeof g=="function"&&a.push(g),l())},d=i(()=>t.call(r&&r.instances[s],e,n,h));let p=Promise.resolve(d);t.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function ga(t,e,n,r,s=i=>i()){const i=[];for(const a of t)for(const l in a.components){let c=a.components[l];if(!(e!=="beforeRouteEnter"&&!a.instances[l]))if(dd(c)){const h=(c.__vccOpts||c)[e];h&&i.push(Fn(h,n,r,a,l,s))}else{let h=c();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=py(d)?d.default:d;a.mods[l]=d,a.components[l]=p;const g=(p.__vccOpts||p)[e];return g&&Fn(g,n,r,a,l,s)()}))}}return i}function Ky(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const l=e.matched[a];l&&(t.matched.find(h=>zr(h,l))?r.push(l):n.push(l));const c=t.matched[a];c&&(e.matched.find(h=>zr(h,c))||s.push(c))}return[n,r,s]}let Wy=()=>location.protocol+"//"+location.host;function Ad(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Nu(l,"")}return Nu(n,t)+r+s}function Qy(t,e,n,r){let s=[],i=[],a=null;const l=({state:g})=>{const v=Ad(t,location),V=n.value,D=e.value;let R=0;if(g){if(n.value=v,e.value=g,a&&a===V){a=null;return}R=D?g.position-D.position:0}else r(v);s.forEach(N=>{N(n.value,V,{delta:R,type:Ba.pop,direction:R?R>0?ma.forward:ma.back:ma.unknown})})};function c(){a=n.value}function h(g){s.push(g);const v=()=>{const V=s.indexOf(g);V>-1&&s.splice(V,1)};return i.push(v),v}function d(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(Re({},g.state,{scroll:Ro()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",d)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d),{pauseListeners:c,listen:h,destroy:p}}function Fu(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Ro():null}}function Jy(t){const{history:e,location:n}=window,r={value:Ad(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,h,d){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+c:Wy()+t+c;try{e[d?"replaceState":"pushState"](h,"",g),s.value=h}catch(v){console.error(v),n[d?"replace":"assign"](g)}}function a(c,h){i(c,Re({},e.state,Fu(s.value.back,c,s.value.forward,!0),h,{position:s.value.position}),!0),r.value=c}function l(c,h){const d=Re({},s.value,e.state,{forward:c,scroll:Ro()});i(d.current,d,!0),i(c,Re({},Fu(r.value,c,null),{position:d.position+1},h),!1),r.value=c}return{location:r,state:s,push:l,replace:a}}function Yy(t){t=Oy(t);const e=Jy(t),n=Qy(t,e.state,e.location,e.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=Re({location:"",base:t,go:r,createHref:My.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let ur=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Je=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Je||{});const Xy={type:ur.Static,value:""},Zy=/[a-zA-Z0-9_]/;function eE(t){if(!t)return[[]];if(t==="/")return[[Xy]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${h}": ${v}`)}let n=Je.Static,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let l=0,c,h="",d="";function p(){h&&(n===Je.Static?i.push({type:ur.Static,value:h}):n===Je.Param||n===Je.ParamRegExp||n===Je.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:ur.Param,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==Je.ParamRegExp){r=n,n=Je.EscapeNext;continue}switch(n){case Je.Static:c==="/"?(h&&p(),a()):c===":"?(p(),n=Je.Param):g();break;case Je.EscapeNext:g(),n=r;break;case Je.Param:c==="("?n=Je.ParamRegExp:Zy.test(c)?g():(p(),n=Je.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case Je.ParamRegExp:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=Je.ParamRegExpEnd:d+=c;break;case Je.ParamRegExpEnd:p(),n=Je.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===Je.ParamRegExp&&e(`Unfinished custom RegExp for param "${h}"`),p(),a(),s}const Bu="[^/]+?",tE={sensitive:!1,strict:!1,start:!0,end:!0};var Tt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Tt||{});const nE=/[.+*?^${}()[\]/\\]/g;function rE(t,e){const n=Re({},tE,e),r=[];let s=n.start?"^":"";const i=[];for(const h of t){const d=h.length?[]:[Tt.Root];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const g=h[p];let v=Tt.Segment+(n.sensitive?Tt.BonusCaseSensitive:0);if(g.type===ur.Static)p||(s+="/"),s+=g.value.replace(nE,"\\$&"),v+=Tt.Static;else if(g.type===ur.Param){const{value:V,repeatable:D,optional:R,regexp:N}=g;i.push({name:V,repeatable:D,optional:R});const O=N||Bu;if(O!==Bu){v+=Tt.BonusCustomRegExp;try{`${O}`}catch(G){throw new Error(`Invalid custom RegExp for param "${V}" (${O}): `+G.message)}}let q=D?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;p||(q=R&&h.length<2?`(?:/${q})`:"/"+q),R&&(q+="?"),s+=q,v+=Tt.Dynamic,R&&(v+=Tt.BonusOptional),D&&(v+=Tt.BonusRepeatable),O===".*"&&(v+=Tt.BonusWildcard)}d.push(v)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=Tt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function l(h){const d=h.match(a),p={};if(!d)return null;for(let g=1;g<d.length;g++){const v=d[g]||"",V=i[g-1];p[V.name]=v&&V.repeatable?v.split("/"):v}return p}function c(h){let d="",p=!1;for(const g of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const v of g)if(v.type===ur.Static)d+=v.value;else if(v.type===ur.Param){const{value:V,repeatable:D,optional:R}=v,N=V in h?h[V]:"";if(Qt(N)&&!D)throw new Error(`Provided param "${V}" is an array but it is not repeatable (* or + modifiers)`);const O=Qt(N)?N.join("/"):N;if(!O)if(R)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${V}"`);d+=O}}return d||"/"}return{re:a,score:r,keys:i,parse:l,stringify:c}}function sE(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===Tt.Static+Tt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Tt.Static+Tt.Segment?1:-1:0}function wd(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=sE(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Uu(r))return 1;if(Uu(s))return-1}return s.length-r.length}function Uu(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const iE={strict:!1,end:!0,sensitive:!1};function oE(t,e,n){const r=rE(eE(t.path),n),s=Re(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function aE(t,e){const n=[],r=new Map;e=xu(iE,e);function s(p){return r.get(p)}function i(p,g,v){const V=!v,D=$u(p);D.aliasOf=v&&v.record;const R=xu(e,p),N=[D];if("alias"in p){const G=typeof p.alias=="string"?[p.alias]:p.alias;for(const de of G)N.push($u(Re({},D,{components:v?v.record.components:D.components,path:de,aliasOf:v?v.record:D})))}let O,q;for(const G of N){const{path:de}=G;if(g&&de[0]!=="/"){const Ee=g.record.path,A=Ee[Ee.length-1]==="/"?"":"/";G.path=g.record.path+(de&&A+de)}if(O=oE(G,g,R),v?v.alias.push(O):(q=q||O,q!==O&&q.alias.push(O),V&&p.name&&!Hu(O)&&a(p.name)),bd(O)&&c(O),D.children){const Ee=D.children;for(let A=0;A<Ee.length;A++)i(Ee[A],O,v&&v.children[A])}v=v||O}return q?()=>{a(q)}:Ms}function a(p){if(vd(p)){const g=r.get(p);g&&(r.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(a),g.alias.forEach(a))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function c(p){const g=uE(p,n);n.splice(g,0,p),p.record.name&&!Hu(p)&&r.set(p.record.name,p)}function h(p,g){let v,V={},D,R;if("name"in p&&p.name){if(v=r.get(p.name),!v)throw Gr(je.MATCHER_NOT_FOUND,{location:p});R=v.record.name,V=Re(ju(g.params,v.keys.filter(q=>!q.optional).concat(v.parent?v.parent.keys.filter(q=>q.optional):[]).map(q=>q.name)),p.params&&ju(p.params,v.keys.map(q=>q.name))),D=v.stringify(V)}else if(p.path!=null)D=p.path,v=n.find(q=>q.re.test(D)),v&&(V=v.parse(D),R=v.record.name);else{if(v=g.name?r.get(g.name):n.find(q=>q.re.test(g.path)),!v)throw Gr(je.MATCHER_NOT_FOUND,{location:p,currentLocation:g});R=v.record.name,V=Re({},g.params,p.params),D=v.stringify(V)}const N=[];let O=v;for(;O;)N.unshift(O.record),O=O.parent;return{name:R,path:D,params:V,matched:N,meta:cE(N)}}t.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:a,clearRoutes:d,getRoutes:l,getRecordMatcher:s}}function ju(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function $u(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:lE(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function lE(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Hu(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function cE(t){return t.reduce((e,n)=>Re(e,n.meta),{})}function uE(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;wd(t,e[i])<0?r=i:n=i+1}const s=hE(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function hE(t){let e=t;for(;e=e.parent;)if(bd(e)&&wd(t,e)===0)return e}function bd({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function qu(t){const e=vn(xl),n=vn(Id),r=Ge(()=>{const c=Nt(t.to);return e.resolve(c)}),s=Ge(()=>{const{matched:c}=r.value,{length:h}=c,d=c[h-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(zr.bind(null,d));if(g>-1)return g;const v=zu(c[h-2]);return h>1&&zu(d)===v&&p[p.length-1].path!==v?p.findIndex(zr.bind(null,c[h-2])):g}),i=Ge(()=>s.value>-1&&gE(n.params,r.value.params)),a=Ge(()=>s.value>-1&&s.value===n.matched.length-1&&Ed(n.params,r.value.params));function l(c={}){if(mE(c)){const h=e[Nt(t.replace)?"replace":"push"](Nt(t.to)).catch(Ms);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:Ge(()=>r.value.href),isActive:i,isExactActive:a,navigate:l}}function fE(t){return t.length===1?t[0]:t}const dE=Bf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:qu,setup(t,{slots:e}){const n=vo(qu(t)),{options:r}=vn(xl),s=Ge(()=>({[Gu(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Gu(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&fE(e.default(n));return t.custom?i:hd("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),pE=dE;function mE(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function gE(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Qt(s)||s.length!==r.length||r.some((i,a)=>i.valueOf()!==s[a].valueOf()))return!1}return!0}function zu(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Gu=(t,e,n)=>t??e??n,_E=Bf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=vn(ja),s=Ge(()=>t.route||r.value),i=vn(Lu,0),a=Ge(()=>{let h=Nt(i);const{matched:d}=s.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),l=Ge(()=>s.value.matched[a.value]);Ni(Lu,Ge(()=>a.value+1)),Ni(Gy,l),Ni(ja,s);const c=qt();return Oi(()=>[c.value,l.value,t.name],([h,d,p],[g,v,V])=>{d&&(d.instances[p]=h,v&&v!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),h&&d&&(!v||!zr(d,v)||!g)&&(d.enterCallbacks[p]||[]).forEach(D=>D(h))},{flush:"post"}),()=>{const h=s.value,d=t.name,p=l.value,g=p&&p.components[d];if(!g)return Ku(n.default,{Component:g,route:h});const v=p.props[d],V=v?v===!0?h.params:typeof v=="function"?v(h):v:null,R=hd(g,Re({},V,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return Ku(n.default,{Component:R,route:h})||R}}});function Ku(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const yE=_E;function EE(t){const e=aE(t.routes,t),n=t.parseQuery||qy,r=t.stringifyQuery||Mu,s=t.history,i=vs(),a=vs(),l=vs(),c=pg(kn);let h=kn;Vr&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=da.bind(null,L=>""+L),p=da.bind(null,Sy),g=da.bind(null,Ks);function v(L,Z){let J,re;return vd(L)?(J=e.getRecordMatcher(L),re=Z):re=L,e.addRoute(re,J)}function V(L){const Z=e.getRecordMatcher(L);Z&&e.removeRoute(Z)}function D(){return e.getRoutes().map(L=>L.record)}function R(L){return!!e.getRecordMatcher(L)}function N(L,Z){if(Z=Re({},Z||c.value),typeof L=="string"){const S=pa(n,L,Z.path),k=e.resolve({path:S.path},Z),B=s.createHref(S.fullPath);return Re(S,k,{params:g(k.params),hash:Ks(S.hash),redirectedFrom:void 0,href:B})}let J;if(L.path!=null)J=Re({},L,{path:pa(n,L.path,Z.path).path});else{const S=Re({},L.params);for(const k in S)S[k]==null&&delete S[k];J=Re({},L,{params:p(S)}),Z.params=p(Z.params)}const re=e.resolve(J,Z),ge=L.hash||"";re.params=d(g(re.params));const _=Vy(r,Re({},L,{hash:wy(ge),path:re.path})),T=s.createHref(_);return Re({fullPath:_,hash:ge,query:r===Mu?zy(L.query):L.query||{}},re,{redirectedFrom:void 0,href:T})}function O(L){return typeof L=="string"?pa(n,L,c.value.path):Re({},L)}function q(L,Z){if(h!==L)return Gr(je.NAVIGATION_CANCELLED,{from:Z,to:L})}function G(L){return A(L)}function de(L){return G(Re(O(L),{replace:!0}))}function Ee(L,Z){const J=L.matched[L.matched.length-1];if(J&&J.redirect){const{redirect:re}=J;let ge=typeof re=="function"?re(L,Z):re;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=O(ge):{path:ge},ge.params={}),Re({query:L.query,hash:L.hash,params:ge.path!=null?{}:L.params},ge)}}function A(L,Z){const J=h=N(L),re=c.value,ge=L.state,_=L.force,T=L.replace===!0,S=Ee(J,re);if(S)return A(Re(O(S),{state:typeof S=="object"?Re({},ge,S.state):ge,force:_,replace:T}),Z||J);const k=J;k.redirectedFrom=Z;let B;return!_&&Dy(r,re,J)&&(B=Gr(je.NAVIGATION_DUPLICATED,{to:k,from:re}),Pt(re,re,!0,!1)),(B?Promise.resolve(B):b(k,re)).catch(M=>pn(M)?pn(M,je.NAVIGATION_GUARD_REDIRECT)?M:Jt(M):ve(M,k,re)).then(M=>{if(M){if(pn(M,je.NAVIGATION_GUARD_REDIRECT))return A(Re({replace:T},O(M.to),{state:typeof M.to=="object"?Re({},ge,M.to.state):ge,force:_}),Z||k)}else M=C(k,re,!0,T,ge);return w(k,re,M),M})}function y(L,Z){const J=q(L,Z);return J?Promise.reject(J):Promise.resolve()}function I(L){const Z=jt.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(L):L()}function b(L,Z){let J;const[re,ge,_]=Ky(L,Z);J=ga(re.reverse(),"beforeRouteLeave",L,Z);for(const S of re)S.leaveGuards.forEach(k=>{J.push(Fn(k,L,Z))});const T=y.bind(null,L,Z);return J.push(T),ut(J).then(()=>{J=[];for(const S of i.list())J.push(Fn(S,L,Z));return J.push(T),ut(J)}).then(()=>{J=ga(ge,"beforeRouteUpdate",L,Z);for(const S of ge)S.updateGuards.forEach(k=>{J.push(Fn(k,L,Z))});return J.push(T),ut(J)}).then(()=>{J=[];for(const S of _)if(S.beforeEnter)if(Qt(S.beforeEnter))for(const k of S.beforeEnter)J.push(Fn(k,L,Z));else J.push(Fn(S.beforeEnter,L,Z));return J.push(T),ut(J)}).then(()=>(L.matched.forEach(S=>S.enterCallbacks={}),J=ga(_,"beforeRouteEnter",L,Z,I),J.push(T),ut(J))).then(()=>{J=[];for(const S of a.list())J.push(Fn(S,L,Z));return J.push(T),ut(J)}).catch(S=>pn(S,je.NAVIGATION_CANCELLED)?S:Promise.reject(S))}function w(L,Z,J){l.list().forEach(re=>I(()=>re(L,Z,J)))}function C(L,Z,J,re,ge){const _=q(L,Z);if(_)return _;const T=Z===kn,S=Vr?history.state:{};J&&(re||T?s.replace(L.fullPath,Re({scroll:T&&S&&S.scroll},ge)):s.push(L.fullPath,ge)),c.value=L,Pt(L,Z,J,T),Jt()}let E;function He(){E||(E=s.listen((L,Z,J)=>{if(!$t.listening)return;const re=N(L),ge=Ee(re,$t.currentRoute.value);if(ge){A(Re(ge,{replace:!0,force:!0}),re).catch(Ms);return}h=re;const _=c.value;Vr&&By(ku(_.fullPath,J.delta),Ro()),b(re,_).catch(T=>pn(T,je.NAVIGATION_ABORTED|je.NAVIGATION_CANCELLED)?T:pn(T,je.NAVIGATION_GUARD_REDIRECT)?(A(Re(O(T.to),{force:!0}),re).then(S=>{pn(S,je.NAVIGATION_ABORTED|je.NAVIGATION_DUPLICATED)&&!J.delta&&J.type===Ba.pop&&s.go(-1,!1)}).catch(Ms),Promise.reject()):(J.delta&&s.go(-J.delta,!1),ve(T,re,_))).then(T=>{T=T||C(re,_,!1),T&&(J.delta&&!pn(T,je.NAVIGATION_CANCELLED)?s.go(-J.delta,!1):J.type===Ba.pop&&pn(T,je.NAVIGATION_ABORTED|je.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),w(re,_,T)}).catch(Ms)}))}let wt=vs(),qe=vs(),be;function ve(L,Z,J){Jt(L);const re=qe.list();return re.length?re.forEach(ge=>ge(L,Z,J)):console.error(L),Promise.reject(L)}function bt(){return be&&c.value!==kn?Promise.resolve():new Promise((L,Z)=>{wt.add([L,Z])})}function Jt(L){return be||(be=!L,He(),wt.list().forEach(([Z,J])=>L?J(L):Z()),wt.reset()),L}function Pt(L,Z,J,re){const{scrollBehavior:ge}=t;if(!Vr||!ge)return Promise.resolve();const _=!J&&Uy(ku(L.fullPath,0))||(re||!J)&&history.state&&history.state.scroll||null;return xf().then(()=>ge(L,Z,_)).then(T=>T&&Fy(T)).catch(T=>ve(T,L,Z))}const st=L=>s.go(L);let fn;const jt=new Set,$t={currentRoute:c,listening:!0,addRoute:v,removeRoute:V,clearRoutes:e.clearRoutes,hasRoute:R,getRoutes:D,resolve:N,options:t,push:G,replace:de,go:st,back:()=>st(-1),forward:()=>st(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:qe.add,isReady:bt,install(L){L.component("RouterLink",pE),L.component("RouterView",yE),L.config.globalProperties.$router=$t,Object.defineProperty(L.config.globalProperties,"$route",{enumerable:!0,get:()=>Nt(c)}),Vr&&!fn&&c.value===kn&&(fn=!0,G(s.location).catch(re=>{}));const Z={};for(const re in kn)Object.defineProperty(Z,re,{get:()=>c.value[re],enumerable:!0});L.provide(xl,$t),L.provide(Id,Cf(Z)),L.provide(ja,c);const J=L.unmount;jt.add(L),L.unmount=function(){jt.delete(L),jt.size<1&&(h=kn,E&&E(),E=null,c.value=kn,fn=!1,be=!1),J()}}};function ut(L){return L.reduce((Z,J)=>Z.then(()=>I(J)),Promise.resolve())}return $t}const vE={class:"nav-wrap"},TE={class:"nav-scroll"},IE=["onClick"],AE={class:"nav-icon"},wE={class:"nav-label"},bE={__name:"Nav",props:{categories:Array,activeCategory:String},emits:["navigate"],setup(t){return(e,n)=>(z(),Y("nav",vE,[W("div",TE,[(z(!0),Y(we,null,rt(t.categories,r=>(z(),Y("button",{key:r.id,class:oi(["nav-btn",{active:t.activeCategory===r.id}]),onClick:s=>e.$emit("navigate",r.id)},[W("span",AE,te(r.icon),1),W("span",wE,te(r.label),1)],10,IE))),128))])]))}},RE=er(bE,[["__scopeId","data-v-12592120"]]),SE={__name:"BadgePill",props:{badge:String,badgeLabel:String},setup(t){const e=t,n={popular:{class:"badge-pop",label:" Popular"},new:{class:"badge-new",label:" New"},vegan:{class:"badge-veg",label:" Vegan"},happyhour:{class:"badge-happy",label:""},default:{class:"badge-def",label:""}},r=Ge(()=>(n[e.badge]??n.default).class),s=Ge(()=>e.badge==="happyhour"?e.badgeLabel:(n[e.badge]??n.default).label||e.badgeLabel||"");return(i,a)=>(z(),Y("span",{class:oi(["badge",r.value])},te(s.value),3))}},So=er(SE,[["__scopeId","data-v-01d342f1"]]),CE={class:"card featured-card"},PE={class:"card-thumb"},VE=["src"],DE={key:1,class:"thumb-icon"},xE={key:2,class:"featured-tag"},NE={class:"card-body"},OE={class:"item-name"},kE={key:0,class:"item-desc"},ME={class:"card-bottom"},LE={key:1,class:"item-price"},FE={key:0,class:"original-price"},BE={class:"featured-price"},UE={key:2,class:"item-sizes"},jE={class:"size-label"},$E={class:"size-prices"},HE={key:0,class:"original-price"},qE={class:"size-price"},zE={key:1,class:"item-options"},GE={class:"options-tags"},KE={class:"extra-price"},WE={__name:"FeaturedCard",props:{item:Object},setup(t){return(e,n)=>(z(),Y("div",CE,[W("div",PE,[t.item.img?(z(),Y("img",{key:0,src:"./src/assets/img/"+t.item.img,alt:"",class:"thumb-img"},null,8,VE)):(z(),Y("span",DE,te(t.item.icon),1)),t.item.featuredTag?(z(),Y("div",xE,te(t.item.featuredTag),1)):xe("",!0)]),W("div",NE,[W("div",OE,te(t.item.name),1),t.item.desc?(z(),Y("div",kE,te(t.item.desc),1)):xe("",!0),W("div",ME,[t.item.badge?(z(),Mt(So,{key:0,badge:t.item.badge,badgeLabel:t.item.badgeLabel},null,8,["badge","badgeLabel"])):xe("",!0),n[0]||(n[0]=W("div",{class:"spacer"},null,-1)),t.item.price?(z(),Y("div",LE,[t.item.originalPrice?(z(),Y("span",FE,te(t.item.originalPrice),1)):xe("",!0),W("span",BE,te(t.item.price),1)])):xe("",!0),t.item.sizes?(z(),Y("div",UE,[(z(!0),Y(we,null,rt(t.item.sizes,r=>(z(),Y("span",{key:r.label,class:"item-size item-price"},[W("span",jE,te(r.label),1),W("div",$E,[r.originalPrice?(z(),Y("span",HE,te(r.originalPrice),1)):xe("",!0),W("span",qE,te(r.price),1)])]))),128))])):xe("",!0)]),t.item.flavors||t.item.extras?(z(),Y("div",zE,[n[1]||(n[1]=W("span",{class:"options-label"},"Options:",-1)),W("div",GE,[(z(!0),Y(we,null,rt(t.item.flavors,r=>(z(),Y("span",{key:r,class:"option-tag"},te(r),1))),128)),(z(!0),Y(we,null,rt(t.item.extras,r=>(z(),Y("span",{key:r.name,class:"option-tag"},[mr(te(r.name)+" ",1),W("span",KE,te(r.price),1)]))),128))])])):xe("",!0)])]))}},$a=er(WE,[["__scopeId","data-v-ad5dbe1d"]]),QE={key:1,class:"card"},JE={class:"card-thumb"},YE={class:"card-body"},XE={class:"card-name"},ZE={key:0,class:"card-desc"},ev={class:"card-foot"},tv={class:"price"},nv={__name:"FoodCard",props:{item:Object,featured:{type:Boolean,default:!1}},setup(t){return(e,n)=>t.featured?(z(),Mt($a,{key:0,item:t.item},null,8,["item"])):(z(),Y("div",QE,[W("div",JE,te(t.item.icon),1),W("div",YE,[W("div",XE,te(t.item.name),1),t.item.desc?(z(),Y("div",ZE,te(t.item.desc),1)):xe("",!0),W("div",ev,[t.item.badge?(z(),Mt(So,{key:0,badge:t.item.badge,badgeLabel:t.item.badgeLabel},null,8,["badge","badgeLabel"])):xe("",!0),W("span",tv,te(t.item.price),1)])])]))}},Wu=er(nv,[["__scopeId","data-v-73777091"]]),mn={icon:"",name:"UZO Bar & Kitchen",tagline:"Fresh, seasonal, made with love",hours:{0:{open:"14:00",close:"22:00",label:"Sun"},1:{open:"12:00",close:"22:00",label:"Mon"},2:null,3:{open:"12:00",close:"22:00",label:"Wed"},4:{open:"12:00",close:"23:00",label:"Thu"},5:{open:"12:00",close:"24:00",label:"Fri"},6:{open:"12:00",close:"24:00",label:"Sat"}},happyHour:{start:["15:00","20:00"],end:["16:00","21:00"],discount:"40%"}},Yi=[{id:"happyhour",label:"Happy Hour Deals",icon:"",style:"card",happyHourOnly:!0,featured:[{img:"heineken.png",badge:"popular",name:"Heineken | 5%",desc:"The most refreshing pilsener.",happyHour:!0,featuredTag:"ON TAP",sizes:[{label:"25cl",price:"4.00"},{label:"50cl",price:"8.00"}]},{img:"oedipus.png",name:"Oedipus Mannenliefde | 6%",desc:"Modern blond beer brewed with saison yeast and lemongrass. From Amsterdam ",happyHour:!0,featuredTag:"ON TAP",sizes:[{label:"25cl",price:"5.50"},{label:"50cl",price:"10.00"}]},{img:"heineken.png",happyHour:!0,name:"Heineken 0.0%",desc:"300ml",price:"4.00"}],items:[]},{id:"hot-drinks",label:"Hot Beverages",icon:"",layout:"compact",items:[{icon:"",name:"Tea",price:"3.00",flavors:["Earl Grey","Lemon Green"]},{icon:"",name:"Fresh Mint Tea",desc:"served with honey",price:"3.80"},{icon:"",name:"Coffee",price:"3.50"},{icon:"",name:"Espresso",sizes:[{label:"Single",price:"3.50"},{label:"Double",price:"5.00"}]},{icon:"",name:"Cappuccino",desc:"regular milk",price:"4.50"},{icon:"",name:"Latte",desc:"regular milk",price:"4.50"},{icon:"",name:"Latte Macchiato",desc:"regular milk",price:"4.80"},{icon:"",name:"Hot Chocolate",price:"4.50",extras:[{name:"Whipped Cream",price:"+0.50"}]},{icon:"",name:"Irish Coffee",desc:"jameson, whipped cream",price:"9.70"}]},{id:"soft",label:"Soft Drinks",icon:"",layout:"compact",items:[{img:"cola.png",name:"Coca Cola",price:"3.60"},{img:"cola-zero.png",name:"Coca Cola Zero",price:"3.60"},{img:"fanta.png",name:"Fanta Orange",price:"3.60"},{img:"sprite.png",name:"Sprite",price:"3.60"},{img:"lipton.png",name:"Lipton Ice Tea",price:"3.60",flavors:["Peach","Sparkling","Green"]},{img:"royal-club.png",name:"Tonic Water ",price:"3.60"},{img:"royal-club.png",name:"Ginger Ale",price:"3.60"},{img:"royal-club.png",name:"Ginger Beer",price:"3.60"},{img:"royal-club.png",name:"Pink Grapefruit Zero",price:"3.60"},{img:"chocomel.png",name:"Chocomel",price:"3.60"},{img:"redbull.png",name:"Redbull",price:"4.50"},{img:"juice.png",name:"Juice",price:"3.60",flavors:["Apple","Orange"]},{img:"spa.png",name:"Water 50cl",price:"3.30",flavors:["Still","Sparkling"]}]},{id:"draught",label:"Draught Beer",icon:"",items:[{img:"heineken.png",badge:"popular",name:"Heineken | 5%",desc:"The most refreshing pilsener.",happyHour:!0,sizes:[{label:"25cl",price:"4.00"},{label:"50cl",price:"8.00"}]},{img:"moretti.png",badge:"popular",name:"Birra Moretti | 4.6%",desc:"Authentic subtle and fresh beer with a delicate flavour.",sizes:[{label:"25cl",price:"4.00"},{label:"50cl",price:"8.00"}]},{img:"leffe.png",name:"Leffe Blond | 6.7%",desc:"Blonde, malty-sweet flavour balanced with fruity, slightly bitter finish.",sizes:[{label:"25cl",price:"6.00"},{label:"50cl",price:"11.00"}]},{img:"guinness.png",badge:"popular",name:"Guinness | 4.3%",desc:"Stout, toasted flavour, bitter finish.",sizes:[{label:"25cl",price:"5.50"},{label:"50cl",price:"10.00"}]},{img:"oedipus.png",name:"Oedipus Mannenliefde | 6%",desc:"Modern blond beer brewed with saison yeast and lemongrass. From Amsterdam ",happyHour:!0,sizes:[{label:"25cl",price:"5.50"},{label:"50cl",price:"10.00"}]},{img:"oedipus.png",name:"Oedipus Bride | 5%",desc:"A relatively dry witbier from Amsterdam with hoppy citrus notes and fresh orange peel. Refreshing with just enough spice from green pepper.",sizes:[{label:"25cl",price:"5.50"},{label:"50cl",price:"10.00"}]},{img:"texel.png",badge:"popular",name:"Texels Skuumkoppe | 6%",desc:"A character dark wheat beer that tastes in every season. Full of flavour with hints of caramel and apricot and has a creamy, slightly sweet finish.",sizes:[{label:"25cl",price:"5.50"},{label:"50cl",price:"10.00"}]},{img:"ipa.png",name:"Lagunitas IPA | 6.2%",desc:"Beautifully balanced citrus tones, slightly sweet and combined with a fresh-bitter, soft aftertaste.",sizes:[{label:"25cl",price:"6.00"},{label:"50cl",price:"11.00"}]}]},{id:"bottled",label:"Bottled Beers",icon:"",items:[{img:"corona.png",badge:"popular",name:"Corona | 4.5%",desc:"Mexican lager, served with lime.  330ml",price:"5.50"},{img:"desperados.png",name:"Desperados | 5.9%",desc:"Tequilaflavoured lager with a sweet, citrusleaning taste that feels more like a party drink than a classic beer.  330ml",price:"5.50"},{img:"chouffe.png",name:"La Chouffe | 8%",desc:"A lively Belgian blonde beer with fruity esters, a touch of coriander spice, and a smooth, slightly hoppy finish.   330ml",price:"6.90"},{img:"duvel.png",name:"Duvel | 8.5%",desc:"A strong golden ale thats crisp, highly carbonated, and full of subtle fruit and spice, finishing dry and dangerously easy to drink.   330ml",price:"6.90"},{img:"affligem.png",name:"Affligem Blond | 6.7%",desc:"A balanced golden ale with soft malt sweetness, light fruitiness, and a smooth, mildly bitter finish.   300ml",price:"6.00"},{img:"affligem.png",name:"Affligem Double | 6.7%",desc:"A deeper, darker ale featuring caramel malts, hints of dried fruit, and a warm, rounded body.  300ml",price:"6.20"},{img:"affligem.png",name:"Affligem Triple | 9%",desc:"A stronger, aromatic golden ale with spicy yeast character, honeylike malt, and a dry, warming finish.  300ml",price:"7.00"}]},{id:"bottled-zero",label:"0.0% Beers",icon:"",items:[{img:"heineken.png",happyHour:!0,name:"Heineken 0.0%",desc:"300ml",price:"4.00"},{img:"rose.png",badge:"",name:"Amstel Ros 0.0%",desc:"300ml",price:"4.50"},{img:"texel.png",badge:"",name:"Texel Skuumkoppe 0.0%",desc:"300ml",price:"5.00"},{img:"leffe.png",badge:"popular",name:"Leffe Blond 0.0%",desc:"330ml",price:"4.50"},{img:"corona.png",badge:"",name:"Corona 0.0%",desc:"330ml",price:"4.50"}]},{id:"cider",label:"Fruity & Cider",icon:"",items:[{img:"amstel.png",badge:"",name:"Amstel Radler | 2%",desc:"Lemon flavour  300ml",price:"4.80"},{img:"rose.png",badge:"",name:"Amstel Ros | 4%",desc:"300ml",price:"5.00"},{img:"kriek.png",badge:"popular",name:"Lindeman's Kriek | 3.5%",desc:"250ml",price:"5.00"},{img:"kwak.png",badge:"",name:"Kwak Rouge | 8%",desc:"Cherry flavour  330ml",price:"6.50"},{img:"sb.png",badge:"popular",name:"Somersby Cider Apple | 4.5%",desc:"300ml",price:"6.00"},{img:"sb.png",badge:"",name:"Somersby Cider Blackberry | 4.5%",desc:"300ml",price:"6.00"},{img:"magners.png",badge:"",name:"Magners Cider Pint | 4.5%",desc:"570ml",price:"10.00"}]},{id:"cocktails",label:"Cocktails",icon:"",items:[{icon:"",name:"Aperol Spritz",desc:"Aperol, prosecco, soda, orange slice",price:"11.00",badge:"popular"},{icon:"",name:"Limoncello Spritz",desc:"Limoncello, prosecco, soda, lemon",price:"11.00",badge:""},{icon:"",name:"Elderflower Spritz",desc:"Elderflower, prosecco, soda, lime, mint",price:"11.00",badge:""},{icon:"",name:"Espresso Martini",desc:"Espresso, vodka, coffee liquor, caramel",price:"11.00",badge:"popular"},{icon:"",name:"House Mojito",desc:"Fresh mint, lime, rum, soda, sugar",price:"10.50",badge:"popular"},{icon:"",name:"Pink Lady",desc:"Pink gin, pink grapefruit soda, summer berries",price:"10.50",badge:"new"},{icon:"",name:"Whiskey Sour",desc:"Whiskey, lemon, egg white, sugar",price:"12.00"}]},{id:"snacks",label:"Bar Snacks",icon:"",layout:"compact",items:[{icon:"",name:"Nuts Mix (Salted)",price:"6.00"},{img:"naturel.png",name:"Lays Naturel",price:"2.00"},{img:"bolognese.png",name:"Lays Bolognese",price:"2.00"},{img:"doritos.png",name:"Doritos Nacho Cheese",price:"2.00"}]}],_a=[{id:"breakfast",label:"Breakfast",icon:"",featured:{icon:"",name:"Avocado Smash Toast",desc:"Sourdough, smashed avo, poached egg, chilli flakes, microgreens",price:"14.50",badge:"popular",featuredTag:" Chef's Pick"},items:[{icon:"",name:"Fluffy Pancakes",desc:"Stack of 3, maple syrup, seasonal berries, whipped cream",price:"11.00",badge:"default",badgeLabel:" Veggie"},{icon:"",name:"Eggs Benedict",desc:"Poached eggs, smoked salmon, hollandaise, English muffin",price:"13.50",badge:"popular"}]},{id:"lunch",label:"Lunch",icon:"",featured:null,items:[{icon:"",name:"Seasonal Grain Bowl",desc:"Quinoa, roasted veg, feta, tahini drizzle, mixed seeds",price:"13.00",badge:"vegan"},{icon:"",name:"Club Sandwich",desc:"Toasted triple decker, chicken, bacon, lettuce, tomato, fries",price:"14.00",badge:"popular"},{icon:"",name:"Tomato Bisque Soup",desc:"Roasted tomato, basil oil, crusty sourdough on the side",price:"8.50",badge:"new"}]}],rv={class:"card regular-card"},sv={class:"card-thumb"},iv=["src"],ov={class:"card-body"},av={class:"item-name"},lv={key:0,class:"item-desc"},cv={class:"card-foot"},uv={key:1,class:"item-price"},hv={key:2,class:"item-sizes"},fv={class:"size-label"},dv={class:"size-prices"},pv={key:0,class:"original-price"},mv={class:"size-price"},gv={__name:"RegularCard",props:{item:Object},setup(t){return(e,n)=>(z(),Y("div",rv,[W("div",sv,[t.item.img?(z(),Y("img",{key:0,src:"./src/assets/img/"+t.item.img,alt:""},null,8,iv)):(z(),Y(we,{key:1},[mr(te(t.item.icon),1)],64))]),W("div",ov,[W("div",av,te(t.item.name),1),t.item.desc?(z(),Y("div",lv,te(t.item.desc),1)):xe("",!0),W("div",cv,[t.item.badge?(z(),Mt(So,{key:0,badge:t.item.badge,badgeLabel:t.item.badgeLabel},null,8,["badge","badgeLabel"])):xe("",!0),t.item.price?(z(),Y("span",uv,te(t.item.price),1)):xe("",!0),t.item.sizes?(z(),Y("div",hv,[(z(!0),Y(we,null,rt(t.item.sizes,r=>(z(),Y("span",{key:r.label,class:"item-size item-price"},[W("span",fv,te(r.label),1),W("div",dv,[r.originalPrice?(z(),Y("span",pv,te(r.originalPrice),1)):xe("",!0),W("span",mv,te(r.price),1)])]))),128))])):xe("",!0)])])]))}},_v=er(gv,[["__scopeId","data-v-ff80ca62"]]),yv={class:"card compact-card"},Ev={class:"card-thumb"},vv=["src"],Tv={class:"card-body"},Iv={key:0,class:"card-header"},Av={class:"item-name"},wv={class:"item-info"},bv={key:0,class:"item-desc"},Rv={key:1,class:"item-options"},Sv={class:"options-tags"},Cv={class:"extra-price"},Pv={key:2,class:"item-price"},Vv={key:3,class:"item-sizes"},Dv={class:"size-label"},xv={class:"size-price"},Nv={__name:"CompactCard",props:{item:Object},setup(t){return(e,n)=>(z(),Y("div",yv,[W("div",Ev,[t.item.img?(z(),Y("img",{key:0,src:"./src/assets/img/"+t.item.img,alt:""},null,8,vv)):(z(),Y(we,{key:1},[mr(te(t.item.icon),1)],64))]),W("div",Tv,[t.item.badge?(z(),Y("div",Iv,[At(So,{badge:t.item.badge,badgeLabel:t.item.badgeLabel},null,8,["badge","badgeLabel"])])):xe("",!0),W("div",Av,te(t.item.name),1),W("div",wv,[t.item.desc?(z(),Y("div",bv,te(t.item.desc),1)):xe("",!0),t.item.flavors||t.item.extras?(z(),Y("div",Rv,[n[0]||(n[0]=W("span",{class:"options-label"},"Options:",-1)),W("div",Sv,[(z(!0),Y(we,null,rt(t.item.flavors,r=>(z(),Y("span",{key:r,class:"option-tag"},te(r),1))),128)),(z(!0),Y(we,null,rt(t.item.extras,r=>(z(),Y("span",{key:r.name,class:"option-tag"},[mr(te(r.name)+" ",1),W("span",Cv,te(r.price),1)]))),128))])])):xe("",!0),n[1]||(n[1]=W("div",{class:"spacer"},null,-1)),t.item.price?(z(),Y("span",Pv,te(t.item.price),1)):xe("",!0),t.item.sizes?(z(),Y("div",Vv,[(z(!0),Y(we,null,rt(t.item.sizes,r=>(z(),Y("span",{key:r.label,class:"item-size item-price"},[W("span",Dv,te(r.label),1),W("span",xv,te(r.price),1)]))),128))])):xe("",!0)])])]))}},Ov=er(Nv,[["__scopeId","data-v-98b020a9"]]),kv=()=>{};var Qu={};const Rd=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Mv=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Sd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,v=h&63;c||(v=64,a||(g=64)),r.push(n[d],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rd(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Mv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new Lv;const g=i<<2|l>>4;if(r.push(g),h!==64){const v=l<<4&240|h>>2;if(r.push(v),p!==64){const V=h<<6&192|p;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Lv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fv=function(t){const e=Rd(t);return Sd.encodeByteArray(e,!0)},Xi=function(t){return Fv(t).replace(/\./g,"")},Bv=function(t){try{return Sd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Uv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jv=()=>Uv().__FIREBASE_DEFAULTS__,$v=()=>{if(typeof process>"u"||typeof Qu>"u")return;const t=Qu.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Hv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bv(t[1]);return e&&JSON.parse(e)},Nl=()=>{try{return kv()||jv()||$v()||Hv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qv=t=>Nl()?.emulatorHosts?.[t],zv=t=>{const e=qv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cd=()=>Nl()?.config;class Gv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Ol(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kv(t){return(await fetch(t,{credentials:"include"})).ok}function Wv(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Xi(JSON.stringify(n)),Xi(JSON.stringify(a)),""].join(".")}const Ls={};function Qv(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ls))Ls[e]?t.emulator.push(e):t.prod.push(e);return t}function Jv(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ju=!1;function Yv(t,e){if(typeof window>"u"||typeof document>"u"||!Ol(window.location.host)||Ls[t]===e||Ls[t]||Ju)return;Ls[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=Qv().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ju=!0,a()},g}function d(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=Jv(r),v=n("text"),V=document.getElementById(v)||document.createElement("span"),D=n("learnmore"),R=document.getElementById(D)||document.createElement("a"),N=n("preprendIcon"),O=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const q=g.element;l(q),d(R,D);const G=h();c(O,N),q.append(O,V,R,G),document.body.appendChild(q)}i?(V.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Xv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zv(){const t=Nl()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eT(){return!Zv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tT(){try{return typeof indexedDB=="object"}catch{return!1}}function nT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const rT="FirebaseError";class Xr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rT,Object.setPrototypeOf(this,Xr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pd.prototype.create)}}class Pd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?sT(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Xr(s,l,r)}}function sT(t,e){return t.replace(iT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const iT=/\{\$([^}]+)}/g;function Zi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Yu(i)&&Yu(a)){if(!Zi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yu(t){return t!==null&&typeof t=="object"}function Ws(t){return t&&t._delegate?t._delegate:t}class Qs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cr="[DEFAULT]";class oT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Gv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lT(e))try{this.getOrInitializeService({instanceIdentifier:cr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cr){return this.instances.has(e)}getOptions(e=cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cr){return this.component?this.component.multipleInstances?e:cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aT(t){return t===cr?void 0:t}function lT(t){return t.instantiationMode==="EAGER"}class cT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ie||(Ie={}));const uT={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},hT=Ie.INFO,fT={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},dT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=fT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vd{constructor(e){this.name=e,this._logLevel=hT,this._logHandler=dT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const pT=(t,e)=>e.some(n=>t instanceof n);let Xu,Zu;function mT(){return Xu||(Xu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gT(){return Zu||(Zu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dd=new WeakMap,Ha=new WeakMap,xd=new WeakMap,ya=new WeakMap,kl=new WeakMap;function _T(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(jn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Dd.set(n,t)}).catch(()=>{}),kl.set(e,t),e}function yT(t){if(Ha.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Ha.set(t,e)}let qa={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ha.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xd.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ET(t){qa=t(qa)}function vT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ea(this),e,...n);return xd.set(r,e.sort?e.sort():[e]),jn(r)}:gT().includes(t)?function(...e){return t.apply(Ea(this),e),jn(Dd.get(this))}:function(...e){return jn(t.apply(Ea(this),e))}}function TT(t){return typeof t=="function"?vT(t):(t instanceof IDBTransaction&&yT(t),pT(t,mT())?new Proxy(t,qa):t)}function jn(t){if(t instanceof IDBRequest)return _T(t);if(ya.has(t))return ya.get(t);const e=TT(t);return e!==t&&(ya.set(t,e),kl.set(e,t)),e}const Ea=t=>kl.get(t);function IT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=jn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(jn(a.result),c.oldVersion,c.newVersion,jn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const AT=["get","getKey","getAll","getAllKeys","count"],wT=["put","add","delete","clear"],va=new Map;function eh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(va.get(e))return va.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=wT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||AT.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return va.set(e,i),i}ET(t=>({...t,get:(e,n,r)=>eh(e,n)||t.get(e,n,r),has:(e,n)=>!!eh(e,n)||t.has(e,n)}));class bT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RT(t){return t.getComponent()?.type==="VERSION"}const za="@firebase/app",th="0.14.8";const bn=new Vd("@firebase/app"),ST="@firebase/app-compat",CT="@firebase/analytics-compat",PT="@firebase/analytics",VT="@firebase/app-check-compat",DT="@firebase/app-check",xT="@firebase/auth",NT="@firebase/auth-compat",OT="@firebase/database",kT="@firebase/data-connect",MT="@firebase/database-compat",LT="@firebase/functions",FT="@firebase/functions-compat",BT="@firebase/installations",UT="@firebase/installations-compat",jT="@firebase/messaging",$T="@firebase/messaging-compat",HT="@firebase/performance",qT="@firebase/performance-compat",zT="@firebase/remote-config",GT="@firebase/remote-config-compat",KT="@firebase/storage",WT="@firebase/storage-compat",QT="@firebase/firestore",JT="@firebase/ai",YT="@firebase/firestore-compat",XT="firebase",ZT="12.9.0";const Ga="[DEFAULT]",eI={[za]:"fire-core",[ST]:"fire-core-compat",[PT]:"fire-analytics",[CT]:"fire-analytics-compat",[DT]:"fire-app-check",[VT]:"fire-app-check-compat",[xT]:"fire-auth",[NT]:"fire-auth-compat",[OT]:"fire-rtdb",[kT]:"fire-data-connect",[MT]:"fire-rtdb-compat",[LT]:"fire-fn",[FT]:"fire-fn-compat",[BT]:"fire-iid",[UT]:"fire-iid-compat",[jT]:"fire-fcm",[$T]:"fire-fcm-compat",[HT]:"fire-perf",[qT]:"fire-perf-compat",[zT]:"fire-rc",[GT]:"fire-rc-compat",[KT]:"fire-gcs",[WT]:"fire-gcs-compat",[QT]:"fire-fst",[YT]:"fire-fst-compat",[JT]:"fire-vertex","fire-js":"fire-js",[XT]:"fire-js-all"};const eo=new Map,tI=new Map,Ka=new Map;function nh(t,e){try{t.container.addComponent(e)}catch(n){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function to(t){const e=t.name;if(Ka.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;Ka.set(e,t);for(const n of eo.values())nh(n,t);for(const n of tI.values())nh(n,t);return!0}function nI(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function rI(t){return t==null?!1:t.settings!==void 0}const sI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$n=new Pd("app","Firebase",sI);class iI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}const oI=ZT;function Nd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ga,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $n.create("bad-app-name",{appName:String(s)});if(n||(n=Cd()),!n)throw $n.create("no-options");const i=eo.get(s);if(i){if(Zi(n,i.options)&&Zi(r,i.config))return i;throw $n.create("duplicate-app",{appName:s})}const a=new cT(s);for(const c of Ka.values())a.addComponent(c);const l=new iI(n,r,a);return eo.set(s,l),l}function aI(t=Ga){const e=eo.get(t);if(!e&&t===Ga&&Cd())return Nd();if(!e)throw $n.create("no-app",{appName:t});return e}function Br(t,e,n){let r=eI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(a.join(" "));return}to(new Qs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const lI="firebase-heartbeat-database",cI=1,Js="firebase-heartbeat-store";let Ta=null;function Od(){return Ta||(Ta=IT(lI,cI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Js)}catch(n){console.warn(n)}}}}).catch(t=>{throw $n.create("idb-open",{originalErrorMessage:t.message})})),Ta}async function uI(t){try{const n=(await Od()).transaction(Js),r=await n.objectStore(Js).get(kd(t));return await n.done,r}catch(e){if(e instanceof Xr)bn.warn(e.message);else{const n=$n.create("idb-get",{originalErrorMessage:e?.message});bn.warn(n.message)}}}async function rh(t,e){try{const r=(await Od()).transaction(Js,"readwrite");await r.objectStore(Js).put(e,kd(t)),await r.done}catch(n){if(n instanceof Xr)bn.warn(n.message);else{const r=$n.create("idb-set",{originalErrorMessage:n?.message});bn.warn(r.message)}}}function kd(t){return`${t.name}!${t.options.appId}`}const hI=1024,fI=30;class dI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=sh();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>fI){const s=gI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sh(),{heartbeatsToSend:n,unsentEntries:r}=pI(this._heartbeatsCache.heartbeats),s=Xi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return bn.warn(e),""}}}function sh(){return new Date().toISOString().substring(0,10)}function pI(t,e=hI){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),ih(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ih(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tT()?nT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rh(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ih(t){return Xi(JSON.stringify({version:2,heartbeats:t})).length}function gI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function _I(t){to(new Qs("platform-logger",e=>new bT(e),"PRIVATE")),to(new Qs("heartbeat",e=>new dI(e),"PRIVATE")),Br(za,th,t),Br(za,th,"esm2020"),Br("fire-js","")}_I("");var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Hn,Md;(function(){var t;function e(A,y){function I(){}I.prototype=y.prototype,A.F=y.prototype,A.prototype=new I,A.prototype.constructor=A,A.D=function(b,w,C){for(var E=Array(arguments.length-2),He=2;He<arguments.length;He++)E[He-2]=arguments[He];return y.prototype[w].apply(b,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,y,I){I||(I=0);const b=Array(16);if(typeof y=="string")for(var w=0;w<16;++w)b[w]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(w=0;w<16;++w)b[w]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=A.g[0],I=A.g[1],w=A.g[2];let C=A.g[3],E;E=y+(C^I&(w^C))+b[0]+3614090360&4294967295,y=I+(E<<7&4294967295|E>>>25),E=C+(w^y&(I^w))+b[1]+3905402710&4294967295,C=y+(E<<12&4294967295|E>>>20),E=w+(I^C&(y^I))+b[2]+606105819&4294967295,w=C+(E<<17&4294967295|E>>>15),E=I+(y^w&(C^y))+b[3]+3250441966&4294967295,I=w+(E<<22&4294967295|E>>>10),E=y+(C^I&(w^C))+b[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=C+(w^y&(I^w))+b[5]+1200080426&4294967295,C=y+(E<<12&4294967295|E>>>20),E=w+(I^C&(y^I))+b[6]+2821735955&4294967295,w=C+(E<<17&4294967295|E>>>15),E=I+(y^w&(C^y))+b[7]+4249261313&4294967295,I=w+(E<<22&4294967295|E>>>10),E=y+(C^I&(w^C))+b[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=C+(w^y&(I^w))+b[9]+2336552879&4294967295,C=y+(E<<12&4294967295|E>>>20),E=w+(I^C&(y^I))+b[10]+4294925233&4294967295,w=C+(E<<17&4294967295|E>>>15),E=I+(y^w&(C^y))+b[11]+2304563134&4294967295,I=w+(E<<22&4294967295|E>>>10),E=y+(C^I&(w^C))+b[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=C+(w^y&(I^w))+b[13]+4254626195&4294967295,C=y+(E<<12&4294967295|E>>>20),E=w+(I^C&(y^I))+b[14]+2792965006&4294967295,w=C+(E<<17&4294967295|E>>>15),E=I+(y^w&(C^y))+b[15]+1236535329&4294967295,I=w+(E<<22&4294967295|E>>>10),E=y+(w^C&(I^w))+b[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=C+(I^w&(y^I))+b[6]+3225465664&4294967295,C=y+(E<<9&4294967295|E>>>23),E=w+(y^I&(C^y))+b[11]+643717713&4294967295,w=C+(E<<14&4294967295|E>>>18),E=I+(C^y&(w^C))+b[0]+3921069994&4294967295,I=w+(E<<20&4294967295|E>>>12),E=y+(w^C&(I^w))+b[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=C+(I^w&(y^I))+b[10]+38016083&4294967295,C=y+(E<<9&4294967295|E>>>23),E=w+(y^I&(C^y))+b[15]+3634488961&4294967295,w=C+(E<<14&4294967295|E>>>18),E=I+(C^y&(w^C))+b[4]+3889429448&4294967295,I=w+(E<<20&4294967295|E>>>12),E=y+(w^C&(I^w))+b[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=C+(I^w&(y^I))+b[14]+3275163606&4294967295,C=y+(E<<9&4294967295|E>>>23),E=w+(y^I&(C^y))+b[3]+4107603335&4294967295,w=C+(E<<14&4294967295|E>>>18),E=I+(C^y&(w^C))+b[8]+1163531501&4294967295,I=w+(E<<20&4294967295|E>>>12),E=y+(w^C&(I^w))+b[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=C+(I^w&(y^I))+b[2]+4243563512&4294967295,C=y+(E<<9&4294967295|E>>>23),E=w+(y^I&(C^y))+b[7]+1735328473&4294967295,w=C+(E<<14&4294967295|E>>>18),E=I+(C^y&(w^C))+b[12]+2368359562&4294967295,I=w+(E<<20&4294967295|E>>>12),E=y+(I^w^C)+b[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=C+(y^I^w)+b[8]+2272392833&4294967295,C=y+(E<<11&4294967295|E>>>21),E=w+(C^y^I)+b[11]+1839030562&4294967295,w=C+(E<<16&4294967295|E>>>16),E=I+(w^C^y)+b[14]+4259657740&4294967295,I=w+(E<<23&4294967295|E>>>9),E=y+(I^w^C)+b[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=C+(y^I^w)+b[4]+1272893353&4294967295,C=y+(E<<11&4294967295|E>>>21),E=w+(C^y^I)+b[7]+4139469664&4294967295,w=C+(E<<16&4294967295|E>>>16),E=I+(w^C^y)+b[10]+3200236656&4294967295,I=w+(E<<23&4294967295|E>>>9),E=y+(I^w^C)+b[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=C+(y^I^w)+b[0]+3936430074&4294967295,C=y+(E<<11&4294967295|E>>>21),E=w+(C^y^I)+b[3]+3572445317&4294967295,w=C+(E<<16&4294967295|E>>>16),E=I+(w^C^y)+b[6]+76029189&4294967295,I=w+(E<<23&4294967295|E>>>9),E=y+(I^w^C)+b[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=C+(y^I^w)+b[12]+3873151461&4294967295,C=y+(E<<11&4294967295|E>>>21),E=w+(C^y^I)+b[15]+530742520&4294967295,w=C+(E<<16&4294967295|E>>>16),E=I+(w^C^y)+b[2]+3299628645&4294967295,I=w+(E<<23&4294967295|E>>>9),E=y+(w^(I|~C))+b[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=C+(I^(y|~w))+b[7]+1126891415&4294967295,C=y+(E<<10&4294967295|E>>>22),E=w+(y^(C|~I))+b[14]+2878612391&4294967295,w=C+(E<<15&4294967295|E>>>17),E=I+(C^(w|~y))+b[5]+4237533241&4294967295,I=w+(E<<21&4294967295|E>>>11),E=y+(w^(I|~C))+b[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=C+(I^(y|~w))+b[3]+2399980690&4294967295,C=y+(E<<10&4294967295|E>>>22),E=w+(y^(C|~I))+b[10]+4293915773&4294967295,w=C+(E<<15&4294967295|E>>>17),E=I+(C^(w|~y))+b[1]+2240044497&4294967295,I=w+(E<<21&4294967295|E>>>11),E=y+(w^(I|~C))+b[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=C+(I^(y|~w))+b[15]+4264355552&4294967295,C=y+(E<<10&4294967295|E>>>22),E=w+(y^(C|~I))+b[6]+2734768916&4294967295,w=C+(E<<15&4294967295|E>>>17),E=I+(C^(w|~y))+b[13]+1309151649&4294967295,I=w+(E<<21&4294967295|E>>>11),E=y+(w^(I|~C))+b[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=C+(I^(y|~w))+b[11]+3174756917&4294967295,C=y+(E<<10&4294967295|E>>>22),E=w+(y^(C|~I))+b[2]+718787259&4294967295,w=C+(E<<15&4294967295|E>>>17),E=I+(C^(w|~y))+b[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,A.g[2]=A.g[2]+w&4294967295,A.g[3]=A.g[3]+C&4294967295}r.prototype.v=function(A,y){y===void 0&&(y=A.length);const I=y-this.blockSize,b=this.C;let w=this.h,C=0;for(;C<y;){if(w==0)for(;C<=I;)s(this,A,C),C+=this.blockSize;if(typeof A=="string"){for(;C<y;)if(b[w++]=A.charCodeAt(C++),w==this.blockSize){s(this,b),w=0;break}}else for(;C<y;)if(b[w++]=A[C++],w==this.blockSize){s(this,b),w=0;break}}this.h=w,this.o+=y},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;y=this.o*8;for(var I=A.length-8;I<A.length;++I)A[I]=y&255,y/=256;for(this.v(A),A=Array(16),y=0,I=0;I<4;++I)for(let b=0;b<32;b+=8)A[y++]=this.g[I]>>>b&255;return A};function i(A,y){var I=l;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=y(A)}function a(A,y){this.h=y;const I=[];let b=!0;for(let w=A.length-1;w>=0;w--){const C=A[w]|0;b&&C==y||(I[w]=C,b=!1)}this.g=I}var l={};function c(A){return-128<=A&&A<128?i(A,function(y){return new a([y|0],y<0?-1:0)}):new a([A|0],A<0?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(A<0)return R(h(-A));const y=[];let I=1;for(let b=0;A>=I;b++)y[b]=A/I|0,I*=4294967296;return new a(y,0)}function d(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return R(d(A.substring(1),y));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(y,8));let b=p;for(let C=0;C<A.length;C+=8){var w=Math.min(8,A.length-C);const E=parseInt(A.substring(C,C+w),y);w<8?(w=h(Math.pow(y,w)),b=b.j(w).add(h(E))):(b=b.j(I),b=b.add(h(E)))}return b}var p=c(0),g=c(1),v=c(16777216);t=a.prototype,t.m=function(){if(D(this))return-R(this).m();let A=0,y=1;for(let I=0;I<this.g.length;I++){const b=this.i(I);A+=(b>=0?b:4294967296+b)*y,y*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if(D(this))return"-"+R(this).toString(A);const y=h(Math.pow(A,6));var I=this;let b="";for(;;){const w=G(I,y).g;I=N(I,w.j(y));let C=((I.g.length>0?I.g[0]:I.h)>>>0).toString(A);if(I=w,V(I))return C+b;for(;C.length<6;)C="0"+C;b=C+b}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(let y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function D(A){return A.h==-1}t.l=function(A){return A=N(this,A),D(A)?-1:V(A)?0:1};function R(A){const y=A.g.length,I=[];for(let b=0;b<y;b++)I[b]=~A.g[b];return new a(I,~A.h).add(g)}t.abs=function(){return D(this)?R(this):this},t.add=function(A){const y=Math.max(this.g.length,A.g.length),I=[];let b=0;for(let w=0;w<=y;w++){let C=b+(this.i(w)&65535)+(A.i(w)&65535),E=(C>>>16)+(this.i(w)>>>16)+(A.i(w)>>>16);b=E>>>16,C&=65535,E&=65535,I[w]=E<<16|C}return new a(I,I[I.length-1]&-2147483648?-1:0)};function N(A,y){return A.add(R(y))}t.j=function(A){if(V(this)||V(A))return p;if(D(this))return D(A)?R(this).j(R(A)):R(R(this).j(A));if(D(A))return R(this.j(R(A)));if(this.l(v)<0&&A.l(v)<0)return h(this.m()*A.m());const y=this.g.length+A.g.length,I=[];for(var b=0;b<2*y;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(let w=0;w<A.g.length;w++){const C=this.i(b)>>>16,E=this.i(b)&65535,He=A.i(w)>>>16,wt=A.i(w)&65535;I[2*b+2*w]+=E*wt,O(I,2*b+2*w),I[2*b+2*w+1]+=C*wt,O(I,2*b+2*w+1),I[2*b+2*w+1]+=E*He,O(I,2*b+2*w+1),I[2*b+2*w+2]+=C*He,O(I,2*b+2*w+2)}for(A=0;A<y;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=y;A<2*y;A++)I[A]=0;return new a(I,0)};function O(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function q(A,y){this.g=A,this.h=y}function G(A,y){if(V(y))throw Error("division by zero");if(V(A))return new q(p,p);if(D(A))return y=G(R(A),y),new q(R(y.g),R(y.h));if(D(y))return y=G(A,R(y)),new q(R(y.g),y.h);if(A.g.length>30){if(D(A)||D(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,b=y;b.l(A)<=0;)I=de(I),b=de(b);var w=Ee(I,1),C=Ee(b,1);for(b=Ee(b,2),I=Ee(I,2);!V(b);){var E=C.add(b);E.l(A)<=0&&(w=w.add(I),C=E),b=Ee(b,1),I=Ee(I,1)}return y=N(A,w.j(y)),new q(w,y)}for(w=p;A.l(y)>=0;){for(I=Math.max(1,Math.floor(A.m()/y.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),C=h(I),E=C.j(y);D(E)||E.l(A)>0;)I-=b,C=h(I),E=C.j(y);V(C)&&(C=g),w=w.add(C),A=N(A,E)}return new q(w,A)}t.B=function(A){return G(this,A).h},t.and=function(A){const y=Math.max(this.g.length,A.g.length),I=[];for(let b=0;b<y;b++)I[b]=this.i(b)&A.i(b);return new a(I,this.h&A.h)},t.or=function(A){const y=Math.max(this.g.length,A.g.length),I=[];for(let b=0;b<y;b++)I[b]=this.i(b)|A.i(b);return new a(I,this.h|A.h)},t.xor=function(A){const y=Math.max(this.g.length,A.g.length),I=[];for(let b=0;b<y;b++)I[b]=this.i(b)^A.i(b);return new a(I,this.h^A.h)};function de(A){const y=A.g.length+1,I=[];for(let b=0;b<y;b++)I[b]=A.i(b)<<1|A.i(b-1)>>>31;return new a(I,A.h)}function Ee(A,y){const I=y>>5;y%=32;const b=A.g.length-I,w=[];for(let C=0;C<b;C++)w[C]=y>0?A.i(C+I)>>>y|A.i(C+I+1)<<32-y:A.i(C+I);return new a(w,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Md=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Hn=a}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});var Si=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ld,As,Fd,Li,Wa,Bd,Ud,jd;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Si=="object"&&Si];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var P=o[m];if(!(P in f))break e;f=f[P]}o=o[o.length-1],m=f[o],u=u(m),u!=m&&u!=null&&e(f,o,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(u){var f=[],m;for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&f.push([m,u[m]]);return f}});var i=i||{},a=this||self;function l(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function c(o,u,f){return o.call.apply(o.bind,arguments)}function h(o,u,f){return h=c,h.apply(null,arguments)}function d(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function p(o,u){function f(){}f.prototype=u.prototype,o.Z=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(m,P,x){for(var K=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)K[pe-2]=arguments[pe];return u.prototype[P].apply(m,K)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function v(o){const u=o.length;if(u>0){const f=Array(u);for(let m=0;m<u;m++)f[m]=o[m];return f}return[]}function V(o,u){for(let m=1;m<arguments.length;m++){const P=arguments[m];var f=typeof P;if(f=f!="object"?f:P?Array.isArray(P)?"array":f:"null",f=="array"||f=="object"&&typeof P.length=="number"){f=o.length||0;const x=P.length||0;o.length=f+x;for(let K=0;K<x;K++)o[f+K]=P[K]}else o.push(P)}}class D{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function R(o){a.setTimeout(()=>{throw o},0)}function N(){var o=A;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class O{constructor(){this.h=this.g=null}add(u,f){const m=q.get();m.set(u,f),this.h?this.h.next=m:this.g=m,this.h=m}}var q=new D(()=>new G,o=>o.reset());class G{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let de,Ee=!1,A=new O,y=()=>{const o=Promise.resolve(void 0);de=()=>{o.then(I)}};function I(){for(var o;o=N();){try{o.h.call(o.g)}catch(f){R(f)}var u=q;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}Ee=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,u),a.removeEventListener("test",f,u)}catch{}return o})();function E(o){return/^[\s\xa0]*$/.test(o)}function He(o,u){w.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}p(He,w),He.prototype.init=function(o,u){const f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var wt="closure_listenable_"+(Math.random()*1e6|0),qe=0;function be(o,u,f,m,P){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!m,this.ha=P,this.key=++qe,this.da=this.fa=!1}function ve(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function bt(o,u,f){for(const m in o)u.call(f,o[m],m,o)}function Jt(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function Pt(o){const u={};for(const f in o)u[f]=o[f];return u}const st="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fn(o,u){let f,m;for(let P=1;P<arguments.length;P++){m=arguments[P];for(f in m)o[f]=m[f];for(let x=0;x<st.length;x++)f=st[x],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function jt(o){this.src=o,this.g={},this.h=0}jt.prototype.add=function(o,u,f,m,P){const x=o.toString();o=this.g[x],o||(o=this.g[x]=[],this.h++);const K=ut(o,u,m,P);return K>-1?(u=o[K],f||(u.fa=!1)):(u=new be(u,this.src,x,!!m,P),u.fa=f,o.push(u)),u};function $t(o,u){const f=u.type;if(f in o.g){var m=o.g[f],P=Array.prototype.indexOf.call(m,u,void 0),x;(x=P>=0)&&Array.prototype.splice.call(m,P,1),x&&(ve(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function ut(o,u,f,m){for(let P=0;P<o.length;++P){const x=o[P];if(!x.da&&x.listener==u&&x.capture==!!f&&x.ha==m)return P}return-1}var L="closure_lm_"+(Math.random()*1e6|0),Z={};function J(o,u,f,m,P){if(Array.isArray(u)){for(let x=0;x<u.length;x++)J(o,u[x],f,m,P);return null}return f=Q(f),o&&o[wt]?o.J(u,f,l(m)?!!m.capture:!1,P):re(o,u,f,!1,m,P)}function re(o,u,f,m,P,x){if(!u)throw Error("Invalid event type");const K=l(P)?!!P.capture:!!P;let pe=B(o);if(pe||(o[L]=pe=new jt(o)),f=pe.add(u,f,m,K,x),f.proxy)return f;if(m=ge(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)C||(P=K),P===void 0&&(P=!1),o.addEventListener(u.toString(),m,P);else if(o.attachEvent)o.attachEvent(S(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ge(){function o(f){return u.call(o.src,o.listener,f)}const u=k;return o}function _(o,u,f,m,P){if(Array.isArray(u))for(var x=0;x<u.length;x++)_(o,u[x],f,m,P);else m=l(m)?!!m.capture:!!m,f=Q(f),o&&o[wt]?(o=o.i,x=String(u).toString(),x in o.g&&(u=o.g[x],f=ut(u,f,m,P),f>-1&&(ve(u[f]),Array.prototype.splice.call(u,f,1),u.length==0&&(delete o.g[x],o.h--)))):o&&(o=B(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ut(u,f,m,P)),(f=o>-1?u[o]:null)&&T(f))}function T(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[wt])$t(u.i,o);else{var f=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(f,m,o.capture):u.detachEvent?u.detachEvent(S(f),m):u.addListener&&u.removeListener&&u.removeListener(m),(f=B(u))?($t(f,o),f.h==0&&(f.src=null,u[L]=null)):ve(o)}}}function S(o){return o in Z?Z[o]:Z[o]="on"+o}function k(o,u){if(o.da)o=!0;else{u=new He(u,this);const f=o.listener,m=o.ha||o.src;o.fa&&T(o),o=f.call(m,u)}return o}function B(o){return o=o[L],o instanceof jt?o:null}var M="__closure_events_fn_"+(Math.random()*1e9>>>0);function Q(o){return typeof o=="function"?o:(o[M]||(o[M]=function(u){return o.handleEvent(u)}),o[M])}function H(){b.call(this),this.i=new jt(this),this.M=this,this.G=null}p(H,b),H.prototype[wt]=!0,H.prototype.removeEventListener=function(o,u,f,m){_(this,o,u,f,m)};function $(o,u){var f,m=o.G;if(m)for(f=[];m;m=m.G)f.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new w(u,o);else if(u instanceof w)u.target=u.target||o;else{var P=u;u=new w(m,o),fn(u,P)}P=!0;let x,K;if(f)for(K=f.length-1;K>=0;K--)x=u.g=f[K],P=U(x,m,!0,u)&&P;if(x=u.g=o,P=U(x,m,!0,u)&&P,P=U(x,m,!1,u)&&P,f)for(K=0;K<f.length;K++)x=u.g=f[K],P=U(x,m,!1,u)&&P}H.prototype.N=function(){if(H.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const f=o.g[u];for(let m=0;m<f.length;m++)ve(f[m]);delete o.g[u],o.h--}}this.G=null},H.prototype.J=function(o,u,f,m){return this.i.add(String(o),u,!1,f,m)},H.prototype.K=function(o,u,f,m){return this.i.add(String(o),u,!0,f,m)};function U(o,u,f,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let P=!0;for(let x=0;x<u.length;++x){const K=u[x];if(K&&!K.da&&K.capture==f){const pe=K.listener,Qe=K.ha||K.src;K.fa&&$t(o.i,K),P=pe.call(Qe,m)!==!1&&P}}return P&&!m.defaultPrevented}function ie(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function X(o){o.g=ie(()=>{o.g=null,o.i&&(o.i=!1,X(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class se extends b{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:X(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(o){b.call(this),this.h=o,this.g={}}p(ae,b);var me=[];function Ve(o){bt(o.g,function(u,f){this.g.hasOwnProperty(f)&&T(u)},o),o.g={}}ae.prototype.N=function(){ae.Z.N.call(this),Ve(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=a.JSON.stringify,ht=a.JSON.parse,ft=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Vt(){}function Dt(){}var Ht={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ar(){w.call(this,"d")}p(Ar,w);function it(){w.call(this,"c")}p(it,w);var et={},rs=null;function tr(){return rs=rs||new H}et.Ia="serverreachability";function hc(o){w.call(this,et.Ia,o)}p(hc,w);function ss(o){const u=tr();$(u,new hc(u))}et.STAT_EVENT="statevent";function fc(o,u){w.call(this,et.STAT_EVENT,o),this.stat=u}p(fc,w);function Et(o){const u=tr();$(u,new fc(u,o))}et.Ja="timingevent";function dc(o,u){w.call(this,et.Ja,o),this.size=u}p(dc,w);function is(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function os(){this.g=!0}os.prototype.ua=function(){this.g=!1};function pm(o,u,f,m,P,x){o.info(function(){if(o.g)if(x){var K="",pe=x.split("&");for(let Ne=0;Ne<pe.length;Ne++){var Qe=pe[Ne].split("=");if(Qe.length>1){const tt=Qe[0];Qe=Qe[1];const Xt=tt.split("_");K=Xt.length>=2&&Xt[1]=="type"?K+(tt+"="+Qe+"&"):K+(tt+"=redacted&")}}}else K=null;else K=x;return"XMLHTTP REQ ("+m+") [attempt "+P+"]: "+u+`
`+f+`
`+K})}function mm(o,u,f,m,P,x,K){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+P+"]: "+u+`
`+f+`
`+x+" "+K})}function wr(o,u,f,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+_m(o,f)+(m?" "+m:"")})}function gm(o,u){o.info(function(){return"TIMEOUT: "+u})}os.prototype.info=function(){};function _m(o,u){if(!o.g)return u;if(!u)return null;try{const x=JSON.parse(u);if(x){for(o=0;o<x.length;o++)if(Array.isArray(x[o])){var f=x[o];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var P=m[0];if(P!="noop"&&P!="stop"&&P!="close")for(let K=1;K<m.length;K++)m[K]=""}}}}return Ae(x)}catch{return u}}var pi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mc;function $o(){}p($o,Vt),$o.prototype.g=function(){return new XMLHttpRequest},mc=new $o;function as(o){return encodeURIComponent(String(o))}function ym(o){var u=1;o=o.split(":");const f=[];for(;u>0&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function Pn(o,u,f,m){this.j=o,this.i=u,this.l=f,this.S=m||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gc}function gc(){this.i=null,this.g="",this.h=!1}var _c={},Ho={};function qo(o,u,f){o.M=1,o.A=gi(Yt(u)),o.u=f,o.R=!0,yc(o,null)}function yc(o,u){o.F=Date.now(),mi(o),o.B=Yt(o.A);var f=o.B,m=o.S;Array.isArray(m)||(m=[String(m)]),Dc(f.i,"t",m),o.C=0,f=o.j.L,o.h=new gc,o.g=Qc(o.j,f?u:null,!o.u),o.P>0&&(o.O=new se(h(o.Y,o,o.g),o.P)),u=o.V,f=o.g,m=o.ba;var P="readystatechange";Array.isArray(P)||(P&&(me[0]=P.toString()),P=me);for(let x=0;x<P.length;x++){const K=J(f,P[x],m||u.handleEvent,!1,u.h||u);if(!K)break;u.g[K.key]=K}u=o.J?Pt(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),ss(),pm(o.i,o.v,o.B,o.l,o.S,o.u)}Pn.prototype.ba=function(o){o=o.target;const u=this.O;u&&xn(o)==3?u.j():this.Y(o)},Pn.prototype.Y=function(o){try{if(o==this.g)e:{const pe=xn(this.g),Qe=this.g.ya(),Ne=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||Fc(this.g)))){this.K||pe!=4||Qe==7||(Qe==8||Ne<=0?ss(3):ss(2)),zo(this);var u=this.g.ca();this.X=u;var f=Em(this);if(this.o=u==200,mm(this.i,this.v,this.B,this.l,this.S,pe,u),this.o){if(this.U&&!this.L){t:{if(this.g){var m,P=this.g;if((m=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(m)){var x=m;break t}}x=null}if(o=x)wr(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Go(this,o);else{this.o=!1,this.m=3,Et(12),nr(this),ls(this);break e}}if(this.R){o=!0;let tt;for(;!this.K&&this.C<f.length;)if(tt=vm(this,f),tt==Ho){pe==4&&(this.m=4,Et(14),o=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==_c){this.m=4,Et(15),wr(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else wr(this.i,this.l,tt,null),Go(this,tt);if(Ec(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||f.length!=0||this.h.h||(this.m=1,Et(16),o=!1),this.o=this.o&&o,!o)wr(this.i,this.l,f,"[Invalid Chunked Response]"),nr(this),ls(this);else if(f.length>0&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.aa&&!K.P&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),ea(K),K.P=!0,Et(11))}}else wr(this.i,this.l,f,null),Go(this,f);pe==4&&nr(this),this.o&&!this.K&&(pe==4?zc(this.j,this):(this.o=!1,mi(this)))}else Om(this.g),u==400&&f.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),nr(this),ls(this)}}}catch{}};function Em(o){if(!Ec(o))return o.g.la();const u=Fc(o.g);if(u==="")return"";let f="";const m=u.length,P=xn(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return nr(o),ls(o),"";o.h.i=new a.TextDecoder}for(let x=0;x<m;x++)o.h.h=!0,f+=o.h.i.decode(u[x],{stream:!(P&&x==m-1)});return u.length=0,o.h.g+=f,o.C=0,o.h.g}function Ec(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function vm(o,u){var f=o.C,m=u.indexOf(`
`,f);return m==-1?Ho:(f=Number(u.substring(f,m)),isNaN(f)?_c:(m+=1,m+f>u.length?Ho:(u=u.slice(m,m+f),o.C=m+f,u)))}Pn.prototype.cancel=function(){this.K=!0,nr(this)};function mi(o){o.T=Date.now()+o.H,vc(o,o.H)}function vc(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=is(h(o.aa,o),u)}function zo(o){o.D&&(a.clearTimeout(o.D),o.D=null)}Pn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(gm(this.i,this.B),this.M!=2&&(ss(),Et(17)),nr(this),this.m=2,ls(this)):vc(this,this.T-o)};function ls(o){o.j.I==0||o.K||zc(o.j,o)}function nr(o){zo(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,Ve(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function Go(o,u){try{var f=o.j;if(f.I!=0&&(f.g==o||Ko(f.h,o))){if(!o.L&&Ko(f.h,o)&&f.I==3){try{var m=f.Ba.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var P=m;if(P[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)Ti(f),Ei(f);else break e;Zo(f),Et(18)}}else f.xa=P[1],0<f.xa-f.K&&P[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=is(h(f.Va,f),6e3));Ac(f.h)<=1&&f.ta&&(f.ta=void 0)}else sr(f,11)}else if((o.L||f.g==o)&&Ti(f),!E(u))for(P=f.Ba.g.parse(u),u=0;u<P.length;u++){let Ne=P[u];const tt=Ne[0];if(!(tt<=f.K))if(f.K=tt,Ne=Ne[1],f.I==2)if(Ne[0]=="c"){f.M=Ne[1],f.ba=Ne[2];const Xt=Ne[3];Xt!=null&&(f.ka=Xt,f.j.info("VER="+f.ka));const ir=Ne[4];ir!=null&&(f.za=ir,f.j.info("SVER="+f.za));const Nn=Ne[5];Nn!=null&&typeof Nn=="number"&&Nn>0&&(m=1.5*Nn,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const On=o.g;if(On){const Ai=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ai){var x=m.h;x.g||Ai.indexOf("spdy")==-1&&Ai.indexOf("quic")==-1&&Ai.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Wo(x,x.h),x.h=null))}if(m.G){const ta=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;ta&&(m.wa=ta,Me(m.J,m.G,ta))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var K=o;if(m.na=Wc(m,m.L?m.ba:null,m.W),K.L){wc(m.h,K);var pe=K,Qe=m.O;Qe&&(pe.H=Qe),pe.D&&(zo(pe),mi(pe)),m.g=K}else Hc(m);f.i.length>0&&vi(f)}else Ne[0]!="stop"&&Ne[0]!="close"||sr(f,7);else f.I==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?sr(f,7):Xo(f):Ne[0]!="noop"&&f.l&&f.l.qa(Ne),f.A=0)}}ss(4)}catch{}}var Tm=class{constructor(o,u){this.g=o,this.map=u}};function Tc(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ic(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ac(o){return o.h?1:o.g?o.g.size:0}function Ko(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Wo(o,u){o.g?o.g.add(u):o.h=u}function wc(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Tc.prototype.cancel=function(){if(this.i=bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function bc(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.G);return u}return v(o.i)}var Rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Im(o,u){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const m=o[f].indexOf("=");let P,x=null;m>=0?(P=o[f].substring(0,m),x=o[f].substring(m+1)):P=o[f],u(P,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Vn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof Vn?(this.l=o.l,cs(this,o.j),this.o=o.o,this.g=o.g,us(this,o.u),this.h=o.h,Qo(this,xc(o.i)),this.m=o.m):o&&(u=String(o).match(Rc))?(this.l=!1,cs(this,u[1]||"",!0),this.o=hs(u[2]||""),this.g=hs(u[3]||"",!0),us(this,u[4]),this.h=hs(u[5]||"",!0),Qo(this,u[6]||"",!0),this.m=hs(u[7]||"")):(this.l=!1,this.i=new ds(null,this.l))}Vn.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(fs(u,Sc,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(fs(u,Sc,!0),"@"),o.push(as(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(fs(f,f.charAt(0)=="/"?bm:wm,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",fs(f,Sm)),o.join("")},Vn.prototype.resolve=function(o){const u=Yt(this);let f=!!o.j;f?cs(u,o.j):f=!!o.o,f?u.o=o.o:f=!!o.g,f?u.g=o.g:f=o.u!=null;var m=o.h;if(f)us(u,o.u);else if(f=!!o.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var P=u.h.lastIndexOf("/");P!=-1&&(m=u.h.slice(0,P+1)+m)}if(P=m,P==".."||P==".")m="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){m=P.lastIndexOf("/",0)==0,P=P.split("/");const x=[];for(let K=0;K<P.length;){const pe=P[K++];pe=="."?m&&K==P.length&&x.push(""):pe==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),m&&K==P.length&&x.push("")):(x.push(pe),m=!0)}m=x.join("/")}else m=P}return f?u.h=m:f=o.i.toString()!=="",f?Qo(u,xc(o.i)):f=!!o.m,f&&(u.m=o.m),u};function Yt(o){return new Vn(o)}function cs(o,u,f){o.j=f?hs(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function us(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function Qo(o,u,f){u instanceof ds?(o.i=u,Cm(o.i,o.l)):(f||(u=fs(u,Rm)),o.i=new ds(u,o.l))}function Me(o,u,f){o.i.set(u,f)}function gi(o){return Me(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function hs(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function fs(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,Am),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Am(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Sc=/[#\/\?@]/g,wm=/[#\?:]/g,bm=/[#\?]/g,Rm=/[#\?@]/g,Sm=/#/g;function ds(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function rr(o){o.g||(o.g=new Map,o.h=0,o.i&&Im(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}t=ds.prototype,t.add=function(o,u){rr(this),this.i=null,o=br(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function Cc(o,u){rr(o),u=br(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Pc(o,u){return rr(o),u=br(o,u),o.g.has(u)}t.forEach=function(o,u){rr(this),this.g.forEach(function(f,m){f.forEach(function(P){o.call(u,P,m,this)},this)},this)};function Vc(o,u){rr(o);let f=[];if(typeof u=="string")Pc(o,u)&&(f=f.concat(o.g.get(br(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)f=f.concat(o[u]);return f}t.set=function(o,u){return rr(this),this.i=null,o=br(this,o),Pc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=Vc(this,o),o.length>0?String(o[0]):u):u};function Dc(o,u,f){Cc(o,u),f.length>0&&(o.i=null,o.g.set(br(o,u),v(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let m=0;m<u.length;m++){var f=u[m];const P=as(f);f=Vc(this,f);for(let x=0;x<f.length;x++){let K=P;f[x]!==""&&(K+="="+as(f[x])),o.push(K)}}return this.i=o.join("&")};function xc(o){const u=new ds;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function br(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Cm(o,u){u&&!o.j&&(rr(o),o.i=null,o.g.forEach(function(f,m){const P=m.toLowerCase();m!=P&&(Cc(this,m),Dc(this,P,f))},o)),o.j=u}function Pm(o,u){const f=new os;if(a.Image){const m=new Image;m.onload=d(Dn,f,"TestLoadImage: loaded",!0,u,m),m.onerror=d(Dn,f,"TestLoadImage: error",!1,u,m),m.onabort=d(Dn,f,"TestLoadImage: abort",!1,u,m),m.ontimeout=d(Dn,f,"TestLoadImage: timeout",!1,u,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function Vm(o,u){const f=new os,m=new AbortController,P=setTimeout(()=>{m.abort(),Dn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(x=>{clearTimeout(P),x.ok?Dn(f,"TestPingServer: ok",!0,u):Dn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),Dn(f,"TestPingServer: error",!1,u)})}function Dn(o,u,f,m,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),m(f)}catch{}}function Dm(){this.g=new ft}function Jo(o){this.i=o.Sb||null,this.h=o.ab||!1}p(Jo,Vt),Jo.prototype.g=function(){return new _i(this.i,this.h)};function _i(o,u){H.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(_i,H),t=_i.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,ms(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nc(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Nc(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?ps(this):ms(this),this.readyState==3&&Nc(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,ps(this))},t.Na=function(o){this.g&&(this.response=o,ps(this))},t.ga=function(){this.g&&ps(this)};function ps(o){o.readyState=4,o.l=null,o.j=null,o.B=null,ms(o)}t.setRequestHeader=function(o,u){this.A.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function ms(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Oc(o){let u="";return bt(o,function(f,m){u+=m,u+=":",u+=f,u+=`\r
`}),u}function Yo(o,u,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Oc(f),typeof o=="string"?f!=null&&as(f):Me(o,u,f))}function Ue(o){H.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ue,H);var xm=/^https?$/i,Nm=["POST","PUT"];t=Ue.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,u,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mc.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(x){kc(this,x);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var P in m)f.set(P,m[P]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const x of m.keys())f.set(x,m.get(x));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),P=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Nm,u,void 0)>=0)||m||P||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[x,K]of f)this.g.setRequestHeader(x,K);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(x){kc(this,x)}};function kc(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,Mc(o),yi(o)}function Mc(o){o.A||(o.A=!0,$(o,"complete"),$(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,$(this,"complete"),$(this,"abort"),yi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yi(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Lc(this):this.Xa())},t.Xa=function(){Lc(this)};function Lc(o){if(o.h&&typeof i<"u"){if(o.v&&xn(o)==4)setTimeout(o.Ca.bind(o),0);else if($(o,"readystatechange"),xn(o)==4){o.h=!1;try{const x=o.ca();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var f;if(!(f=u)){var m;if(m=x===0){let K=String(o.D).match(Rc)[1]||null;!K&&a.self&&a.self.location&&(K=a.self.location.protocol.slice(0,-1)),m=!xm.test(K?K.toLowerCase():"")}f=m}if(f)$(o,"complete"),$(o,"success");else{o.o=6;try{var P=xn(o)>2?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.ca()+"]",Mc(o)}}finally{yi(o)}}}}function yi(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,u||$(o,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xn(o){return o.g?o.g.readyState:0}t.ca=function(){try{return xn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),ht(u)}};function Fc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Om(o){const u={};o=(o.g&&xn(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(E(o[m]))continue;var f=ym(o[m]);const P=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const x=u[P]||[];u[P]=x,x.push(f)}Jt(u,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function Bc(o){this.za=0,this.i=[],this.j=new os,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=gs("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=gs("baseRetryDelayMs",5e3,o),this.Za=gs("retryDelaySeedMs",1e4,o),this.Ta=gs("forwardChannelMaxRetries",2,o),this.va=gs("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Tc(o&&o.concurrentRequestLimit),this.Ba=new Dm,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Bc.prototype,t.ka=8,t.I=1,t.connect=function(o,u,f,m){Et(0),this.W=o,this.H=u||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=Wc(this,null,this.W),vi(this)};function Xo(o){if(Uc(o),o.I==3){var u=o.V++,f=Yt(o.J);if(Me(f,"SID",o.M),Me(f,"RID",u),Me(f,"TYPE","terminate"),_s(o,f),u=new Pn(o,o.j,u),u.M=2,u.A=gi(Yt(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=u.A,f=!0),f||(u.g=Qc(u.j,null),u.g.ea(u.A)),u.F=Date.now(),mi(u)}Kc(o)}function Ei(o){o.g&&(ea(o),o.g.cancel(),o.g=null)}function Uc(o){Ei(o),o.v&&(a.clearTimeout(o.v),o.v=null),Ti(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function vi(o){if(!Ic(o.h)&&!o.m){o.m=!0;var u=o.Ea;de||y(),Ee||(de(),Ee=!0),A.add(u,o),o.D=0}}function km(o,u){return Ac(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=is(h(o.Ea,o,u),Gc(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const P=new Pn(this,this.j,o);let x=this.o;if(this.U&&(x?(x=Pt(x),fn(x,this.U)):x=this.U),this.u!==null||this.R||(P.J=x,x=null),this.S)e:{for(var u=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,u>4096){u=f;break e}if(u===4096||f===this.i.length-1){u=f+1;break e}}u=1e3}else u=1e3;u=$c(this,P,u),f=Yt(this.J),Me(f,"RID",o),Me(f,"CVER",22),this.G&&Me(f,"X-HTTP-Session-Id",this.G),_s(this,f),x&&(this.R?u="headers="+as(Oc(x))+"&"+u:this.u&&Yo(f,this.u,x)),Wo(this.h,P),this.Ra&&Me(f,"TYPE","init"),this.S?(Me(f,"$req",u),Me(f,"SID","null"),P.U=!0,qo(P,f,null)):qo(P,f,u),this.I=2}}else this.I==3&&(o?jc(this,o):this.i.length==0||Ic(this.h)||jc(this))};function jc(o,u){var f;u?f=u.l:f=o.V++;const m=Yt(o.J);Me(m,"SID",o.M),Me(m,"RID",f),Me(m,"AID",o.K),_s(o,m),o.u&&o.o&&Yo(m,o.u,o.o),f=new Pn(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),u&&(o.i=u.G.concat(o.i)),u=$c(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Wo(o.h,f),qo(f,m,u)}function _s(o,u){o.H&&bt(o.H,function(f,m){Me(u,m,f)}),o.l&&bt({},function(f,m){Me(u,m,f)})}function $c(o,u,f){f=Math.min(o.i.length,f);const m=o.l?h(o.l.Ka,o.l,o):null;e:{var P=o.i;let pe=-1;for(;;){const Qe=["count="+f];pe==-1?f>0?(pe=P[0].g,Qe.push("ofs="+pe)):pe=0:Qe.push("ofs="+pe);let Ne=!0;for(let tt=0;tt<f;tt++){var x=P[tt].g;const Xt=P[tt].map;if(x-=pe,x<0)pe=Math.max(0,P[tt].g-100),Ne=!1;else try{x="req"+x+"_"||"";try{var K=Xt instanceof Map?Xt:Object.entries(Xt);for(const[ir,Nn]of K){let On=Nn;l(Nn)&&(On=Ae(Nn)),Qe.push(x+ir+"="+encodeURIComponent(On))}}catch(ir){throw Qe.push(x+"type="+encodeURIComponent("_badmap")),ir}}catch{m&&m(Xt)}}if(Ne){K=Qe.join("&");break e}}K=void 0}return o=o.i.splice(0,f),u.G=o,K}function Hc(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;de||y(),Ee||(de(),Ee=!0),A.add(u,o),o.A=0}}function Zo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=is(h(o.Da,o),Gc(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,qc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=is(h(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Ei(this),qc(this))};function ea(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function qc(o){o.g=new Pn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=Yt(o.na);Me(u,"RID","rpc"),Me(u,"SID",o.M),Me(u,"AID",o.K),Me(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&Me(u,"TO",o.ia),Me(u,"TYPE","xmlhttp"),_s(o,u),o.u&&o.o&&Yo(u,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=gi(Yt(u)),f.u=null,f.R=!0,yc(f,o)}t.Va=function(){this.C!=null&&(this.C=null,Ei(this),Zo(this),Et(19))};function Ti(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function zc(o,u){var f=null;if(o.g==u){Ti(o),ea(o),o.g=null;var m=2}else if(Ko(o.h,u))f=u.G,wc(o.h,u),m=1;else return;if(o.I!=0){if(u.o)if(m==1){f=u.u?u.u.length:0,u=Date.now()-u.F;var P=o.D;m=tr(),$(m,new dc(m,f)),vi(o)}else Hc(o);else if(P=u.m,P==3||P==0&&u.X>0||!(m==1&&km(o,u)||m==2&&Zo(o)))switch(f&&f.length>0&&(u=o.h,u.i=u.i.concat(f)),P){case 1:sr(o,5);break;case 4:sr(o,10);break;case 3:sr(o,6);break;default:sr(o,2)}}}function Gc(o,u){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*u}function sr(o,u){if(o.j.info("Error code "+u),u==2){var f=h(o.bb,o),m=o.Ua;const P=!m;m=new Vn(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cs(m,"https"),gi(m),P?Pm(m.toString(),f):Vm(m.toString(),f)}else Et(2);o.I=0,o.l&&o.l.pa(u),Kc(o),Uc(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Kc(o){if(o.I=0,o.ja=[],o.l){const u=bc(o.h);(u.length!=0||o.i.length!=0)&&(V(o.ja,u),V(o.ja,o.i),o.h.i.length=0,v(o.i),o.i.length=0),o.l.oa()}}function Wc(o,u,f){var m=f instanceof Vn?Yt(f):new Vn(f);if(m.g!="")u&&(m.g=u+"."+m.g),us(m,m.u);else{var P=a.location;m=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;const x=new Vn(null);m&&cs(x,m),u&&(x.g=u),P&&us(x,P),f&&(x.h=f),m=x}return f=o.G,u=o.wa,f&&u&&Me(m,f,u),Me(m,"VER",o.ka),_s(o,m),m}function Qc(o,u,f){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new Ue(new Jo({ab:f})):new Ue(o.ma),u.Fa(o.L),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}t=Jc.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ii(){}Ii.prototype.g=function(o,u){return new xt(o,u)};function xt(o,u){H.call(this),this.g=new Bc(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!E(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!E(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Rr(this)}p(xt,H),xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Xo(this.g)},xt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=Ae(o),o=f);u.i.push(new Tm(u.Ya++,o)),u.I==3&&vi(u)},xt.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,xt.Z.N.call(this)};function Yc(o){Ar.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const f in u){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}p(Yc,Ar);function Xc(){it.call(this),this.status=1}p(Xc,it);function Rr(o){this.g=o}p(Rr,Jc),Rr.prototype.ra=function(){$(this.g,"a")},Rr.prototype.qa=function(o){$(this.g,new Yc(o))},Rr.prototype.pa=function(o){$(this.g,new Xc)},Rr.prototype.oa=function(){$(this.g,"b")},Ii.prototype.createWebChannel=Ii.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,jd=function(){return new Ii},Ud=function(){return tr()},Bd=et,Wa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pi.NO_ERROR=0,pi.TIMEOUT=8,pi.HTTP_ERROR=6,Li=pi,pc.COMPLETE="complete",Fd=pc,Dt.EventType=Ht,Ht.OPEN="a",Ht.CLOSE="b",Ht.ERROR="c",Ht.MESSAGE="d",H.prototype.listen=H.prototype.J,As=Dt,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,Ld=Ue}).apply(typeof Si<"u"?Si:typeof self<"u"?self:typeof window<"u"?window:{});class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");let Zr="12.9.0";function yI(t){Zr=t}const gr=new Vd("@firebase/firestore");function Dr(){return gr.logLevel}function ee(t,...e){if(gr.logLevel<=Ie.DEBUG){const n=e.map(Ml);gr.debug(`Firestore (${Zr}): ${t}`,...n)}}function Rn(t,...e){if(gr.logLevel<=Ie.ERROR){const n=e.map(Ml);gr.error(`Firestore (${Zr}): ${t}`,...n)}}function _r(t,...e){if(gr.logLevel<=Ie.WARN){const n=e.map(Ml);gr.warn(`Firestore (${Zr}): ${t}`,...n)}}function Ml(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function le(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$d(t,r,n)}function $d(t,e,n){let r=`FIRESTORE (${Zr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Rn(r),new Error(r)}function Pe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||$d(e,s,r)}function he(t,e){return t}const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Xr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Hd{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(pt.UNAUTHENTICATED)))}shutdown(){}}class vI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class TI{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new qn,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new qn)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new Hd(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new pt(e)}}class II{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class AI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new II(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(pt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ah{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0,3512);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ah(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ah(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function bI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class Ll{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=bI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function Qa(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ia(s)===Ia(i)?_e(s,i):Ia(s)?1:-1}return _e(t.length,e.length)}const RI=55296,SI=57343;function Ia(t){const e=t.charCodeAt(0);return e>=RI&&e<=SI}function Kr(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const lh="__name__";class tn{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&le(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=tn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return _e(e.length,n.length)}static compareSegments(e,n){const r=tn.isNumericId(e),s=tn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?tn.extractNumericId(e).compare(tn.extractNumericId(n)):Qa(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hn.fromString(e.substring(4,e.length-2))}}class Fe extends tn{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Fe(n)}static emptyPath(){return new Fe([])}}const CI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends tn{construct(e,n,r){return new at(e,n,r)}static isValidIdentifier(e){return CI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lh}static keyField(){return new at([lh])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ne(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new ne(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Fe.fromString(e))}static fromName(e){return new oe(Fe.fromString(e).popFirst(5))}static empty(){return new oe(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Fe(e.slice()))}}function PI(t,e,n){if(!n)throw new ne(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VI(t,e,n,r){if(e===!0&&r===!0)throw new ne(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ch(t){if(!oe.isDocumentKey(t))throw new ne(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qd(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Fl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function zn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fl(t);throw new ne(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function ci(t,e){if(!qd(t))throw new ne(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ne(j.INVALID_ARGUMENT,n);return!0}const uh=-62135596800,hh=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hh);return new Le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<uh)throw new ne(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hh}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ci(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uh;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:Ke("string",Le._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new Le(0,0))}static max(){return new ue(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ys=-1;function DI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Kn(s,oe.empty(),e)}function xI(t){return new Kn(t.readTime,t.key,Ys)}class Kn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Kn(ue.min(),oe.empty(),Ys)}static max(){return new Kn(ue.max(),oe.empty(),Ys)}}function NI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}const OI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function es(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==OI)throw t;ee("LocalStore","Unexpectedly lost primary lease")}class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):F.reject(n)}static resolve(e){return new F(((n,r)=>{n(e)}))}static reject(e){return new F(((n,r)=>{r(e)}))}static waitFor(e){return new F(((n,r)=>{let s=0,i=0,a=!1;e.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(c=>r(c)))})),a=!0,i===s&&n()}))}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next((s=>s?F.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new F(((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next((d=>{a[h]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(e,n){return new F(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function MI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ts(t){return t.name==="IndexedDbTransactionError"}class Co{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Co.ce=-1;const Bl=-1;function Po(t){return t==null}function no(t){return t===0&&1/t==-1/0}function LI(t){return typeof t=="number"&&Number.isInteger(t)&&!no(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const zd="";function FI(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fh(e)),e=BI(t.get(n),e);return fh(e)}function BI(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case zd:n+="";break;default:n+=i}}return n}function fh(t){return t+zd+""}function dh(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Be{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ci(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ci(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ci(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ci(this.root,e,this.comparator,!0)}}class Ci{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ot.RED,this.left=s??ot.EMPTY,this.right=i??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ot(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ze{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ph(this.data.getIterator())}getIteratorFrom(e){return new ph(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class ph{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class zt{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new zt([])}unionWith(e){let n=new Ze(at.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kr(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Kd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Kd("Invalid base64 string: "+i):i}})(e);return new ct(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wn(t){if(Pe(!!t,39018),typeof t=="string"){let e=0;const n=UI.exec(t);if(Pe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qn(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}const Wd="server_timestamp",Qd="__type__",Jd="__previous_value__",Yd="__local_write_time__";function Ul(t){return(t?.mapValue?.fields||{})[Qd]?.stringValue===Wd}function Vo(t){const e=t.mapValue.fields[Jd];return Ul(e)?Vo(e):e}function Xs(t){const e=Wn(t.mapValue.fields[Yd].timestampValue);return new Le(e.seconds,e.nanos)}class jI{constructor(e,n,r,s,i,a,l,c,h,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=d,this.apiKey=p}}const ro="(default)";class Zs{constructor(e,n){this.projectId=e,this.database=n||ro}static empty(){return new Zs("","")}get isDefaultDatabase(){return this.database===ro}isEqual(e){return e instanceof Zs&&e.projectId===this.projectId&&e.database===this.database}}function $I(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ne(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zs(t.options.projectId,e)}const Xd="__type__",HI="__max__",Pi={mapValue:{}},Zd="__vector__",so="value";function Jn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ul(t)?4:zI(t)?9007199254740991:qI(t)?10:11:le(28295,{value:t})}function un(t,e){if(t===e)return!0;const n=Jn(t);if(n!==Jn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xs(t).isEqual(Xs(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Wn(s.timestampValue),l=Wn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return Qn(s.bytesValue).isEqual(Qn(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return $e(s.geoPointValue.latitude)===$e(i.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return $e(s.integerValue)===$e(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=$e(s.doubleValue),l=$e(i.doubleValue);return a===l?no(a)===no(l):isNaN(a)&&isNaN(l)}return!1})(t,e);case 9:return Kr(t.arrayValue.values||[],e.arrayValue.values||[],un);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(dh(a)!==dh(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!un(a[c],l[c])))return!1;return!0})(t,e);default:return le(52216,{left:t})}}function ei(t,e){return(t.values||[]).find((n=>un(n,e)))!==void 0}function Wr(t,e){if(t===e)return 0;const n=Jn(t),r=Jn(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return(function(i,a){const l=$e(i.integerValue||i.doubleValue),c=$e(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return mh(t.timestampValue,e.timestampValue);case 4:return mh(Xs(t),Xs(e));case 5:return Qa(t.stringValue,e.stringValue);case 6:return(function(i,a){const l=Qn(i),c=Qn(a);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=_e(l[h],c[h]);if(d!==0)return d}return _e(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,a){const l=_e($e(i.latitude),$e(a.latitude));return l!==0?l:_e($e(i.longitude),$e(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return gh(t.arrayValue,e.arrayValue);case 10:return(function(i,a){const l=i.fields||{},c=a.fields||{},h=l[so]?.arrayValue,d=c[so]?.arrayValue,p=_e(h?.values?.length||0,d?.values?.length||0);return p!==0?p:gh(h,d)})(t.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Pi.mapValue&&a===Pi.mapValue)return 0;if(i===Pi.mapValue)return 1;if(a===Pi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=Qa(c[p],d[p]);if(g!==0)return g;const v=Wr(l[c[p]],h[d[p]]);if(v!==0)return v}return _e(c.length,d.length)})(t.mapValue,e.mapValue);default:throw le(23264,{he:n})}}function mh(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Wn(t),r=Wn(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function gh(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Wr(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function Qr(t){return Ja(t)}function Ja(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Wn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Qn(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return oe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ja(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ja(n.fields[a])}`;return s+"}"})(t.mapValue):le(61005,{value:t})}function Fi(t){switch(Jn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vo(t);return e?16+Fi(e):16;case 5:return 2*t.stringValue.length;case 6:return Qn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Fi(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Er(r.fields,((i,a)=>{s+=i.length+Fi(a)})),s})(t.mapValue);default:throw le(13486,{value:t})}}function Ya(t){return!!t&&"integerValue"in t}function jl(t){return!!t&&"arrayValue"in t}function _h(t){return!!t&&"nullValue"in t}function yh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bi(t){return!!t&&"mapValue"in t}function qI(t){return(t?.mapValue?.fields||{})[Xd]?.stringValue===Zd}function Fs(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Er(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Fs(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fs(t.arrayValue.values[n]);return e}return{...t}}function zI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HI}class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bi(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fs(n)}setAll(e){let n=at.emptyPath(),r={},s=[];e.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Fs(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Bi(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Bi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Er(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Lt(Fs(this.value))}}function ep(t){const e=[];return Er(t.fields,((n,r)=>{const s=new at([n]);if(Bi(r)){const i=ep(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new zt(e)}class gt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new gt(e,0,ue.min(),ue.min(),ue.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,s){return new gt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new gt(e,2,n,ue.min(),ue.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,ue.min(),ue.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class io{constructor(e,n){this.position=e,this.inclusive=n}}function Eh(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=oe.comparator(oe.fromName(a.referenceValue),n.key):r=Wr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function vh(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!un(t.position[n],e.position[n]))return!1;return!0}class oo{constructor(e,n="asc"){this.field=e,this.dir=n}}function GI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class tp{}class Ye extends tp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WI(e,n,r):n==="array-contains"?new YI(e,r):n==="in"?new XI(e,r):n==="not-in"?new ZI(e,r):n==="array-contains-any"?new eA(e,r):new Ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new QI(e,r):new JI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wr(n,this.value)):n!==null&&Jn(this.value)===Jn(n)&&this.matchesComparison(Wr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends tp{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new hn(e,n)}matches(e){return np(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function np(t){return t.op==="and"}function rp(t){return KI(t)&&np(t)}function KI(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function Xa(t){if(t instanceof Ye)return t.field.canonicalString()+t.op.toString()+Qr(t.value);if(rp(t))return t.filters.map((e=>Xa(e))).join(",");{const e=t.filters.map((n=>Xa(n))).join(",");return`${t.op}(${e})`}}function sp(t,e){return t instanceof Ye?(function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&un(r.value,s.value)})(t,e):t instanceof hn?(function(r,s){return s instanceof hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&sp(a,s.filters[l])),!0):!1})(t,e):void le(19439)}function ip(t){return t instanceof Ye?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qr(n.value)}`})(t):t instanceof hn?(function(n){return n.op.toString()+" {"+n.getFilters().map(ip).join(" ,")+"}"})(t):"Filter"}class WI extends Ye{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class QI extends Ye{constructor(e,n){super(e,"in",n),this.keys=op("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class JI extends Ye{constructor(e,n){super(e,"not-in",n),this.keys=op("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function op(t,e){return(e.arrayValue?.values||[]).map((n=>oe.fromName(n.referenceValue)))}class YI extends Ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jl(n)&&ei(n.arrayValue,this.value)}}class XI extends Ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ei(this.value.arrayValue,n)}}class ZI extends Ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(ei(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ei(this.value.arrayValue,n)}}class eA extends Ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>ei(this.value.arrayValue,r)))}}class tA{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Th(t,e=null,n=[],r=[],s=null,i=null,a=null){return new tA(t,e,n,r,s,i,a)}function $l(t){const e=he(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Xa(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Po(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Qr(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Qr(r))).join(",")),e.Te=n}return e.Te}function Hl(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sp(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vh(t.startAt,e.startAt)&&vh(t.endAt,e.endAt)}function Za(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Do{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function nA(t,e,n,r,s,i,a,l){return new Do(t,e,n,r,s,i,a,l)}function xo(t){return new Do(t)}function Ih(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rA(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function sA(t){return t.collectionGroup!==null}function Bs(t){const e=he(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ze(at.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new oo(i,r))})),n.has(at.keyField().canonicalString())||e.Ie.push(new oo(at.keyField(),r))}return e.Ie}function sn(t){const e=he(t);return e.Ee||(e.Ee=iA(e,Bs(t))),e.Ee}function iA(t,e){if(t.limitType==="F")return Th(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new oo(s.field,i)}));const n=t.endAt?new io(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new io(t.startAt.position,t.startAt.inclusive):null;return Th(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function el(t,e,n){return new Do(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function No(t,e){return Hl(sn(t),sn(e))&&t.limitType===e.limitType}function ap(t){return`${$l(sn(t))}|lt:${t.limitType}`}function xr(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>ip(s))).join(", ")}]`),Po(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Qr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Qr(s))).join(",")),`Target(${r})`})(sn(t))}; limitType=${t.limitType})`}function Oo(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):oe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Bs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(a,l,c){const h=Eh(a,l,c);return a.inclusive?h<=0:h<0})(r.startAt,Bs(r),s)||r.endAt&&!(function(a,l,c){const h=Eh(a,l,c);return a.inclusive?h>=0:h>0})(r.endAt,Bs(r),s))})(t,e)}function oA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lp(t){return(e,n)=>{let r=!1;for(const s of Bs(t)){const i=aA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function aA(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):(function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?Wr(c,h):le(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:t.dir})}}class vr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Gd(this.inner)}size(){return this.innerSize}}const lA=new Be(oe.comparator);function Sn(){return lA}const cp=new Be(oe.comparator);function ws(...t){let e=cp;for(const n of t)e=e.insert(n.key,n);return e}function up(t){let e=cp;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function hr(){return Us()}function hp(){return Us()}function Us(){return new vr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const cA=new Be(oe.comparator),uA=new Ze(oe.comparator);function ye(...t){let e=uA;for(const n of t)e=e.add(n);return e}const hA=new Ze(_e);function fA(){return hA}function ql(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(e)?"-0":e}}function fp(t){return{integerValue:""+t}}function dA(t,e){return LI(e)?fp(e):ql(t,e)}class ko{constructor(){this._=void 0}}function pA(t,e,n){return t instanceof ao?(function(s,i){const a={fields:{[Qd]:{stringValue:Wd},[Yd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ul(i)&&(i=Vo(i)),i&&(a.fields[Jd]=i),{mapValue:a}})(n,e):t instanceof ti?pp(t,e):t instanceof ni?mp(t,e):(function(s,i){const a=dp(s,i),l=Ah(a)+Ah(s.Ae);return Ya(a)&&Ya(s.Ae)?fp(l):ql(s.serializer,l)})(t,e)}function mA(t,e,n){return t instanceof ti?pp(t,e):t instanceof ni?mp(t,e):n}function dp(t,e){return t instanceof lo?(function(r){return Ya(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ao extends ko{}class ti extends ko{constructor(e){super(),this.elements=e}}function pp(t,e){const n=gp(e);for(const r of t.elements)n.some((s=>un(s,r)))||n.push(r);return{arrayValue:{values:n}}}class ni extends ko{constructor(e){super(),this.elements=e}}function mp(t,e){let n=gp(e);for(const r of t.elements)n=n.filter((s=>!un(s,r)));return{arrayValue:{values:n}}}class lo extends ko{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ah(t){return $e(t.integerValue||t.doubleValue)}function gp(t){return jl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function gA(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof ti&&s instanceof ti||r instanceof ni&&s instanceof ni?Kr(r.elements,s.elements,un):r instanceof lo&&s instanceof lo?un(r.Ae,s.Ae):r instanceof ao&&s instanceof ao})(t.transform,e.transform)}class _A{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ui(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mo{}function _p(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ep(t.key,Tn.none()):new ui(t.key,t.data,Tn.none());{const n=t.data,r=Lt.empty();let s=new Ze(at.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Tr(t.key,r,new zt(s.toArray()),Tn.none())}}function yA(t,e,n){t instanceof ui?(function(s,i,a){const l=s.value.clone(),c=bh(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,n):t instanceof Tr?(function(s,i,a){if(!Ui(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=bh(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(yp(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(t,e,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function js(t,e,n,r){return t instanceof ui?(function(i,a,l,c){if(!Ui(i.precondition,a))return l;const h=i.value.clone(),d=Rh(i.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof Tr?(function(i,a,l,c){if(!Ui(i.precondition,a))return l;const h=Rh(i.fieldTransforms,c,a),d=a.data;return d.setAll(yp(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,a,l){return Ui(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(t,e,n)}function EA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=dp(r.transform,s||null);i!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,i))}return n||null}function wh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Kr(r,s,((i,a)=>gA(i,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ui extends Mo{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Tr extends Mo{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yp(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function bh(t,e,n){const r=new Map;Pe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,mA(a,l,n[s]))}return r}function Rh(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,pA(i,a,e))}return r}class Ep extends Mo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vA extends Mo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class TA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&yA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=js(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=js(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=hp();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=_p(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ye())}isEqual(e){return this.batchId===e.batchId&&Kr(this.mutations,e.mutations,((n,r)=>wh(n,r)))&&Kr(this.baseMutations,e.baseMutations,((n,r)=>wh(n,r)))}}class zl{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return cA})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new zl(e,n,r,s)}}class IA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class AA{constructor(e,n){this.count=e,this.unchangedNames=n}}var ze,Te;function wA(t){switch(t){case j.OK:return le(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function vp(t){if(t===void 0)return Rn("GRPC error has no .code"),j.UNKNOWN;switch(t){case ze.OK:return j.OK;case ze.CANCELLED:return j.CANCELLED;case ze.UNKNOWN:return j.UNKNOWN;case ze.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ze.INTERNAL:return j.INTERNAL;case ze.UNAVAILABLE:return j.UNAVAILABLE;case ze.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ze.NOT_FOUND:return j.NOT_FOUND;case ze.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ze.ABORTED:return j.ABORTED;case ze.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ze.DATA_LOSS:return j.DATA_LOSS;default:return le(39323,{code:t})}}(Te=ze||(ze={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";function bA(){return new TextEncoder}const RA=new Hn([4294967295,4294967295],0);function Sh(t){const e=bA().encode(t),n=new Md;return n.update(e),new Uint8Array(n.digest())}function Ch(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hn([n,r],0),new Hn([s,i],0)]}class Gl{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bs(`Invalid padding: ${n}`);if(r<0)throw new bs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bs(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hn.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hn.fromNumber(r)));return s.compare(RA)===1&&(s=new Hn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sh(e),[r,s]=Ch(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Gl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(e){if(this.ge===0)return;const n=Sh(e),[r,s]=Ch(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Lo{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,hi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lo(ue.min(),s,new Be(_e),Sn(),ye())}}class hi{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hi(r,n,ye(),ye(),ye())}}class ji{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Tp{constructor(e,n){this.targetId=e,this.Ce=n}}class Ip{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ph{constructor(){this.ve=0,this.Fe=Vh(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ye(),n=ye(),r=ye();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:le(38017,{changeType:i})}})),new hi(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Vh()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class SA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sn(),this.He=Vi(),this.Je=Vi(),this.Ze=new Be(_e)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:le(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Za(i))if(r===0){const a=new oe(i.path);this.et(n,a,gt.newNoDocument(a,ue.min()))}else Pe(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Qn(r).toUint8Array()}catch(c){if(c instanceof Kd)return _r("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Gl(a,s,i)}catch(c){return _r(c instanceof bs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Za(l.target)){const c=new oe(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,gt.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.Ke())}}));let r=ye();this.Je.forEach(((i,a)=>{let l=!0;a.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(e)));const s=new Lo(e,n,this.Ze,this.je,r);return this.je=Sn(),this.He=Vi(),this.Je=Vi(),this.Ze=new Be(_e),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Ph,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ze(_e),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ze(_e),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ph),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Vi(){return new Be(oe.comparator)}function Vh(){return new Be(oe.comparator)}const CA={asc:"ASCENDING",desc:"DESCENDING"},PA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VA={and:"AND",or:"OR"};class DA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tl(t,e){return t.useProto3Json||Po(e)?e:{value:e}}function co(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ap(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xA(t,e){return co(t,e.toTimestamp())}function on(t){return Pe(!!t,49232),ue.fromTimestamp((function(n){const r=Wn(n);return new Le(r.seconds,r.nanos)})(t))}function Kl(t,e){return nl(t,e).canonicalString()}function nl(t,e){const n=(function(s){return new Fe(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function wp(t){const e=Fe.fromString(t);return Pe(Pp(e),10190,{key:e.toString()}),e}function rl(t,e){return Kl(t.databaseId,e.path)}function Aa(t,e){const n=wp(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(Rp(n))}function bp(t,e){return Kl(t.databaseId,e)}function NA(t){const e=wp(t);return e.length===4?Fe.emptyPath():Rp(e)}function sl(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Rp(t){return Pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Dh(t,e,n){return{name:rl(t,e),fields:n.value.mapValue.fields}}function OA(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:le(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(h,d){return h.useProto3Json?(Pe(d===void 0||typeof d=="string",58123),ct.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ct.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(h){const d=h.code===void 0?j.UNKNOWN:vp(h.code);return new ne(d,h.message||"")})(a);n=new Ip(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Aa(t,r.document.name),i=on(r.document.updateTime),a=r.document.createTime?on(r.document.createTime):ue.min(),l=new Lt({mapValue:{fields:r.document.fields}}),c=gt.newFoundDocument(s,i,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new ji(h,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Aa(t,r.document),i=r.readTime?on(r.readTime):ue.min(),a=gt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ji([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Aa(t,r.document),i=r.removedTargetIds||[];n=new ji([],i,s,null)}else{if(!("filter"in e))return le(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new AA(s,i),l=r.targetId;n=new Tp(l,a)}}return n}function kA(t,e){let n;if(e instanceof ui)n={update:Dh(t,e.key,e.value)};else if(e instanceof Ep)n={delete:rl(t,e.key)};else if(e instanceof Tr)n={update:Dh(t,e.key,e.data),updateMask:qA(e.fieldMask)};else{if(!(e instanceof vA))return le(16599,{dt:e.type});n={verify:rl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof ao)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ti)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ni)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lo)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw le(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:xA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le(27497)})(t,e.precondition)),n}function MA(t,e){return t&&t.length>0?(Pe(e!==void 0,14353),t.map((n=>(function(s,i){let a=s.updateTime?on(s.updateTime):on(i);return a.isEqual(ue.min())&&(a=on(i)),new _A(a,s.transformResults||[])})(n,e)))):[]}function LA(t,e){return{documents:[bp(t,e.path)]}}function FA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bp(t,s);const i=(function(h){if(h.length!==0)return Cp(hn.create(h,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((d=>(function(g){return{field:Nr(g.field),direction:jA(g.dir)}})(d)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=tl(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:s}}function BA(t){let e=NA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=(function(p){const g=Sp(p);return g instanceof hn&&rp(g)?g.getFilters():[g]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((g=>(function(V){return new oo(Or(V.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(g)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let g;return g=typeof p=="object"?p.value:p,Po(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(p){const g=!!p.before,v=p.values||[];return new io(v,g)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const g=!p.before,v=p.values||[];return new io(v,g)})(n.endAt)),nA(e,s,a,i,l,"F",c,h)}function UA(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Sp(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Or(n.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Or(n.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Or(n.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Or(n.unaryFilter.field);return Ye.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ye.create(Or(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return hn.create(n.compositeFilter.filters.map((r=>Sp(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return le(1026)}})(n.compositeFilter.op))})(t):le(30097,{filter:t})}function jA(t){return CA[t]}function $A(t){return PA[t]}function HA(t){return VA[t]}function Nr(t){return{fieldPath:t.canonicalString()}}function Or(t){return at.fromServerFormat(t.fieldPath)}function Cp(t){return t instanceof Ye?(function(n){if(n.op==="=="){if(yh(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NAN"}};if(_h(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yh(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NAN"}};if(_h(n.value))return{unaryFilter:{field:Nr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nr(n.field),op:$A(n.op),value:n.value}}})(t):t instanceof hn?(function(n){const r=n.getFilters().map((s=>Cp(s)));return r.length===1?r[0]:{compositeFilter:{op:HA(n.op),filters:r}}})(t):le(54877,{filter:t})}function qA(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Pp(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Vp(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}class Bn{constructor(e,n,r,s,i=ue.min(),a=ue.min(),l=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Bn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class zA{constructor(e){this.yt=e}}function GA(t){const e=BA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?el(e,e.limit,"L"):e}class KA{constructor(){this.Sn=new WA}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Kn.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class WA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Fe.comparator)).toArray()}}const xh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dp=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(Dp,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);class Jr{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Jr(0)}static ar(){return new Jr(-1)}}const Nh="LruGarbageCollector",QA=1048576;function Oh([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class JA{constructor(e){this.Pr=e,this.buffer=new Ze(Oh),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Oh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ee(Nh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ts(n)?ee(Nh,"Ignoring IndexedDB error during garbage collection: ",n):await es(n)}await this.Ar(3e5)}))}}class XA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Co.ce);const r=new JA(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(xh)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xh):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,a,l,c,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,l=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(h=Date.now(),Dr()<=Ie.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function ZA(t,e){return new XA(t,e)}class ew{constructor(){this.changes=new vr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class nw{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&js(r.mutation,s,zt.empty(),Le.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ye()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ye()){const s=hr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let a=ws();return i.forEach(((l,c)=>{a=a.insert(l,c.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=hr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ye())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(e,n,r,s){let i=Sn();const a=Us(),l=(function(){return Us()})();return n.forEach(((c,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof Tr)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),js(d.mutation,h,d.mutation.getFieldMask(),Le.now())):a.set(h.key,zt.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((h,d)=>a.set(h,d))),n.forEach(((h,d)=>l.set(h,new tw(d,a.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=Us();let s=new Be(((a,l)=>a-l)),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const l of a)l.keys().forEach((c=>{const h=n.get(c);if(h===null)return;let d=r.get(c)||zt.empty();d=l.applyToLocalView(h,d),r.set(c,d);const p=(s.get(l.batchId)||ye()).add(c);s=s.insert(l.batchId,p)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,p=hp();d.forEach((g=>{if(!i.has(g)){const v=_p(n.get(g),r.get(g));v!==null&&p.set(g,v),i=i.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,h,p))}return F.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return rA(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(hr());let l=Ys,c=i;return a.next((h=>F.forEach(h,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{c=c.insert(d,g)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,c,h,ye()))).next((d=>({batchId:l,changes:up(d)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next((r=>{let s=ws();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=ws();return this.indexManager.getCollectionParents(e,i).next((l=>F.forEach(l,(c=>{const h=(function(p,g){return new Do(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next((d=>{d.forEach(((p,g)=>{a=a.insert(p,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((a=>{i.forEach(((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,gt.newInvalidDocument(d)))}));let l=ws();return a.forEach(((c,h)=>{const d=i.get(c);d!==void 0&&js(d.mutation,h,zt.empty(),Le.now()),Oo(n,h)&&(l=l.insert(c,h))})),l}))}}class rw{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:on(s.createTime)}})(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(s){return{name:s.name,query:GA(s.bundledQuery),readTime:on(s.readTime)}})(n)),F.resolve()}}class sw{constructor(){this.overlays=new Be(oe.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hr();return F.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.bt(e,n,i)})),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=hr(),i=n.length+1,a=new oe(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Be(((h,d)=>h-d));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=hr(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=hr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,d)=>l.set(h,d))),!(l.size()>=s)););return F.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new IA(n,r));let i=this.Lr.get(n);i===void 0&&(i=ye(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}class iw{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}class Wl{constructor(){this.kr=new Ze(nt.Kr),this.qr=new Ze(nt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new nt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new oe(new Fe([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.qr.forEachInRange([r,s],(a=>{this.Wr(a),i.push(a.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new oe(new Fe([])),r=new nt(n,e),s=new nt(n,e+1);let i=ye();return this.qr.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const n=new nt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return oe.comparator(e.key,n.key)||_e(e.Hr,n.Hr)}static Ur(e,n){return _e(e.Hr,n.Hr)||oe.comparator(e.key,n.key)}}class ow{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ze(nt.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new TA(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new nt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Bl:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],(a=>{const l=this.Zr(a.Hr);i.push(l)})),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(_e);return n.forEach((s=>{const i=new nt(s,0),a=new nt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],(l=>{r=r.add(l.Hr)}))})),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;oe.isDocumentKey(i)||(i=i.child(""));const a=new nt(new oe(i),0);let l=new Ze(_e);return this.Jr.forEachWhile((c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.Hr)),!0)}),a),F.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Pe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,(s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new nt(n,0),s=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class aw{constructor(e){this.ti=e,this.docs=(function(){return new Be(oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=Sn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gt.newInvalidDocument(s))})),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Sn();const a=n.path,l=new oe(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||NI(xI(d),r)<=0||(s.has(d.key)||Oo(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){le(9500)}ni(e,n){return F.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new lw(this)}getSize(e){return F.resolve(this.size)}}class lw extends ew{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class cw{constructor(e){this.persistence=e,this.ri=new vr((n=>$l(n)),Hl),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.ii=0,this.si=new Wl,this.targetCount=0,this.oi=Jr._r()}forEachTarget(e,n){return this.ri.forEach(((r,s)=>n(s))),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Jr(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)})),F.waitFor(i).next((()=>s))}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}class xp{constructor(e,n){this._i={},this.overlays={},this.ai=new Co(0),this.ui=!1,this.ui=!0,this.ci=new iw,this.referenceDelegate=e(this),this.li=new cw(this),this.indexManager=new KA,this.remoteDocumentCache=(function(s){return new aw(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new zA(n),this.Pi=new rw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new ow(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new uw(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((i=>this.referenceDelegate.Ii(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(e,n){return F.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class uw extends kI{constructor(e){super(),this.currentSequenceNumber=e}}class Ql{constructor(e){this.persistence=e,this.Ri=new Wl,this.Ai=null}static Vi(e){return new Ql(e)}get di(){if(this.Ai)return this.Ai;throw le(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.di.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,(r=>{const s=oe.fromPath(r);return this.mi(e,s).next((i=>{i||n.removeEntry(s,ue.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class uo{constructor(e,n){this.persistence=e,this.fi=new vr((r=>FI(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=ZA(this,n)}static Vi(e,n){return new uo(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return F.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((i=>i?F.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,(a=>this.wr(e,a,n).next((l=>{l||(r++,i.removeEntry(a,ue.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fi(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Jl{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Jl(e,n.fromCache,r,s)}}class hw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class fw{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return eT()?8:MI(Xv())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ps(e,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new hw;return this.ys(e,n,a).next((l=>{if(i.result=l,this.As)return this.ws(e,n,a,l.size)}))})).next((()=>i.result))}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Dr()<=Ie.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",xr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Dr()<=Ie.DEBUG&&ee("QueryEngine","Query:",xr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Dr()<=Ie.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",xr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):F.resolve())}gs(e,n){if(Ih(n))return F.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=el(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=ye(...i);return this.fs.getDocuments(e,a).next((l=>this.indexManager.getMinOffset(e,r).next((c=>{const h=this.bs(n,l);return this.Ss(n,h,a,c.readTime)?this.gs(e,el(n,null,"F")):this.Ds(e,h,n,c)}))))})))))}ps(e,n,r,s){return Ih(n)||s.isEqual(ue.min())?F.resolve(null):this.fs.getDocuments(e,r).next((i=>{const a=this.bs(n,i);return this.Ss(n,a,r,s)?F.resolve(null):(Dr()<=Ie.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xr(n)),this.Ds(e,a,n,DI(s,Ys)).next((l=>l)))}))}bs(e,n){let r=new Ze(lp(e));return n.forEach(((s,i)=>{Oo(e,i)&&(r=r.add(i))})),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Dr()<=Ie.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",xr(n)),this.fs.getDocumentsMatchingQuery(e,n,Kn.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}const Yl="LocalStore",dw=3e8;class pw{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Be(_e),this.Fs=new vr((i=>$l(i)),Hl),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nw(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function mw(t,e,n,r){return new pw(t,e,n,r)}async function Np(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let c=ye();for(const h of s){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next((h=>({Ns:h,removedBatchIds:a,addedBatchIds:l})))}))}))}function gw(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,d){const p=h.batch,g=p.keys();let v=F.resolve();return g.forEach((V=>{v=v.next((()=>d.getEntry(c,V))).next((D=>{const R=h.docVersions.get(V);Pe(R!==null,48541),D.version.compareTo(R)<0&&(p.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),d.addEntry(D)))}))})),v.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=ye();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Op(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function _w(t,e){const n=he(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach(((d,p)=>{const g=s.get(p);if(!g)return;l.push(n.li.removeMatchingKeys(i,d.removedDocuments,p).next((()=>n.li.addMatchingKeys(i,d.addedDocuments,p))));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(ct.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),s=s.insert(p,v),(function(D,R,N){return D.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=dw?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(g,v,d)&&l.push(n.li.updateTargetData(i,v))}));let c=Sn(),h=ye();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(yw(i,a,e.documentUpdates).next((d=>{c=d.Bs,h=d.Ls}))),!r.isEqual(ue.min())){const d=n.li.getLastRemoteSnapshotVersion(i).next((p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return F.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,h))).next((()=>c))})).then((i=>(n.vs=s,i)))}function yw(t,e,n){let r=ye(),s=ye();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let a=Sn();return n.forEach(((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ee(Yl,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{Bs:a,Ls:s}}))}function Ew(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Bl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function vw(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.li.getTargetData(r,e).next((i=>i?(s=i,F.resolve(s)):n.li.allocateTargetId(r).next((a=>(s=new Bn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function il(t,e,n){const r=he(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!ts(a))throw a;ee(Yl,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function kh(t,e,n){const r=he(t);let s=ue.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,h,d){const p=he(c),g=p.Fs.get(d);return g!==void 0?F.resolve(p.vs.get(g)):p.li.getTargetData(h,d)})(r,a,sn(e)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,l.targetId).next((c=>{i=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:ue.min(),n?i:ye()))).next((l=>(Tw(r,oA(e),l),{documents:l,ks:i})))))}function Tw(t,e,n){let r=t.Ms.get(e)||ue.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Ms.set(e,r)}class Mh{constructor(){this.activeTargetIds=fA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Iw{constructor(){this.vo=new Mh,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Mh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Aw{Mo(e){}shutdown(){}}const Lh="ConnectivityMonitor";class Fh{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ee(Lh,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ee(Lh,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Di=null;function ol(){return Di===null?Di=(function(){return 268435456+Math.round(2147483648*Math.random())})():Di++,"0x"+Di.toString(16)}const wa="RestConnection",ww={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class bw{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===ro?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=ol(),l=this.Qo(e,n.toUriEncodedString());ee(wa,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:h}=new URL(l),d=Ol(h);return this.zo(e,l,c,r,d).then((p=>(ee(wa,`Received RPC '${e}' ${a}: `,p),p)),(p=>{throw _r(wa,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",r),p}))}jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}Qo(e,n){const r=ww[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class Rw{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const dt="WebChannelConnection",Ts=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Ur extends bw{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ur.c_){const e=Ud();Ts(e,Bd.STAT_EVENT,(n=>{n.stat===Wa.PROXY?ee(dt,"STAT_EVENT: detected buffering proxy"):n.stat===Wa.NOPROXY&&ee(dt,"STAT_EVENT: detected no buffering proxy")})),Ur.c_=!0}}zo(e,n,r,s,i){const a=ol();return new Promise(((l,c)=>{const h=new Ld;h.setWithCredentials(!0),h.listenOnce(Fd.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Li.NO_ERROR:const p=h.getResponseJson();ee(dt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case Li.TIMEOUT:ee(dt,`RPC '${e}' ${a} timed out`),c(new ne(j.DEADLINE_EXCEEDED,"Request time out"));break;case Li.HTTP_ERROR:const g=h.getStatus();if(ee(dt,`RPC '${e}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let v=h.getResponseJson();Array.isArray(v)&&(v=v[0]);const V=v?.error;if(V&&V.status&&V.message){const D=(function(N){const O=N.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(O)>=0?O:j.UNKNOWN})(V.status);c(new ne(D,V.message))}else c(new ne(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new ne(j.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ee(dt,`RPC '${e}' ${a} completed.`)}}));const d=JSON.stringify(s);ee(dt,`RPC '${e}' ${a} sending request:`,s),h.send(n,"POST",d,r,15)}))}T_(e,n,r){const s=ol(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");ee(dt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=a.createWebChannel(h,l);this.I_(d);let p=!1,g=!1;const v=new Rw({Ho:V=>{g?ee(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(p||(ee(dt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),ee(dt,`RPC '${e}' stream ${s} sending:`,V),d.send(V))},Jo:()=>d.close()});return Ts(d,As.EventType.OPEN,(()=>{g||(ee(dt,`RPC '${e}' stream ${s} transport opened.`),v.i_())})),Ts(d,As.EventType.CLOSE,(()=>{g||(g=!0,ee(dt,`RPC '${e}' stream ${s} transport closed`),v.o_(),this.E_(d))})),Ts(d,As.EventType.ERROR,(V=>{g||(g=!0,_r(dt,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),v.o_(new ne(j.UNAVAILABLE,"The operation could not be completed")))})),Ts(d,As.EventType.MESSAGE,(V=>{if(!g){const D=V.data[0];Pe(!!D,16349);const R=D,N=R?.error||R[0]?.error;if(N){ee(dt,`RPC '${e}' stream ${s} received error:`,N);const O=N.status;let q=(function(Ee){const A=ze[Ee];if(A!==void 0)return vp(A)})(O),G=N.message;O==="NOT_FOUND"&&G.includes("database")&&G.includes("does not exist")&&G.includes(this.databaseId.database)&&_r(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),q===void 0&&(q=j.INTERNAL,G="Unknown error status: "+O+" with message "+N.message),g=!0,v.o_(new ne(q,G)),d.close()}else ee(dt,`RPC '${e}' stream ${s} received:`,D),v.__(D)}})),Ur.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jd()}}function Sw(t){return new Ur(t)}function ba(){return typeof document<"u"?document:null}function Fo(t){return new DA(t,!0)}Ur.c_=!1;class kp{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Bh="PersistentStream";class Mp{constructor(e,n,r,s,i,a,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kp(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Rn(n.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new ne(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ee(Bh,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ee(Bh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cw extends Mp{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=OA(this.serializer,e),r=(function(i){if(!("targetChange"in i))return ue.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ue.min():a.readTime?on(a.readTime):ue.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=sl(this.serializer),n.addTarget=(function(i,a){let l;const c=a.target;if(l=Za(c)?{documents:LA(i,c)}:{query:FA(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Ap(i,a.resumeToken);const h=tl(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(ue.min())>0){l.readTime=co(i,a.snapshotVersion.toTimestamp());const h=tl(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const r=UA(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=sl(this.serializer),n.removeTarget=e,this.K_(n)}}class Pw extends Mp{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=MA(e.writeResults,e.commitTime),r=on(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=sl(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>kA(this.serializer,r)))};this.K_(n)}}class Vw{}class Dw extends Vw{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ne(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,nl(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(j.UNKNOWN,i.toString())}))}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.jo(e,nl(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ne(j.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function xw(t,e,n,r){return new Dw(t,e,n,r)}class Nw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rn(n),this.aa=!1):ee("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const yr="RemoteStore";class Ow{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((a=>{r.enqueueAndForget((async()=>{Ir(this)&&(ee(yr,"Restarting streams for network reachability change."),await(async function(c){const h=he(c);h.Ea.add(4),await fi(h),h.Va.set("Unknown"),h.Ea.delete(4),await Bo(h)})(this))}))})),this.Va=new Nw(r,s)}}async function Bo(t){if(Ir(t))for(const e of t.Ra)await e(!0)}async function fi(t){for(const e of t.Ra)await e(!1)}function Lp(t,e){const n=he(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),tc(n)?ec(n):ns(n).O_()&&Zl(n,e))}function Xl(t,e){const n=he(t),r=ns(n);n.Ia.delete(e),r.O_()&&Fp(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ir(n)&&n.Va.set("Unknown"))}function Zl(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ns(t).Z_(e)}function Fp(t,e){t.da.$e(e),ns(t).X_(e)}function ec(t){t.da=new SA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ns(t).start(),t.Va.ua()}function tc(t){return Ir(t)&&!ns(t).x_()&&t.Ia.size>0}function Ir(t){return he(t).Ea.size===0}function Bp(t){t.da=void 0}async function kw(t){t.Va.set("Online")}async function Mw(t){t.Ia.forEach(((e,n)=>{Zl(t,e)}))}async function Lw(t,e){Bp(t),tc(t)?(t.Va.ha(e),ec(t)):t.Va.set("Unknown")}async function Fw(t,e,n){if(t.Va.set("Online"),e instanceof Ip&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))})(t,e)}catch(r){ee(yr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ho(t,r)}else if(e instanceof ji?t.da.Xe(e):e instanceof Tp?t.da.st(e):t.da.tt(e),!n.isEqual(ue.min()))try{const r=await Op(t.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.da.Tt(a);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(c.resumeToken,a))}})),l.targetMismatches.forEach(((c,h)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(ct.EMPTY_BYTE_STRING,d.snapshotVersion)),Fp(i,c);const p=new Bn(d.target,c,h,d.sequenceNumber);Zl(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){ee(yr,"Failed to raise snapshot:",r),await ho(t,r)}}async function ho(t,e,n){if(!ts(e))throw e;t.Ea.add(1),await fi(t),t.Va.set("Offline"),n||(n=()=>Op(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ee(yr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bo(t)}))}function Up(t,e){return e().catch((n=>ho(t,n,e)))}async function Uo(t){const e=he(t),n=Yn(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bl;for(;Bw(e);)try{const s=await Ew(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Uw(e,s)}catch(s){await ho(e,s)}jp(e)&&$p(e)}function Bw(t){return Ir(t)&&t.Ta.length<10}function Uw(t,e){t.Ta.push(e);const n=Yn(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function jp(t){return Ir(t)&&!Yn(t).x_()&&t.Ta.length>0}function $p(t){Yn(t).start()}async function jw(t){Yn(t).ra()}async function $w(t){const e=Yn(t);for(const n of t.Ta)e.ea(n.mutations)}async function Hw(t,e,n){const r=t.Ta.shift(),s=zl.from(r,e,n);await Up(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Uo(t)}async function qw(t,e){e&&Yn(t).Y_&&await(async function(r,s){if((function(a){return wA(a)&&a!==j.ABORTED})(s.code)){const i=r.Ta.shift();Yn(r).B_(),await Up(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Uo(r)}})(t,e),jp(t)&&$p(t)}async function Uh(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),ee(yr,"RemoteStore received new credentials");const r=Ir(n);n.Ea.add(3),await fi(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bo(n)}async function zw(t,e){const n=he(t);e?(n.Ea.delete(2),await Bo(n)):e||(n.Ea.add(2),await fi(n),n.Va.set("Unknown"))}function ns(t){return t.ma||(t.ma=(function(n,r,s){const i=he(n);return i.sa(),new Cw(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:kw.bind(null,t),Yo:Mw.bind(null,t),t_:Lw.bind(null,t),J_:Fw.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),tc(t)?ec(t):t.Va.set("Unknown")):(await t.ma.stop(),Bp(t))}))),t.ma}function Yn(t){return t.fa||(t.fa=(function(n,r,s){const i=he(n);return i.sa(),new Pw(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:jw.bind(null,t),t_:qw.bind(null,t),ta:$w.bind(null,t),na:Hw.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await Uo(t)):(await t.fa.stop(),t.Ta.length>0&&(ee(yr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class nc{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new nc(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rc(t,e){if(Rn("AsyncQueue",`${e}: ${t}`),ts(t))return new ne(j.UNAVAILABLE,`${e}: ${t}`);throw t}class jr{static emptySet(e){return new jr(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=ws(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class jh{constructor(){this.ga=new Be(oe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):le(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Yr{constructor(e,n,r,s,i,a,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Yr(e,n,jr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&No(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class Gw{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Kw{constructor(){this.queries=$h(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=$h(),i.forEach(((a,l)=>{for(const c of l.ba)c.onError(r)}))})(this,new ne(j.ABORTED,"Firestore shutting down"))}}function $h(){return new vr((t=>ap(t)),No)}async function Hp(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new Gw,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=rc(a,`Initialization of query '${xr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&sc(n)}async function qp(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ww(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.ba)l.Fa(s)&&(r=!0);a.wa=s}}r&&sc(n)}function Qw(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function sc(t){t.Ca.forEach((e=>{e.next()}))}var al,Hh;(Hh=al||(al={})).Ma="default",Hh.Cache="cache";class zp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Yr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==al.Cache}}class Gp{constructor(e){this.key=e}}class Kp{constructor(e){this.key=e}}class Jw{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ye(),this.mutatedKeys=ye(),this.eu=lp(e),this.tu=new jr(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new jh,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,p)=>{const g=s.get(d),v=Oo(this.query,p)?p:null,V=!!g&&this.mutatedKeys.has(g.key),D=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let R=!1;g&&v?g.data.isEqual(v.data)?V!==D&&(r.track({type:3,doc:v}),R=!0):this.su(g,v)||(r.track({type:2,doc:v}),R=!0,(c&&this.eu(v,c)>0||h&&this.eu(v,h)<0)&&(l=!0)):!g&&v?(r.track({type:0,doc:v}),R=!0):g&&!v&&(r.track({type:1,doc:g}),R=!0,(c||h)&&(l=!0)),R&&(v?(a=a.add(v),i=D?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((d,p)=>(function(v,V){const D=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Vt:R})}};return D(v)-D(V)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,h=c!==this.Xa;return this.Xa=c,a.length!==0||h?{snapshot:new Yr(this.query,e.tu,i,a,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jh,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ye(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new Kp(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new Gp(r))})),n}cu(e){this.Za=e.ks,this.Ya=ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Yr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ic="SyncEngine";class Yw{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Xw{constructor(e){this.key=e,this.hu=!1}}class Zw{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new vr((l=>ap(l)),No),this.Iu=new Map,this.Eu=new Set,this.Ru=new Be(oe.comparator),this.Au=new Map,this.Vu=new Wl,this.du={},this.mu=new Map,this.fu=Jr.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function e0(t,e,n=!0){const r=Zp(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Wp(r,e,n,!0),s}async function t0(t,e){const n=Zp(t);await Wp(n,e,!0,!1)}async function Wp(t,e,n,r){const s=await vw(t.localStore,sn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await n0(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Lp(t.remoteStore,s),l}async function n0(t,e,n,r,s){t.pu=(p,g,v)=>(async function(D,R,N,O){let q=R.view.ru(N);q.Ss&&(q=await kh(D.localStore,R.query,!1).then((({documents:A})=>R.view.ru(A,q))));const G=O&&O.targetChanges.get(R.targetId),de=O&&O.targetMismatches.get(R.targetId)!=null,Ee=R.view.applyChanges(q,D.isPrimaryClient,G,de);return zh(D,R.targetId,Ee.au),Ee.snapshot})(t,p,g,v);const i=await kh(t.localStore,e,!0),a=new Jw(e,i.ks),l=a.ru(i.documents),c=hi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,c);zh(t,n,h.au);const d=new Yw(e,n,a);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function r0(t,e,n){const r=he(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!No(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await il(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Xl(r.remoteStore,s.targetId),ll(r,s.targetId)})).catch(es)):(ll(r,s.targetId),await il(r.localStore,s.targetId,!0))}async function s0(t,e){const n=he(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xl(n.remoteStore,r.targetId))}async function i0(t,e,n){const r=f0(t);try{const s=await(function(a,l){const c=he(a),h=Le.now(),d=l.reduce(((v,V)=>v.add(V.key)),ye());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let V=Sn(),D=ye();return c.xs.getEntries(v,d).next((R=>{V=R,V.forEach(((N,O)=>{O.isValidDocument()||(D=D.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,V))).next((R=>{p=R;const N=[];for(const O of l){const q=EA(O,p.get(O.key).overlayedDocument);q!=null&&N.push(new Tr(O.key,q,ep(q.value.mapValue),Tn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,h,N,l)})).next((R=>{g=R;const N=R.applyToLocalDocumentSet(p,D);return c.documentOverlayCache.saveOverlays(v,R.batchId,N)}))})).then((()=>({batchId:g.batchId,changes:up(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,c){let h=a.du[a.currentUser.toKey()];h||(h=new Be(_e)),h=h.insert(l,c),a.du[a.currentUser.toKey()]=h})(r,s.batchId,n),await di(r,s.changes),await Uo(r.remoteStore)}catch(s){const i=rc(s,"Failed to persist write");n.reject(i)}}async function Qp(t,e){const n=he(t);try{const r=await _w(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Pe(a.hu,14607):s.removedDocuments.size>0&&(Pe(a.hu,42227),a.hu=!1))})),await di(n,r,e)}catch(r){await es(r)}}function qh(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const c=he(a);c.onlineState=l;let h=!1;c.queries.forEach(((d,p)=>{for(const g of p.ba)g.va(l)&&(h=!0)})),h&&sc(c)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function o0(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Be(oe.comparator);a=a.insert(i,gt.newNoDocument(i,ue.min()));const l=ye().add(i),c=new Lo(ue.min(),new Map,new Be(_e),a,l);await Qp(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),oc(r)}else await il(r.localStore,e,!1).then((()=>ll(r,e,n))).catch(es)}async function a0(t,e){const n=he(t),r=e.batch.batchId;try{const s=await gw(n.localStore,e);Yp(n,r,null),Jp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await di(n,s)}catch(s){await es(s)}}async function l0(t,e,n){const r=he(t);try{const s=await(function(a,l){const c=he(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>(Pe(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d))).next((()=>c.localDocuments.getDocuments(h,d)))}))})(r.localStore,e);Yp(r,e,n),Jp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await di(r,s)}catch(s){await es(s)}}function Jp(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Yp(t,e,n){const r=he(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function ll(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||Xp(t,r)}))}function Xp(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Xl(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),oc(t))}function zh(t,e,n){for(const r of n)r instanceof Gp?(t.Vu.addReference(r.key,e),c0(t,r)):r instanceof Kp?(ee(ic,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||Xp(t,r.key)):le(19791,{wu:r})}function c0(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(ee(ic,"New document in limbo: "+n),t.Eu.add(r),oc(t))}function oc(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new oe(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new Xw(n)),t.Ru=t.Ru.insert(n,r),Lp(t.remoteStore,new Bn(sn(xo(n.path)),r,"TargetPurposeLimboResolution",Co.ce))}}async function di(t,e,n){const r=he(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{a.push(r.pu(c,e,n).then((h=>{if((h||n)&&r.isPrimaryClient){const d=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(h){s.push(h);const d=Jl.Es(c.targetId,h);i.push(d)}})))})),await Promise.all(a),r.Pu.J_(s),await(async function(c,h){const d=he(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>F.forEach(h,(g=>F.forEach(g.Ts,(v=>d.persistence.referenceDelegate.addReference(p,g.targetId,v))).next((()=>F.forEach(g.Is,(v=>d.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))))))}catch(p){if(!ts(p))throw p;ee(Yl,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const v=d.vs.get(g),V=v.snapshotVersion,D=v.withLastLimboFreeSnapshotVersion(V);d.vs=d.vs.insert(g,D)}}})(r.localStore,i))}async function u0(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){ee(ic,"User change. New user:",e.toKey());const r=await Np(n.localStore,e);n.currentUser=e,(function(i,a){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new ne(j.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await di(n,r.Ns)}}function h0(t,e){const n=he(t),r=n.Au.get(e);if(r&&r.hu)return ye().add(r.key);{let s=ye();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Zp(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o0.bind(null,e),e.Pu.J_=Ww.bind(null,e.eventManager),e.Pu.yu=Qw.bind(null,e.eventManager),e}function f0(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l0.bind(null,e),e}class fo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return mw(this.persistence,new fw,e.initialUser,this.serializer)}Cu(e){return new xp(Ql.Vi,this.serializer)}Du(e){return new Iw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fo.provider={build:()=>new fo};class d0 extends fo{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pe(this.persistence.referenceDelegate instanceof uo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YA(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new xp((r=>uo.Vi(r,n)),this.serializer)}}class cl{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=u0.bind(null,this.syncEngine),await zw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kw})()}createDatastore(e){const n=Fo(e.databaseInfo.databaseId),r=Sw(e.databaseInfo);return xw(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,a,l){return new Ow(r,s,i,a,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>qh(this.syncEngine,n,0)),(function(){return Fh.v()?new Fh:new Aw})())}createSyncEngine(e,n){return(function(s,i,a,l,c,h,d){const p=new Zw(s,i,a,l,c,h);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=he(n);ee(yr,"RemoteStore shutting down."),r.Ea.add(5),await fi(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cl.provider={build:()=>new cl};class em{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Xn="FirestoreClient";class p0{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=Ll.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{ee(Xn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(ee(Xn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rc(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ra(t,e){t.asyncQueue.verifyOperationInProgress(),ee(Xn,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Np(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Gh(t,e){t.asyncQueue.verifyOperationInProgress();const n=await m0(t);ee(Xn,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Uh(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Uh(e.remoteStore,s))),t._onlineComponents=e}async function m0(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee(Xn,"Using user provided OfflineComponentProvider");try{await Ra(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===j.FAILED_PRECONDITION||s.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;_r("Error using user provided cache. Falling back to memory cache: "+n),await Ra(t,new fo)}}else ee(Xn,"Using default OfflineComponentProvider"),await Ra(t,new d0(void 0));return t._offlineComponents}async function tm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee(Xn,"Using user provided OnlineComponentProvider"),await Gh(t,t._uninitializedComponentsProvider._online)):(ee(Xn,"Using default OnlineComponentProvider"),await Gh(t,new cl))),t._onlineComponents}function g0(t){return tm(t).then((e=>e.syncEngine))}async function ul(t){const e=await tm(t),n=e.eventManager;return n.onListen=e0.bind(null,e.syncEngine),n.onUnlisten=r0.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t0.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s0.bind(null,e.syncEngine),n}function _0(t,e,n,r){const s=new em(r),i=new zp(e,s,n);return t.asyncQueue.enqueueAndForget((async()=>Hp(await ul(t),i))),()=>{s.Nu(),t.asyncQueue.enqueueAndForget((async()=>qp(await ul(t),i)))}}function y0(t,e,n={}){const r=new qn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,c,h){const d=new em({next:g=>{d.Nu(),a.enqueueAndForget((()=>qp(i,p)));const v=g.docs.has(l);!v&&g.fromCache?h.reject(new ne(j.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?h.reject(new ne(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new zp(xo(l.path),d,{includeMetadataChanges:!0,Ka:!0});return Hp(i,p)})(await ul(t),t.asyncQueue,e,n,r))),r.promise}function E0(t,e){const n=new qn;return t.asyncQueue.enqueueAndForget((async()=>i0(await g0(t),e,n))),n.promise}function nm(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const v0="ComponentProvider",Kh=new Map;function T0(t,e,n,r,s){return new jI(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,nm(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const rm="firestore.googleapis.com",Wh=!0;class Qh{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rm,this.ssl=Wh}else this.host=e.host,this.ssl=e.ssl??Wh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Dp;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QA)throw new ne(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nm(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ne(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ne(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ne(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ac{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new EI;switch(r.type){case"firstParty":return new AI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Kh.get(n);r&&(ee(v0,"Removing Datastore"),Kh.delete(n),r.terminate())})(this),Promise.resolve()}}function I0(t,e,n,r={}){t=zn(t,ac);const s=Ol(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Kv(`https://${l}`),Yv("Firestore",!0)),i.host!==rm&&i.host!==l&&_r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Zi(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=pt.MOCK_USER;else{h=Wv(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ne(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new pt(p)}t._authCredentials=new vI(new Hd(h,d))}}class jo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ci(n,Xe._jsonSchema))return new Xe(e,r||null,new oe(Fe.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:Ke("string",Xe._jsonSchemaVersion),referencePath:Ke("string")};class ri extends jo{constructor(e,n,r){super(e,n,xo(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new oe(e))}withConverter(e){return new ri(this.firestore,e,this._path)}}function Rs(t,e,...n){if(t=Ws(t),arguments.length===1&&(e=Ll.newId()),PI("doc","path",e),t instanceof ac){const r=Fe.fromString(e,...n);return ch(r),new Xe(t,null,new oe(r))}{if(!(t instanceof Xe||t instanceof ri))throw new ne(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return ch(r),new Xe(t.firestore,t instanceof ri?t.converter:null,new oe(r))}}const Jh="AsyncQueue";class Yh{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kp(this,"async_queue_retry"),this._c=()=>{const r=ba();r&&ee(Jh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ba();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ba();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new qn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ts(e))throw e;ee(Jh,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Rn("INTERNAL UNHANDLED ERROR: ",Xh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=nc.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&le(47125,{Pc:Xh(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Xh(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class si extends ac{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Yh,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yh(e),this._firestoreClient=void 0,await e}}}function A0(t,e){const n=typeof t=="object"?t:aI(),r=typeof t=="string"?t:ro,s=nI(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zv("firestore");i&&I0(s,...i)}return s}function lc(t){if(t._terminated)throw new ne(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||w0(t),t._firestoreClient}function w0(t){const e=t._freezeSettings(),n=T0(t._databaseId,t._app?.options.appId||"",t._persistenceKey,t._app?.options.apiKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new p0(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Ft{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ft(ct.fromBase64String(e))}catch(n){throw new ne(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ft(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ft._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ci(e,Ft._jsonSchema))return Ft.fromBase64String(e.bytes)}}Ft._jsonSchemaVersion="firestore/bytes/1.0",Ft._jsonSchema={type:Ke("string",Ft._jsonSchemaVersion),bytes:Ke("string")};class sm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class im{constructor(e){this._methodName=e}}class an{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:an._jsonSchemaVersion}}static fromJSON(e){if(ci(e,an._jsonSchema))return new an(e.latitude,e.longitude)}}an._jsonSchemaVersion="firestore/geoPoint/1.0",an._jsonSchema={type:Ke("string",an._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};class Kt{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kt._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ci(e,Kt._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Kt(e.vectorValues);throw new ne(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kt._jsonSchemaVersion="firestore/vectorValue/1.0",Kt._jsonSchema={type:Ke("string",Kt._jsonSchemaVersion),vectorValues:Ke("object")};const b0=/^__.*__$/;class R0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ui(e,this.data,n,this.fieldTransforms)}}function om(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{dataSource:t})}}class cc{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new cc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return po(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(om(this.dataSource)&&b0.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class S0{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fo(e)}createContext(e,n,r,s=!1){return new cc({dataSource:e,methodName:n,targetDoc:r,path:at.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function C0(t){const e=t._freezeSettings(),n=Fo(t._databaseId);return new S0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function P0(t,e,n,r,s,i={}){const a=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);um("Data must be an object, but it was:",a,r);const l=lm(r,a);let c,h;if(i.merge)c=new zt(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=uc(e,p,n);if(!a.contains(g))throw new ne(j.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);x0(d,g)||d.push(g)}c=new zt(d),h=a.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=a.fieldTransforms;return new R0(new Lt(l),c,h)}function am(t,e){if(cm(t=Ws(t)))return um("Unsupported field value:",e,t),lm(t,e);if(t instanceof im)return(function(r,s){if(!om(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let c=am(l,s.childContextForArray(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=Ws(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Le.fromDate(r);return{timestampValue:co(s.serializer,i)}}if(r instanceof Le){const i=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:co(s.serializer,i)}}if(r instanceof an)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ft)return{bytesValue:Ap(s.serializer,r._byteString)};if(r instanceof Xe){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Kl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Kt)return(function(a,l){const c=a instanceof Kt?a.toArray():a;return{mapValue:{fields:{[Xd]:{stringValue:Zd},[so]:{arrayValue:{values:c.map((d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return ql(l.serializer,d)}))}}}}}})(r,s);if(Vp(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Fl(r)}`)})(t,e)}function lm(t,e){const n={};return Gd(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,((r,s)=>{const i=am(s,e.childContextForField(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function cm(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof an||t instanceof Ft||t instanceof Xe||t instanceof im||t instanceof Kt||Vp(t))}function um(t,e,n){if(!cm(n)||!qd(n)){const r=Fl(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function uc(t,e,n){if((e=Ws(e))instanceof sm)return e._internalPath;if(typeof e=="string")return D0(t,e);throw po("Field path arguments must be of type string or ",t,!1,void 0,n)}const V0=new RegExp("[~\\*/\\[\\]]");function D0(t,e,n){if(e.search(V0)>=0)throw po(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sm(...e.split("."))._internalPath}catch{throw po(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function po(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new ne(j.INVALID_ARGUMENT,l+t+c)}function x0(t,e){return t.some((n=>n.isEqual(e)))}class N0{convertValue(e,n="none"){switch(Jn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Er(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[so].arrayValue?.values?.map((r=>$e(r.doubleValue)));return new Kt(n)}convertGeoPoint(e){return new an($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vo(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xs(e));default:return null}}convertTimestamp(e){const n=Wn(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Pe(Pp(r),9688,{name:e});const s=new Zs(r.get(1),r.get(3)),i=new oe(r.popFirst(5));return s.isEqual(n)||Rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}class hm extends N0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ft(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}const Zh="@firebase/firestore",ef="4.11.0";function tf(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(t,["next","error","complete"])}class fm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(uc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class O0 extends fm{data(){return super.data()}}function k0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function M0(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ss{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pr extends fm{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $i(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pr._jsonSchemaVersion="firestore/documentSnapshot/1.0",pr._jsonSchema={type:Ke("string",pr._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class $i extends pr{data(e={}){return super.data(e)}}class $r{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ss(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new $i(this._firestore,this._userDataWriter,r.key,r,new Ss(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const c=new $i(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ss(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new $i(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ss(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:L0(l.type),doc:c,oldIndex:h,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ll.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function L0(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}$r._jsonSchemaVersion="firestore/querySnapshot/1.0",$r._jsonSchema={type:Ke("string",$r._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};function nf(t){t=zn(t,Xe);const e=zn(t.firestore,si),n=lc(e);return y0(n,t._key).then((r=>dm(e,t,r)))}function rf(t,e,n){t=zn(t,Xe);const r=zn(t.firestore,si),s=M0(t.converter,e),i=C0(r);return B0(r,[P0(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Tn.none())])}function F0(t,...e){t=Ws(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tf(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tf(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let i,a,l;if(t instanceof Xe)a=zn(t.firestore,si),l=xo(t._key.path),i={next:h=>{e[r]&&e[r](dm(a,t,h))},error:e[r+1],complete:e[r+2]};else{const h=zn(t,jo);a=zn(h.firestore,si),l=h._query;const d=new hm(a);i={next:p=>{e[r]&&e[r](new $r(a,d,h,p))},error:e[r+1],complete:e[r+2]},k0(t._query)}const c=lc(a);return _0(c,l,s,i)}function B0(t,e){const n=lc(t);return E0(n,e)}function dm(t,e,n){const r=n.docs.get(e._key),s=new hm(t);return new pr(t,s,e._key,r,new Ss(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){yI(oI),to(new Qs("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new si(new TI(r.getProvider("auth-internal")),new wI(a,r.getProvider("app-check-internal")),$I(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Br(Zh,ef,e),Br(Zh,ef,"esm2020")})();var U0="firebase",j0="12.9.0";Br(U0,j0,"app");const $0={apiKey:"AIzaSyDn1Mc0vfxH3CZ6hKfEa5UsZpB6CFJGnX4",authDomain:"uzo-menu.firebaseapp.com",projectId:"uzo-menu",storageBucket:"uzo-menu.firebasestorage.app",messagingSenderId:"717673685617",appId:"1:717673685617:web:f06683d78cc846b57671d0"},H0=Nd($0),Cs=A0(H0),q0={class:"hero"},z0={class:"hero-icon"},G0={class:"content"},K0={class:"info-bar"},W0={key:1},Q0={key:0,class:"happy-hour-banner"},J0=["id"],Y0={class:"sec-title"},X0={key:1,class:"drink-compact-list"},Z0={key:2,class:"drinks-list"},eb=["id"],tb={class:"sec-title"},nb={__name:"MenuView",setup(t){const e=qt({hiddenCategories:[],hiddenItems:{}}),n=qt(new Date),r=Ge(()=>n.value.getDay()),s=Ge(()=>n.value.getHours()*100+n.value.getMinutes()),i=Ge(()=>{const V=mn.hours[r.value];return!V||!V.open||!V.close?null:V}),a=Ge(()=>{if(!mn.happyHour||!i.value)return null;const{start:V,end:D}=mn.happyHour,R=Array.isArray(V)?V:[V],N=Array.isArray(D)?D:[D];for(let O=0;O<R.length;O++){const q=parseInt(R[O].replace(":","")),G=parseInt(N[O].replace(":",""));if(s.value>=q&&s.value<G)return{start:R[O],end:N[O]}}return null}),l=Ge(()=>a.value!==null);function c(V){const D=parseFloat(mn.happyHour.discount)/100;V.badge="happyhour",V.badgeLabel=` ${mn.happyHour.discount} off`,V.price&&(V.originalPrice=V.price,V.price=h(V.price,D)),V.sizes&&(V.sizes=V.sizes.map(R=>({...R,originalPrice:R.price,price:h(R.price,D)})))}function h(V,D){return`${(parseFloat(V.replace("",""))*(1-D)).toFixed(2)}`}const d=Ge(()=>Yi.filter(V=>!(e.value.hiddenCategories.includes(V.id)||V.happyHourOnly&&!l.value)).map(V=>{const D=JSON.parse(JSON.stringify(V));return e.value.hiddenItems[V.id]&&(D.items=D.items.filter((R,N)=>!e.value.hiddenItems[V.id].includes(N)),Array.isArray(D.featured)&&(D.featured=D.featured.filter((R,N)=>!e.value.hiddenItems[V.id].includes(N)))),l.value&&(D.featured&&(Array.isArray(D.featured)?D.featured:[D.featured]).forEach(N=>{N.happyHour&&c(N)}),D.items.forEach(R=>{R.happyHour&&c(R)})),D})),p=Ge(()=>[...d.value.map(V=>({id:V.id,icon:V.icon,label:V.label})),..._a.map(V=>({id:V.id,icon:V.icon,label:V.label}))]),g=qt(Yi[0].id);function v(V){g.value=V;const D=document.getElementById("sec-"+V);D&&D.scrollIntoView({behavior:"smooth",block:"start"})}return Hf(()=>{F0(Rs(Cs,"settings","menu"),R=>{if(R.exists()){const N=R.data();e.value={hiddenCategories:N.hiddenCategories||[],hiddenItems:N.hiddenItems||{}}}}),setInterval(()=>{n.value=new Date},6e4);const V=[...d.value.map(R=>R.id),..._a.map(R=>R.id)],D=new IntersectionObserver(R=>{R.forEach(N=>{N.isIntersecting&&(g.value=N.target.id.replace("sec-",""))})},{rootMargin:"-40% 0px -55% 0px"});V.forEach(R=>{const N=document.getElementById("sec-"+R);N&&D.observe(N)})}),Sl(()=>{unsubscribe()}),(V,D)=>(z(),Y(we,null,[At(RE,{categories:p.value,activeCategory:g.value,onNavigate:v},null,8,["categories","activeCategory"]),W("div",null,[W("div",q0,[W("span",z0,te(Nt(mn).icon),1),W("h1",null,te(Nt(mn).name),1),W("p",null,te(Nt(mn).tagline),1)]),W("div",G0,[W("div",K0,[i.value?(z(),Y(we,{key:0},[mr("  Open today  "+te(i.value.label)+" "+te(i.value.open)+"  "+te(i.value.close),1)],64)):(z(),Y("span",W0,"Sorry, we're closed today."))]),D[1]||(D[1]=W("div",{class:"allergy-bar"}," Allergen info available on request  ask our staff",-1)),a.value?(z(),Y("div",Q0,[D[0]||(D[0]=W("div",{style:{"text-align":"center"}}," Happy Hour right now!",-1)),mr(" "+te(Nt(mn).happyHour.discount)+" off on select beers from "+te(a.value.start)+" until "+te(a.value.end),1)])):xe("",!0),(z(!0),Y(we,null,rt(d.value,R=>(z(),Y("div",{key:R.id,class:"section",id:"sec-"+R.id},[W("div",Y0,te(R.icon)+" "+te(R.label),1),R.featured?(z(),Y(we,{key:0},[Array.isArray(R.featured)?(z(!0),Y(we,{key:0},rt(R.featured,N=>(z(),Mt($a,{key:N.name,item:N},null,8,["item"]))),128)):(z(),Mt($a,{key:1,item:R.featured},null,8,["item"]))],64)):xe("",!0),R.layout==="compact"?(z(),Y("div",X0,[(z(!0),Y(we,null,rt(R.items,N=>(z(),Mt(Ov,{key:N.name,item:N},null,8,["item"]))),128))])):(z(),Y("div",Z0,[(z(!0),Y(we,null,rt(R.items,N=>(z(),Mt(_v,{key:N.name,item:N},null,8,["item"]))),128))]))],8,J0))),128)),D[2]||(D[2]=W("div",{class:"section-divider"},[W("span",null," Food Menu")],-1)),(z(!0),Y(we,null,rt(Nt(_a),R=>(z(),Y("div",{key:R.id,class:"section",id:"sec-"+R.id},[W("div",tb,te(R.icon)+" "+te(R.label),1),R.featured?(z(),Mt(Wu,{key:0,item:R.featured,featured:!0},null,8,["item"])):xe("",!0),(z(!0),Y(we,null,rt(R.items,N=>(z(),Mt(Wu,{key:N.name,item:N},null,8,["item"]))),128))],8,eb))),128))])])],64))}},rb={class:"pin-modal"},sb={key:0,class:"pin-error"},ib={class:"pin-actions"},ob=["disabled"],ab={key:1,class:"admin-panel"},lb={class:"admin-content"},cb={class:"admin-section"},ub={class:"toggle-list"},hb={class:"toggle-label"},fb=["checked","onChange"],db={class:"toggle-text"},pb={class:"toggle-list"},mb={class:"toggle-label"},gb=["checked","onChange"],_b={class:"toggle-text"},yb={class:"toggle-label"},Eb=["checked","onChange"],vb={class:"toggle-text"},Tb={class:"admin-actions"},Ib=["disabled"],Ab=["disabled"],wb={key:0,class:"last-saved"},bb={__name:"AdminPanel",setup(t){const e=qt(!0),n=qt(""),r=qt(""),s=qt(!1),i=qt({hiddenCategories:[],hiddenItems:{}}),a=qt(!1),l=qt("");async function c(){if(!n.value){r.value="Please enter PIN";return}s.value=!0,r.value="";try{const R=Rs(Cs,"settings","admin"),N=await nf(R);if(N.exists()){const O=N.data().pin;n.value===O?(e.value=!1,await h()):(r.value="Incorrect PIN",n.value="")}else r.value="Admin settings not found"}catch(R){console.error("Error checking PIN:",R),r.value="Error checking PIN"}finally{s.value=!1}}async function h(){try{const R=Rs(Cs,"settings","menu"),N=await nf(R);if(N.exists()){const O=N.data();i.value={hiddenCategories:O.hiddenCategories||[],hiddenItems:O.hiddenItems||{}},O.updatedAt&&(l.value=new Date(O.updatedAt.seconds*1e3).toLocaleString())}}catch(R){console.error("Error loading settings:",R),alert("Error loading settings from server")}}function d(R){const N=i.value.hiddenCategories.indexOf(R);N>-1?i.value.hiddenCategories.splice(N,1):i.value.hiddenCategories.push(R)}function p(R,N){return i.value.hiddenItems[R]?.includes(N)||!1}function g(R,N){i.value.hiddenItems[R]||(i.value.hiddenItems[R]=[]);const O=i.value.hiddenItems[R].indexOf(N);O>-1?i.value.hiddenItems[R].splice(O,1):i.value.hiddenItems[R].push(N)}async function v(){a.value=!0;try{const R=Rs(Cs,"settings","menu");await rf(R,{hiddenCategories:i.value.hiddenCategories,hiddenItems:i.value.hiddenItems,updatedAt:new Date}),l.value=new Date().toLocaleString(),alert(" Settings saved! All guest devices will update within seconds.")}catch(R){console.error("Error saving settings:",R),alert(" Error saving settings. Check console.")}finally{a.value=!1}}async function V(){if(confirm("Reset all settings to default? This will show all items.")){a.value=!0;try{i.value={hiddenCategories:[],hiddenItems:{}};const R=Rs(Cs,"settings","menu");await rf(R,{hiddenCategories:[],hiddenItems:{},updatedAt:new Date}),l.value=new Date().toLocaleString(),alert(" Settings reset!")}catch(R){console.error("Error resetting:",R),alert(" Error resetting settings")}finally{a.value=!1}}}function D(){window.location.href="/"}return(R,N)=>(z(),Y(we,null,[e.value?(z(),Y("div",{key:0,class:"pin-modal-overlay",onClick:ry(D,["self"])},[W("div",rb,[N[1]||(N[1]=W("h2",null," Enter Admin PIN",-1)),bg(W("input",{"onUpdate:modelValue":N[0]||(N[0]=O=>n.value=O),type:"password",inputmode:"numeric",pattern:"[0-9]*",placeholder:"Enter PIN",class:"pin-input",onKeyup:iy(c,["enter"]),autofocus:""},null,544),[[ey,n.value]]),r.value?(z(),Y("div",sb," "+te(r.value),1)):xe("",!0),W("div",ib,[W("button",{onClick:c,class:"pin-submit",disabled:s.value},te(s.value?" Checking...":" Submit"),9,ob),W("button",{onClick:D,class:"pin-cancel"}," Cancel")])])])):xe("",!0),e.value?xe("",!0):(z(),Y("div",ab,[W("div",{class:"admin-header"},[N[2]||(N[2]=W("h1",null,"Menu Control Panel",-1)),W("button",{onClick:D,class:"back-btn"}," Back to Menu")]),W("div",lb,[W("section",cb,[N[3]||(N[3]=W("h2",null," Drink Categories",-1)),W("div",ub,[(z(!0),Y(we,null,rt(Nt(Yi),O=>(z(),Y("div",{key:O.id,class:"toggle-item"},[W("label",hb,[W("input",{type:"checkbox",checked:!i.value.hiddenCategories.includes(O.id),onChange:q=>d(O.id)},null,40,fb),W("span",db,te(O.label),1)])]))),128))])]),(z(!0),Y(we,null,rt(Nt(Yi),O=>(z(),Y("section",{class:"admin-section",key:"items-"+O.id},[W("h2",null,te(O.icon)+" "+te(O.label)+" - Items",1),W("div",pb,[(z(!0),Y(we,null,rt(O.items,(q,G)=>(z(),Y("div",{key:G,class:"toggle-item"},[W("label",mb,[W("input",{type:"checkbox",checked:!p(O.id,G),onChange:de=>g(O.id,G)},null,40,gb),W("span",_b,te(q.name),1)])]))),128)),O.featured?(z(!0),Y(we,{key:0},rt(O.featured,(q,G)=>(z(),Y("div",{key:G,class:"toggle-item"},[W("label",yb,[W("input",{type:"checkbox",checked:!p(O.id,G),onChange:de=>g(O.id,G)},null,40,Eb),W("span",vb,te(q.name),1)])]))),128)):xe("",!0)])]))),128)),W("div",Tb,[W("button",{onClick:v,class:"save-btn",disabled:a.value},te(a.value?" Saving...":"Save & Publish"),9,Ib),W("button",{onClick:V,class:"reset-btn",disabled:a.value}," Reset All ",8,Ab)]),l.value?(z(),Y("div",wb," Last saved: "+te(l.value),1)):xe("",!0)])]))],64))}},Rb=er(bb,[["__scopeId","data-v-8f2a6347"]]),Sb=[{path:"/",name:"Menu",component:nb},{path:"/admin",name:"Admin",component:Rb}],Cb=EE({history:Yy(),routes:Sb});ly(dy).use(Cb).mount("#app");
